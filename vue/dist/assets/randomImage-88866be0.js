import{d as q,$ as H,r as h,o as J,S as p,T as x,c as t,a2 as e,U as f,a1 as r,V as b,W as v,J as Q,a4 as Y,ad as Z,ae as M,Y as F,a0 as j,cE as X,cF as ee,ai as le,ag as te,R as se,Z as ie}from"./index-b4b95ab0.js";import{a as ne,b as oe,c as ae,L as re,R as ce,f as de,_ as ue}from"./MultiSelectKeep-45694de9.js";import{u as me,c as pe,a as fe,F as ve,d as _e}from"./FileItem-97e4c1b8.js";import"./functionalCallableComp-b6f8c4d2.js";/* empty css              */import"./shortcut-7319839f.js";import"./Checkbox-125bf371.js";import"./index-f9c4a42f.js";import"./index-ae4abcd1.js";import"./_isIterateeCall-b2266fc9.js";const ge={class:"refresh-button"},ke={class:"hint"},we={key:0,class:"preview-switch"},Ce=q({__name:"randomImage",props:{tabIdx:{},paneIdx:{},id:{},paneKey:{}},setup(Se){const R=H(),d=h(!1),n=h([]),o=n,_=async()=>{try{d.value=!0;const i=await X();n.value=i}finally{d.value=!1}};J(_);const{stackViewEl:V,multiSelectedIdxs:u,stack:A,scroller:$}=me({images:n}).toRefs(),{onClearAllSelected:z,onSelectAll:B,onReverseSelect:N}=pe();ne();const{itemSize:g,gridItems:P,cellWidth:T,onScroll:E}=fe(),{showGenInfo:c,imageGenInfo:k,q:U,onContextMenuClick:D,onFileItemClick:G}=oe({openNext:ee}),{previewIdx:a,previewing:w,onPreviewVisibleChange:K,previewImgMove:C,canPreview:S}=ae(),I=async(i,l,m)=>{A.value=[{curr:"",files:n.value}],await D(i,l,m)};return(i,l)=>{const m=ue,O=le,L=te,W=se;return p(),x("div",{class:"container",ref_key:"stackViewEl",ref:V},[t(m,{show:!!e(u).length||e(R).keepMultiSelect,onClearAllSelected:e(z),onSelectAll:e(B),onReverseSelect:e(N)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),f("div",ge,[t(O,{onClick:_,type:"primary",loading:d.value,shape:"round"},{default:r(()=>[b(v(i.$t("shuffle")),1)]),_:1},8,["loading"])]),t(W,{visible:e(c),"onUpdate:visible":l[1]||(l[1]=s=>Y(c)?c.value=s:null),width:"70vw","mask-closable":"",onOk:l[2]||(l[2]=s=>c.value=!1)},{cancelText:r(()=>[]),default:r(()=>[t(L,{active:"",loading:!e(U).isIdle},{default:r(()=>[f("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto"},onDblclick:l[0]||(l[0]=s=>e(Q)(e(k)))},[f("div",ke,v(i.$t("doubleClickToCopy")),1),b(" "+v(e(k)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),t(e(_e),{ref_key:"scroller",ref:$,class:"file-list",items:n.value.slice(),"item-size":e(g).first,"key-field":"fullpath","item-secondary-size":e(g).second,gridItems:e(P),onScroll:e(E)},{default:r(({item:s,index:y})=>[t(ve,{idx:y,file:s,"cell-width":e(T),"full-screen-preview-image-url":e(o)[e(a)]?e(Z)(e(o)[e(a)]):"",onContextMenuClick:I,onPreviewVisibleChange:e(K),"is-selected-mutil-files":e(u).length>1,selected:e(u).includes(y),onFileItemClick:e(G)},null,8,["idx","file","cell-width","full-screen-preview-image-url","onPreviewVisibleChange","is-selected-mutil-files","selected","onFileItemClick"])]),_:1},8,["items","item-size","item-secondary-size","gridItems","onScroll"]),e(w)?(p(),x("div",we,[t(e(re),{onClick:l[3]||(l[3]=s=>e(C)("prev")),class:M({disable:!e(S)("prev")})},null,8,["class"]),t(e(ce),{onClick:l[4]||(l[4]=s=>e(C)("next")),class:M({disable:!e(S)("next")})},null,8,["class"])])):F("",!0),e(w)&&e(o)&&e(o)[e(a)]?(p(),j(de,{key:1,file:e(o)[e(a)],idx:e(a),onContextMenuClick:I},null,8,["file","idx"])):F("",!0)],512)}}});const $e=ie(Ce,[["__scopeId","data-v-8ed534a8"]]);export{$e as default};
