var nn=Object.defineProperty;var sn=(e,i,n)=>i in e?nn(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var Ne=(e,i,n)=>(sn(e,typeof i!="symbol"?i+"":i,n),n);import{d as be,u as Tt,ag as q,a1 as Pt,h as ce,c as A,ch as an,ci as rn,v as K,aS as ln,n as Z,by as on,P as at,bT as cn,a5 as le,cj as un,aD as dn,ck as fn,cl as hn,ax as Ot,aj as Oe,bd as Dt,cm as gn,cn as pn,co as vn,cp as mn,cq as yn,cg as bn,cr as kn,cs as Mt,ct as Ke,r as qe,c5 as Nt,af as Sn,cu as zt,aa as te,a7 as U,cv as Ye,s as he,ao as De,au as wn,a8 as ze,cw as An,cx as Ft,cy as rt,ak as $t,bQ as lt,bP as In,cz as _e,cA as _n,ap as Cn,cB as ie,bN as Qt,cC as En,cD as Tn,G as xe,ad as Pn,ab as On,ac as ot,ai as ue,cE as ct,ce as Dn,V as ge,Y as Fe,Q as oe,cF as Mn,cG as Nn,m as O,O as zn,c6 as ut,cH as Fn,cI as $n,cJ as Qn,c1 as Bn,c4 as xn,cK as Ln,cL as Rn,am as Bt,an as xt,a4 as Lt,o as f,z as J,cM as jn,cN as Hn,cO as Vn,cP as Un,cQ as Wn,bI as Jn,k,ae as we,p as E,A as Q,H as ae,cR as dt,bB as Kn,cS as qn,I as Rt,R as de,t as I,C as W,Z as jt,cT as Yn,c9 as Gn,M as Ht,l as c,q as Vt,cU as Zn,cV as Xn,cW as ei,c8 as ti,cX as ni,cY as ft,cZ as ii}from"./index-0356ebd2.js";import{t as $e,a as pe,l as fe,b as si,M as Ut,C as ai,m as Wt,g as ri,c as li,d as oi,e as ci}from"./functionalCallableComp-d98a1fa1.js";import{D as ve,a as Le}from"./index-12126bf0.js";import"./index-daa3a0fa.js";var ui=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},di=be({compatConfig:{MODE:3},name:"ACheckableTag",props:ui(),setup:function(i,n){var t=n.slots,s=n.emit,r=Tt("tag",i),v=r.prefixCls,d=function(o){var y=i.checked;s("update:checked",!y),s("change",!y),s("click",o)},p=q(function(){var b;return Pt(v.value,(b={},ce(b,"".concat(v.value,"-checkable"),!0),ce(b,"".concat(v.value,"-checkable-checked"),i.checked),b))});return function(){var b;return A("span",{class:p.value,onClick:d},[(b=t.default)===null||b===void 0?void 0:b.call(t)])}}});const Re=di;var fi=new RegExp("^(".concat(an.join("|"),")(-inverse)?$")),hi=new RegExp("^(".concat(rn.join("|"),")$")),gi=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:at.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:at.any}},me=be({compatConfig:{MODE:3},name:"ATag",props:gi(),slots:["closeIcon","icon"],setup:function(i,n){var t=n.slots,s=n.emit,r=n.attrs,v=Tt("tag",i),d=v.prefixCls,p=v.direction,b=K(!0);ln(function(){i.visible!==void 0&&(b.value=i.visible)});var o=function(a){a.stopPropagation(),s("update:visible",!1),s("close",a),!a.defaultPrevented&&i.visible===void 0&&(b.value=!1)},y=q(function(){var w=i.color;return w?fi.test(w)||hi.test(w):!1}),C=q(function(){var w;return Pt(d.value,(w={},ce(w,"".concat(d.value,"-").concat(i.color),y.value),ce(w,"".concat(d.value,"-has-color"),i.color&&!y.value),ce(w,"".concat(d.value,"-hidden"),!b.value),ce(w,"".concat(d.value,"-rtl"),p.value==="rtl"),w))});return function(){var w,a,l,h=i.icon,g=h===void 0?(w=t.icon)===null||w===void 0?void 0:w.call(t):h,_=i.color,S=i.closeIcon,u=S===void 0?(a=t.closeIcon)===null||a===void 0?void 0:a.call(t):S,N=i.closable,D=N===void 0?!1:N,P=function(){return D?u?A("span",{class:"".concat(d.value,"-close-icon"),onClick:o},[u]):A(cn,{class:"".concat(d.value,"-close-icon"),onClick:o},null):null},z={backgroundColor:_&&!y.value?_:void 0},B=g||null,T=(l=t.default)===null||l===void 0?void 0:l.call(t),j=B?A(Z,null,[B,A("span",null,[T])]):T,H="onClick"in r,V=A("span",{class:C.value,style:z},[j,P()]);return H?A(on,null,{default:function(){return[V]}}):V}}});me.CheckableTag=Re;me.install=function(e){return e.component(me.name,me),e.component(Re.name,Re),e};const pi=me;ve.Button=Le;ve.install=function(e){return e.component(ve.name,ve),e.component(Le.name,Le),e};var vi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const mi=vi;function ht(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){yi(e,s,n[s])})}return e}function yi(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var Ge=function(i,n){var t=ht({},i,n.attrs);return A(le,ht({},t,{icon:mi}),null)};Ge.displayName="StarFilled";Ge.inheritAttrs=!1;const Jt=Ge;var bi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const ki=bi;function gt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Si(e,s,n[s])})}return e}function Si(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var Ze=function(i,n){var t=gt({},i,n.attrs);return A(le,gt({},t,{icon:ki}),null)};Ze.displayName="FileOutlined";Ze.inheritAttrs=!1;const wi=Ze;var Ai={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const Ii=Ai;function pt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){_i(e,s,n[s])})}return e}function _i(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var Xe=function(i,n){var t=pt({},i,n.attrs);return A(le,pt({},t,{icon:Ii}),null)};Xe.displayName="FolderOpenOutlined";Xe.inheritAttrs=!1;const Ci=Xe;function Ei(e,i,n){if(!un(n))return!1;var t=typeof i;return(t=="number"?dn(n)&&fn(i,n.length):t=="string"&&i in n)?hn(n[i],e):!1}function Ti(e){return e&&e.length?e[0]:void 0}var Pi=Math.ceil,Oi=Math.max;function Di(e,i,n,t){for(var s=-1,r=Oi(Pi((i-e)/(n||1)),0),v=Array(r);r--;)v[t?r:++s]=e,e+=n;return v}function Mi(e){return function(i,n,t){return t&&typeof t!="number"&&Ei(i,n,t)&&(n=t=void 0),i=$e(i),n===void 0?(n=i,i=0):n=$e(n),t=t===void 0?i<n?1:-1:$e(t),Di(i,n,t,e)}}var Ni=Mi();const Kt=Ni,ye=(...e)=>{document.addEventListener(...e),Ot(()=>document.removeEventListener(...e))},zi="data:image/png;base64,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",Ae=new WeakMap;function Fi(e,i){return{useHookShareState:t=>{const s=pn();Oe(s),Ae.has(s)||(Ae.set(s,Dt(e(s,t??(i==null?void 0:i())))),Ot(()=>{Ae.delete(s)}));const r=Ae.get(s);return Oe(r),{state:r,toRefs(){return gn(r)}}}}}var $i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const Qi=$i;function vt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Bi(e,s,n[s])})}return e}function Bi(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var et=function(i,n){var t=vt({},i,n.attrs);return A(le,vt({},t,{icon:Qi}),null)};et.displayName="CaretRightOutlined";et.inheritAttrs=!1;const mt=et;var xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Li=xi;function yt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Ri(e,s,n[s])})}return e}function Ri(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var tt=function(i,n){var t=yt({},i,n.attrs);return A(le,yt({},t,{icon:Li}),null)};tt.displayName="DatabaseOutlined";tt.inheritAttrs=!1;const ji=tt;var Hi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};const Vi=Hi;function bt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Ui(e,s,n[s])})}return e}function Ui(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var nt=function(i,n){var t=bt({},i,n.attrs);return A(le,bt({},t,{icon:Vi}),null)};nt.displayName="HeartFilled";nt.inheritAttrs=!1;const Wi=nt;var Ji={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};const Ki=Ji;function kt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){qi(e,s,n[s])})}return e}function qi(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var it=function(i,n){var t=kt({},i,n.attrs);return A(le,kt({},t,{icon:Ki}),null)};it.displayName="HeartOutlined";it.inheritAttrs=!1;const Yi=it;var Gi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Zi=Gi;function St(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Xi(e,s,n[s])})}return e}function Xi(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var st=function(i,n){var t=St({},i,n.attrs);return A(le,St({},t,{icon:Zi}),null)};st.displayName="StarOutlined";st.inheritAttrs=!1;const qt=st,es="/infinite_image_browsing/fe-static/assets/play-68f5544d.svg";var Yt={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,i){(function(n,t){e.exports=t})(vn,function(){var n={};n.version="0.3.5";var t=n.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};n.configure=function(a){var l,h;for(l in a)h=a[l],h!==void 0&&a.hasOwnProperty(l)&&(t[l]=h);return this},n.status=null,n.set=function(a){var l=n.isStarted();a=s(a,t.minimum,1),n.status=a===1?null:a;var h=n.render(!l),g=h.querySelector(t.barSelector),_=t.speed,S=t.easing;return h.offsetWidth,d(function(u){t.positionUsing===""&&(t.positionUsing=n.getPositioningCSS()),p(g,v(a,_,S)),a===1?(p(h,{transition:"none",opacity:1}),h.offsetWidth,setTimeout(function(){p(h,{transition:"all "+_+"ms linear",opacity:0}),setTimeout(function(){n.remove(),u()},_)},_)):setTimeout(u,_)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var a=function(){setTimeout(function(){n.status&&(n.trickle(),a())},t.trickleSpeed)};return t.trickle&&a(),this},n.done=function(a){return!a&&!n.status?this:n.inc(.3+.5*Math.random()).set(1)},n.inc=function(a){var l=n.status;return l?l>1?void 0:(typeof a!="number"&&(l>=0&&l<.2?a=.1:l>=.2&&l<.5?a=.04:l>=.5&&l<.8?a=.02:l>=.8&&l<.99?a=.005:a=0),l=s(l+a,0,.994),n.set(l)):n.start()},n.trickle=function(){return n.inc()},function(){var a=0,l=0;n.promise=function(h){return!h||h.state()==="resolved"?this:(l===0&&n.start(),a++,l++,h.always(function(){l--,l===0?(a=0,n.done()):n.set((a-l)/a)}),this)}}(),n.getElement=function(){var a=n.getParent();if(a){var l=Array.prototype.slice.call(a.querySelectorAll(".nprogress")).filter(function(h){return h.parentElement===a});if(l.length>0)return l[0]}return null},n.getParent=function(){if(t.parent instanceof HTMLElement)return t.parent;if(typeof t.parent=="string")return document.querySelector(t.parent)},n.render=function(a){if(n.isRendered())return n.getElement();o(document.documentElement,"nprogress-busy");var l=document.createElement("div");l.id="nprogress",l.className="nprogress",l.innerHTML=t.template;var h=l.querySelector(t.barSelector),g=a?"-100":r(n.status||0),_=n.getParent(),S;return p(h,{transition:"all 0 linear",transform:"translate3d("+g+"%,0,0)"}),t.showSpinner||(S=l.querySelector(t.spinnerSelector),S&&w(S)),_!=document.body&&o(_,"nprogress-custom-parent"),_.appendChild(l),l},n.remove=function(){n.status=null,y(document.documentElement,"nprogress-busy"),y(n.getParent(),"nprogress-custom-parent");var a=n.getElement();a&&w(a)},n.isRendered=function(){return!!n.getElement()},n.getPositioningCSS=function(){var a=document.body.style,l="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return l+"Perspective"in a?"translate3d":l+"Transform"in a?"translate":"margin"};function s(a,l,h){return a<l?l:a>h?h:a}function r(a){return(-1+a)*100}function v(a,l,h){var g;return t.positionUsing==="translate3d"?g={transform:"translate3d("+r(a)+"%,0,0)"}:t.positionUsing==="translate"?g={transform:"translate("+r(a)+"%,0)"}:g={"margin-left":r(a)+"%"},g.transition="all "+l+"ms "+h,g}var d=function(){var a=[];function l(){var h=a.shift();h&&h(l)}return function(h){a.push(h),a.length==1&&l()}}(),p=function(){var a=["Webkit","O","Moz","ms"],l={};function h(u){return u.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(N,D){return D.toUpperCase()})}function g(u){var N=document.body.style;if(u in N)return u;for(var D=a.length,P=u.charAt(0).toUpperCase()+u.slice(1),z;D--;)if(z=a[D]+P,z in N)return z;return u}function _(u){return u=h(u),l[u]||(l[u]=g(u))}function S(u,N,D){N=_(N),u.style[N]=D}return function(u,N){var D=arguments,P,z;if(D.length==2)for(P in N)z=N[P],z!==void 0&&N.hasOwnProperty(P)&&S(u,P,z);else S(u,D[1],D[2])}}();function b(a,l){var h=typeof a=="string"?a:C(a);return h.indexOf(" "+l+" ")>=0}function o(a,l){var h=C(a),g=h+l;b(h,l)||(a.className=g.substring(1))}function y(a,l){var h=C(a),g;b(a,l)&&(g=h.replace(" "+l+" "," "),a.className=g.substring(1,g.length-1))}function C(a){return(" "+(a&&a.className||"")+" ").replace(/\s+/gi," ")}function w(a){a&&a.parentNode&&a.parentNode.removeChild(a)}return n})})(Yt);var ts=Yt.exports;const ns=mn(ts),is=yn("useBatchDownloadStore",()=>{const e=K([]);return{selectdFiles:e,addFiles:n=>{e.value=bn([...e.value,...n])}}});class wt{constructor(i,n=kn.CREATED_TIME_DESC){Ne(this,"root");Ne(this,"execQueue",[]);this.sortMethod=n,this.root={children:[],info:{name:i,size:"-",bytes:0,created_time:"",is_under_scanned_path:!0,date:"",type:"dir",fullpath:i}},this.fetchChildren(this.root)}reset(){return this.root.children=[],this.fetchChildren(this.root)}get images(){const i=n=>n.children.map(t=>{if(t.info.type==="dir")return i(t);if(Ke(t.info.name))return t.info}).filter(t=>t).flat(1);return i(this.root)}get isCompleted(){return this.execQueue.length===0}async fetchChildren(i){const{files:n}=await pe(i.info.fullpath);return i.children=Mt(n,this.sortMethod).map(t=>({info:t,children:[]})),this.execQueue.shift(),this.execQueue.unshift(...i.children.filter(t=>t.info.type==="dir").map(t=>({fn:()=>this.fetchChildren(t),...t}))),i}async next(){const i=Ti(this.execQueue);if(!i)return null;const n=await i.fn();return this.execQueue=this.execQueue.slice(),this.root={...this.root},n}}function Qe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xn(e)}const Ce=new Map,L=qe(),ss=is(),je=Nt(),At=Sn(),Ie=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Ee,useEventListen:He}=zt(),{useHookShareState:re}=Fi((e,{images:i})=>{const n=K({tabIdx:-1,paneIdx:-1}),t=q(()=>fe(s.value)),s=K([]),r=q(()=>{var _;return s.value.map(S=>S.curr).slice((_=L.conf)!=null&&_.is_win?1:0)}),v=q(()=>Ft(...r.value)),d=K(L.defaultSortingMethod),p=K(n.value.walkModePath?new wt(n.value.walkModePath,d.value):void 0);he([()=>n.value.walkModePath,d],()=>{p.value=n.value.walkModePath?new wt(n.value.walkModePath,d.value):void 0});const b=Dt(new Set);he(t,()=>b.clear());const o=q(()=>{var N;if(i.value)return i.value;if(p.value)return p.value.images.filter(D=>!b.has(D.fullpath));if(!t.value)return[];const _=((N=t.value)==null?void 0:N.files)??[],S=d.value;return Mt((D=>L.onlyFoldersAndImages?D.filter(P=>P.type==="dir"||Ke(P.name)):D)(_),S).filter(D=>!b.has(D.fullpath))}),y=K([]),C=K(-1),w=q(()=>p.value?!p.value.isCompleted:!1),a=K(!1),l=K(!1),h=()=>{var _,S,u;return(u=(S=(_=L.tabList)==null?void 0:_[n.value.tabIdx])==null?void 0:S.panes)==null?void 0:u[n.value.paneIdx]},g=zt();return g.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${o.value.length}`),y.value=Kt(0,o.value.length)}),{previewing:l,spinning:a,canLoadNext:w,multiSelectedIdxs:y,previewIdx:C,basePath:r,currLocation:v,currPage:t,stack:s,sortMethod:d,sortedFiles:o,scroller:K(),stackViewEl:K(),props:n,getPane:h,walker:p,deletedFiles:b,...g}},()=>({images:K()}));function yr(){const{previewIdx:e,eventEmitter:i,canLoadNext:n,previewing:t,sortedFiles:s,scroller:r,props:v}=re().toRefs(),{state:d}=re();let p=null;const b=(w,a)=>{var l;t.value=w,p!=null&&!w&&a&&((l=r.value)==null||l.scrollToItem(p),p=null)},o=()=>{v.value.walkModePath&&!C("next")&&n&&(te.info(U("loadingNextFolder")),i.value.emit("loadNextDir",!0))};ye("keydown",w=>{var a;if(t.value){let l=e.value;if(["ArrowDown","ArrowRight"].includes(w.key))for(l++;s.value[l]&&!ie(s.value[l].name);)l++;else if(["ArrowUp","ArrowLeft"].includes(w.key))for(l--;s.value[l]&&!ie(s.value[l].name);)l--;if(ie((a=s.value[l])==null?void 0:a.name)??""){e.value=l;const h=r.value;h&&!(l>=h.$_startIndex&&l<=h.$_endIndex)&&(p=l)}o()}});const y=w=>{var l;let a=e.value;if(w==="next")for(a++;s.value[a]&&!ie(s.value[a].name);)a++;else if(w==="prev")for(a--;s.value[a]&&!ie(s.value[a].name);)a--;if(ie((l=s.value[a])==null?void 0:l.name)??""){e.value=a;const h=r.value;h&&!(a>=h.$_startIndex&&a<=h.$_endIndex)&&(p=a)}o()},C=w=>{var l;let a=e.value;if(w==="next")for(a++;s.value[a]&&!ie(s.value[a].name);)a++;else if(w==="prev")for(a--;s.value[a]&&!ie(s.value[a].name);)a--;return ie((l=s.value[a])==null?void 0:l.name)??""};return He("removeFiles",async()=>{var w;t.value&&!d.sortedFiles[e.value]&&(te.info(U("manualExitFullScreen"),5),await Ye(500),(w=document.querySelector(".ant-image-preview-operations-operation .anticon-close"))==null||w.click(),e.value=-1)}),{previewIdx:e,onPreviewVisibleChange:b,previewing:t,previewImgMove:y,canPreview:C}}function br(){const e=K(),{scroller:i,stackViewEl:n,stack:t,currPage:s,currLocation:r,useEventListen:v,eventEmitter:d,getPane:p,props:b,deletedFiles:o,walker:y,sortedFiles:C}=re().toRefs();he(()=>t.value.length,De((m,F)=>{var x;m!==F&&((x=i.value)==null||x.scrollToItem(0))},300));const w=async m=>{var F;await _(m),b.value.walkModePath&&(await Ye(),await((F=y.value)==null?void 0:F.reset()),d.value.emit("loadNextDir"))};wn(async()=>{var m;if(!t.value.length){const F=await pe("/");t.value.push({files:F.files,curr:"/"})}e.value=new ns,e.value.configure({parent:n.value}),b.value.path&&b.value.path!=="/"?await w(b.value.walkModePath??b.value.path):(m=L.conf)!=null&&m.home&&_(L.conf.home)}),he(r,De(m=>{const F=p.value();if(!F)return;F.path=m;const x=F.path.split("/").pop(),G=(()=>{var se;if(!b.value.walkModePath){const ee=_e(m);for(const[ke,Se]of Object.entries(L.pathAliasMap))if(ee.startsWith(Se))return ee.replace(Se,ke);return x}return"Walk: "+(((se=L.quickMovePaths.find(ee=>ee.dir===F.walkModePath))==null?void 0:se.zh)??x)})();F.name=ze("div",{style:"display:flex;align-items:center"},[ze(ji),ze("span",{class:"line-clamp-1",style:"max-width: 256px"},G)]),F.nameFallbackStr=G,L.recent=L.recent.filter(se=>se.key!==F.key),L.recent.unshift({path:m,key:F.key}),L.recent.length>20&&(L.recent=L.recent.slice(0,20))},300));const a=()=>xe(r.value),l=async m=>{var F,x;if(m.type==="dir")try{(F=e.value)==null||F.start();const{files:X}=await pe(m.fullpath);t.value.push({files:X,curr:m.name})}finally{(x=e.value)==null||x.done()}},h=m=>{for(;m<t.value.length-1;)t.value.pop()},g=(m,F)=>(Oe(L.conf,"global.conf load failed"),L.conf.is_win?m.toLowerCase()==F.toLowerCase():m==F),_=async m=>{var x,X;const F=t.value.slice();try{An(m)||(m=Ft(((x=L.conf)==null?void 0:x.sd_cwd)??"/",m));const G=rt(m),se=t.value.map(ee=>ee.curr);for(se.shift();se[0]&&G[0]&&g(se[0],G[0]);)se.shift(),G.shift();for(let ee=0;ee<se.length;ee++)t.value.pop();if(!G.length)return S();for(const ee of G){const ke=(X=s.value)==null?void 0:X.files.find(Se=>g(Se.name,ee));if(!ke)throw console.error({frags:G,frag:ee,stack:$t(t.value)}),new Error(`${ee} not found`);await l(ke)}}catch(G){throw te.error(U("moveFailedCheckPath")+(G instanceof Error?G.message:"")),console.error(m,rt(m),s.value),t.value=F,G}},S=lt(async()=>{var m,F,x;try{if((m=e.value)==null||m.start(),y.value)await y.value.reset(),d.value.emit("loadNextDir");else{const{files:X}=await pe(t.value.length===1?"/":r.value);fe(t.value).files=X}o.value.clear(),(F=i.value)==null||F.scrollToItem(0),te.success(U("refreshCompleted"))}finally{(x=e.value)==null||x.done()}});In("returnToIIB",lt(async()=>{var m,F;if(!b.value.walkModePath)try{(m=e.value)==null||m.start();const{files:x}=await pe(t.value.length===1?"/":r.value);fe(t.value).files.map(G=>G.date).join()!==x.map(G=>G.date).join()&&(fe(t.value).files=x,te.success(U("autoUpdate")))}finally{(F=e.value)==null||F.done()}})),v.value("refresh",S);const u=m=>{b.value.walkModePath&&(p.value().walkModePath=m),w(m)},N=q(()=>L.quickMovePaths.map(m=>({...m,path:_e(m.dir)}))),D=q(()=>{const m=_e(r.value);return N.value.find(x=>x.path===m)}),P=async()=>{const m=D.value;if(m){if(!m.can_delete)return;await Pn({path:r.value,type:"scanned"}),te.success(U("removeCompleted"))}else await On({path:r.value,type:"scanned"}),te.success(U("addCompleted"));ot.emit("searchIndexExpired"),ot.emit("updateGlobalSetting")},z=K(!1),B=K(r.value),T=()=>{z.value=!0,B.value=r.value},j=async()=>{await _(B.value),z.value=!1};ye("click",m=>{var F,x,X;(X=(x=(F=m.target)==null?void 0:F.className)==null?void 0:x.includes)!=null&&X.call(x,"ant-input")||(z.value=!1)});const H=()=>{const m=parent.location,F=m.href.substring(0,m.href.length-m.search.length),x=new URLSearchParams(m.search);x.set("action","open"),y.value&&x.set("walk","1"),x.set("path",r.value);const X=`${F}?${x.toString()}`;xe(X,U("copyLocationUrlSuccessMsg"))},V=(m="tag-search")=>{const F=L.tabList[b.value.tabIdx],x={type:m,key:ue(),searchScope:r.value,name:U(m==="tag-search"?"imgSearch":"fuzzy-search")};F.panes.push(x),F.key=x.key},ne=()=>d.value.emit("selectAll"),$=async()=>{await si(r.value),await S()},M=()=>{const m=r.value;Ce.set(m,t.value);const F=L.tabList[b.value.tabIdx],x={type:"local",key:ue(),path:m,name:U("local"),stackKey:m,walkModePath:m};F.panes.push(x),F.key=x.key},Y=q(()=>!y.value&&C.value.some(m=>m.type==="dir"));return{locInputValue:B,isLocationEditing:z,onLocEditEnter:j,onEditBtnClick:T,addToSearchScanPathAndQuickMove:P,searchPathInfo:D,refresh:S,copyLocation:a,back:h,openNext:l,currPage:s,currLocation:r,to:_,stack:t,scroller:i,share:H,selectAll:ne,quickMoveTo:u,onCreateFloderBtnClick:$,onWalkBtnClick:M,showWalkButton:Y,searchInCurrentDir:V}}function kr({fetchNext:e}={}){const{scroller:i,sortedFiles:n,sortMethod:t,currLocation:s,stackViewEl:r,canLoadNext:v,previewIdx:d,props:p,walker:b}=re().toRefs(),{state:o}=re(),y=K(!1),C=K(L.defaultGridCellWidth),w=q(()=>C.value+16),a=44,{width:l}=_n(r),h=q(()=>~~(l.value/w.value)),g=q(()=>{const P=w.value;return{first:P+(C.value<=160?0:a),second:P}}),_=K(!1),S=async()=>{var P;if(!(_.value||!p.value.walkModePath||!v.value))try{_.value=!0,await((P=b.value)==null?void 0:P.next())}finally{_.value=!1}},u=async(P=!1)=>{const z=i.value,B=()=>P?d.value:(z==null?void 0:z.$_endIndex)??0,T=()=>{const j=n.value.length,H=50;return j?e?B()>j-H:B()>j-H&&v.value:!0};for(;T();){await Ye(30);const j=await(e??S)();if(typeof j=="boolean"&&!j)return}};o.useEventListen("loadNextDir",u);const N=()=>{const P=i.value;if(P){const z=n.value.slice(Math.max(P.$_startIndex-10,0),P.$_endIndex+10).filter(B=>B.is_under_scanned_path&&ie(B.name)).map(B=>B.fullpath);je.fetchImageTags(z)}};he(s,De(N,150));const D=De(async()=>{await u(),N()},150);return{gridItems:h,sortedFiles:n,sortMethodConv:Cn,moreActionsDropdownShow:y,gridSize:w,sortMethod:t,onScroll:D,loadNextDir:S,loadNextDirLoading:_,canLoadNext:v,itemSize:g,cellWidth:C}}function Sr(){const{currLocation:e,sortedFiles:i,currPage:n,multiSelectedIdxs:t,eventEmitter:s,walker:r}=re().toRefs(),v=()=>{t.value=[]};return ye("click",v),ye("blur",v),he(n,v),{onFileDragStart:(o,y)=>{const C=$t(i.value[y]);At.fileDragging=!0,console.log("onFileDragStart set drag file ",o,y,C);const w=[C];let a=C.type==="dir";if(t.value.includes(y)){const h=t.value.map(g=>i.value[g]);w.push(...h),a=h.some(g=>g.type==="dir")}const l={includeDir:a,loc:e.value||"search-result",path:ct(w,"fullpath").map(h=>h.fullpath),nodes:ct(w,"fullpath"),__id:"FileTransferData"};o.dataTransfer.setData("text/plain",JSON.stringify(l))},onDrop:async o=>{if(r.value)return;const y=Dn(o);if(!y)return;const C=e.value;if(y.loc===C)return;const w=Qt(),a=async()=>w.pushAction(async()=>{await li(y.path,C),s.value.emit("refresh"),ge.destroyAll()}),l=()=>w.pushAction(async()=>{await Wt(y.path,C),Ee.emit("removeFiles",{paths:y.path,loc:y.loc}),s.value.emit("refresh"),ge.destroyAll()});ge.confirm({title:U("confirm")+"?",width:"60vw",content:()=>{let h,g,_;return A("div",null,[A("div",null,[`${U("moveSelectedFilesTo")} ${C}`,A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[y.path.map(S=>A("li",null,[S.split(/[/\\]/).pop()]))])]),A(Ut,null,null),A("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},class:"actions"},[A(Fe,{onClick:ge.destroyAll},Qe(h=U("cancel"))?h:{default:()=>[h]}),A(Fe,{type:"primary",loading:!w.isIdle,onClick:a},Qe(g=U("copy"))?g:{default:()=>[g]}),A(Fe,{type:"primary",loading:!w.isIdle,onClick:l},Qe(_=U("move"))?_:{default:()=>[_]})])])},maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},multiSelectedIdxs:t,onFileDragEnd:()=>{At.fileDragging=!1}}}function wr({openNext:e}){const i=K(!1),n=K(""),{sortedFiles:t,previewIdx:s,multiSelectedIdxs:r,stack:v,currLocation:d,spinning:p,previewing:b,stackViewEl:o,eventEmitter:y,props:C,deletedFiles:w}=re().toRefs(),a=_e;He("removeFiles",({paths:S,loc:u})=>{a(u)!==a(d.value)||!fe(v.value)||(S.forEach(D=>w.value.add(D)),S.filter(ie).forEach(D=>w.value.add(D.replace(/\.\w+$/,".txt"))))}),He("addFiles",({files:S,loc:u})=>{if(a(u)!==a(d.value))return;const N=fe(v.value);N&&N.files.unshift(...S)});const l=Qt(),h=async(S,u,N)=>{s.value=N,L.fullscreenPreviewInitialUrl=oe(u);const D=r.value.indexOf(N);if(S.shiftKey){if(D!==-1)r.value.splice(D,1);else{r.value.push(N),r.value.sort((B,T)=>B-T);const P=r.value[0],z=r.value[r.value.length-1];r.value=Kt(P,z+1)}S.stopPropagation()}else S.ctrlKey||S.metaKey?(D!==-1?r.value.splice(D,1):r.value.push(N),S.stopPropagation()):await e(u)},g=async(S,u,N)=>{var H,V,ne;const D=oe(u),P=d.value,z={IIB_container_id:parent.IIB_container_id},B=()=>{let $=[];return r.value.includes(N)?$=r.value.map(M=>t.value[M]):$.push(u),$},T=async $=>{if(!p.value)try{p.value=!0,await Ln(u.fullpath),Ie.postMessage({...z,event:"click_hidden_button",btnEleId:"iib_hidden_img_update_trigger"}),await Rn(),Ie.postMessage({...z,event:"click_hidden_button",btnEleId:`iib_hidden_tab_${$}`})}catch(M){console.error(M),te.error("发送图像失败，请携带console的错误消息找开发者")}finally{p.value=!1}},j=`${S.key}`;if(j.startsWith("toggle-tag-")){const $=+j.split("toggle-tag-")[1],{is_remove:M}=await Mn({tag_id:$,img_path:u.fullpath}),Y=(V=(H=L.conf)==null?void 0:H.all_custom_tags.find(m=>m.id===$))==null?void 0:V.name;await je.refreshTags([u.fullpath]),te.success(U(M?"removedTagFromImage":"addedTagToImage",{tag:Y}));return}else if(j.startsWith("batch-add-tag-")||j.startsWith("batch-remove-tag-")){const $=+j.split("-tag-")[1],M=j.includes("add")?"add":"remove",Y=B().map(m=>m.fullpath);await Nn({tag_id:$,img_paths:Y,action:M}),await je.refreshTags(Y),te.success(U(M==="add"?"addCompleted":"removeCompleted"));return}switch(S.key){case"previewInNewWindow":return window.open(D);case"saveSelectedAsJson":return Bn(B());case"openWithDefaultApp":return Qn(u.fullpath);case"download":{const $=B();$n($.map(M=>oe(M,!0)));break}case"copyPreviewUrl":return xe(parent.document.location.origin+D);case"send2txt2img":return T("txt2img");case"send2img2img":return T("img2img");case"send2inpaint":return T("inpaint");case"send2extras":return T("extras");case"send2savedDir":{const $=L.quickMovePaths.find(m=>m.key==="outdir_save");if(!$)return te.error(U("unknownSavedDir"));const M=Fn($.dir,(ne=L.conf)==null?void 0:ne.sd_cwd),Y=B();await Wt(Y.map(m=>m.fullpath),M,!0),Ee.emit("removeFiles",{paths:Y.map(m=>m.fullpath),loc:d.value}),Ee.emit("addFiles",{files:Y,loc:M});break}case"send2controlnet-img2img":case"send2controlnet-txt2img":{const $=S.key.split("-")[1];Ie.postMessage({...z,event:"send_to_control_net",type:$,url:oe(u)});break}case"send2outpaint":{n.value=await l.pushAction(()=>ut(u.fullpath)).res;const[$,M]=(n.value||"").split(`
`);Ie.postMessage({...z,event:"send_to_outpaint",url:oe(u),prompt:$,negPrompt:M.slice(17)});break}case"openWithWalkMode":{Ce.set(P,v.value);const $=L.tabList[C.value.tabIdx],M={type:"local",key:ue(),path:u.fullpath,name:U("local"),stackKey:P,walkModePath:u.fullpath};$.panes.push(M),$.key=M.key;break}case"openInNewTab":{Ce.set(P,v.value);const $=L.tabList[C.value.tabIdx],M={type:"local",key:ue(),path:u.fullpath,name:U("local"),stackKey:P};$.panes.push(M),$.key=M.key;break}case"openOnTheRight":{Ce.set(P,v.value);let $=L.tabList[C.value.tabIdx+1];$||($={panes:[],key:"",id:ue()},L.tabList[C.value.tabIdx+1]=$);const M={type:"local",key:ue(),path:u.fullpath,name:U("local"),stackKey:P};$.panes.push(M),$.key=M.key;break}case"send2BatchDownload":{ss.addFiles(B());break}case"viewGenInfo":{i.value=!0,n.value=await l.pushAction(()=>ut(u.fullpath)).res;break}case"openWithLocalFileBrowser":{await zn(u.fullpath);break}case"deleteFiles":{const $=B(),M=async()=>{const Y=$.map(m=>m.fullpath);await oi(Y),te.success(U("deleteSuccess")),Ee.emit("removeFiles",{paths:Y,loc:d.value})};if($.length===1&&L.ignoredConfirmActions.deleteOneOnly)return M();await new Promise(Y=>{ge.confirm({title:U("confirmDelete"),maskClosable:!0,width:"60vw",content:()=>A("div",null,[A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[$.map(m=>A("li",null,[m.fullpath.split(/[/\\]/).pop()]))]),A(Ut,null,null),A(ai,{checked:L.ignoredConfirmActions.deleteOneOnly,"onUpdate:checked":m=>L.ignoredConfirmActions.deleteOneOnly=m},{default:()=>[U("deleteOneOnlySkipConfirm"),O(" ("),U("resetOnGlobalSettingsPage"),O(")")]})]),async onOk(){await M(),Y()}})});break}}return{}},{isOutside:_}=En(o);return ye("keydown",S=>{var N,D,P;const u=ri(S);if(b.value){const z=(N=Object.entries(L.shortcut).find(B=>B[1]===u&&B[1]))==null?void 0:N[0];if(z){S.stopPropagation(),S.preventDefault();const B=s.value,T=t.value[B];switch(z){case"delete":return oe(T)===L.fullscreenPreviewInitialUrl?te.warn(U("fullscreenRestriction")):g({key:"deleteFiles"},T,B);case"download":return g({key:"download"},T,B);default:{const j=(D=/^toggle_tag_(.*)$/.exec(z))==null?void 0:D[1],H=(P=L.conf)==null?void 0:P.all_custom_tags.find(V=>V.name===j);return H?g({key:`toggle-tag-${H.id}`},T,B):void 0}}}}else!_.value&&["Ctrl + KeyA","Cmd + KeyA"].includes(u)&&(S.preventDefault(),S.stopPropagation(),y.value.emit("selectAll"))}),{onFileItemClick:h,onContextMenuClick:g,showGenInfo:i,imageGenInfo:n,q:l}}const Ar=()=>{const{stackViewEl:e}=re().toRefs(),i=K(-1);return Tn(e,n=>{var s;let t=n.target;for(;t.parentElement;)if(t=t.parentElement,t.tagName.toLowerCase()==="li"&&t.classList.contains("file-item-trigger")){const r=(s=t.dataset)==null?void 0:s.idx;r&&Number.isSafeInteger(+r)&&(i.value=+r);return}}),{showMenuIdx:i}};function as(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var n=e.indexOf("Trident/");if(n>0){var t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}let Te;function Ve(){Ve.init||(Ve.init=!0,Te=as()!==-1)}var Me={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ve(),Lt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Te&&this.$el.appendChild(e),e.data="about:blank",Te||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Te&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const rs=jn();Bt("data-v-b329ee4c");const ls={class:"resize-observer",tabindex:"-1"};xt();const os=rs((e,i,n,t,s,r)=>(f(),J("div",ls)));Me.render=os;Me.__scopeId="data-v-b329ee4c";Me.__file="src/components/ResizeObserver.vue";function Pe(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pe=function(i){return typeof i}:Pe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Pe(e)}function cs(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function It(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function us(e,i,n){return i&&It(e.prototype,i),n&&It(e,n),e}function _t(e){return ds(e)||fs(e)||hs(e)||gs()}function ds(e){if(Array.isArray(e))return Ue(e)}function fs(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hs(e,i){if(e){if(typeof e=="string")return Ue(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,i)}}function Ue(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,t=new Array(i);n<i;n++)t[n]=e[n];return t}function gs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function vs(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t,s,r,v=function(p){for(var b=arguments.length,o=new Array(b>1?b-1:0),y=1;y<b;y++)o[y-1]=arguments[y];if(r=o,!(t&&p===s)){var C=n.leading;typeof C=="function"&&(C=C(p,s)),(!t||p!==s)&&C&&e.apply(void 0,[p].concat(_t(r))),s=p,clearTimeout(t),t=setTimeout(function(){e.apply(void 0,[p].concat(_t(r))),t=0},i)}};return v._clear=function(){clearTimeout(t),t=null},v}function Gt(e,i){if(e===i)return!0;if(Pe(e)==="object"){for(var n in e)if(!Gt(e[n],i[n]))return!1;return!0}return!1}var ms=function(){function e(i,n,t){cs(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(n,t)}return us(e,[{key:"createObserver",value:function(n,t){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ps(n),this.callback=function(d,p){s.options.callback(d,p),d&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},v=r.leading;this.callback=vs(this.callback,this.options.throttle,{leading:function(p){return v==="both"||v==="visible"&&p||v==="hidden"&&!p}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(d){var p=d[0];if(d.length>1){var b=d.find(function(y){return y.isIntersecting});b&&(p=b)}if(s.callback){var o=p.isIntersecting&&p.intersectionRatio>=s.threshold;if(o===s.oldResult)return;s.oldResult=o,s.callback(o,p)}},this.options.intersection),Lt(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function Zt(e,i,n){var t=i.value;if(t)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new ms(e,t,n);e._vue_visibilityState=s}}function ys(e,i,n){var t=i.value,s=i.oldValue;if(!Gt(t,s)){var r=e._vue_visibilityState;if(!t){Xt(e);return}r?r.createObserver(t,n):Zt(e,{value:t},n)}}function Xt(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var bs={beforeMount:Zt,updated:ys,unmounted:Xt},ks={itemsLimit:1e3},Ss=/(auto|scroll)/;function en(e,i){return e.parentNode===null?i:en(e.parentNode,i.concat([e]))}var Be=function(i,n){return getComputedStyle(i,null).getPropertyValue(n)},ws=function(i){return Be(i,"overflow")+Be(i,"overflow-y")+Be(i,"overflow-x")},As=function(i){return Ss.test(ws(i))};function Ct(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=en(e.parentNode,[]),n=0;n<i.length;n+=1)if(As(i[n]))return i[n];return document.scrollingElement||document.documentElement}}function We(e){"@babel/helpers - typeof";return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},We(e)}var Is={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function _s(){return this.items.length&&We(this.items[0])!=="object"}var Je=!1;if(typeof window<"u"){Je=!1;try{var Cs=Object.defineProperty({},"passive",{get:function(){Je=!0}});window.addEventListener("test",null,Cs)}catch{}}let Es=0;var tn={name:"RecycleScroller",components:{ResizeObserver:Me},directives:{ObserveVisibility:bs},props:{...Is,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,n=this.sizeField,t=this.minItemSize;let s=1e4,r=0,v;for(let d=0,p=i.length;d<p;d++)v=i[d][n]||t,v<s&&(s=v),r+=v,e[d]={accumulator:r,size:v};return this.$_computedMinItemSize=s,e}return[]},simpleArray:_s,itemIndexByKey(){const{keyField:e,items:i}=this,n={};for(let t=0,s=i.length;t<s;t++)n[i[t][e]]=t;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,n,t,s){const r=Hn({id:Es++,index:i,used:!0,key:t,type:s}),v=Vn({item:n,position:0,nr:r});return e.push(v),v},unuseView(e,i=!1){const n=this.$_unusedViews,t=e.nr.type;let s=n.get(t);s||(s=[],n.set(t,s)),s.push(e),i||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const i=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});i(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&i()},this.updateInterval))}},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const n=this.itemSize,t=this.gridItems||1,s=this.itemSecondarySize||n,r=this.$_computedMinItemSize,v=this.typeField,d=this.simpleArray?null:this.keyField,p=this.items,b=p.length,o=this.sizes,y=this.$_views,C=this.$_unusedViews,w=this.pool,a=this.itemIndexByKey;let l,h,g,_,S;if(!b)l=h=_=S=g=0;else if(this.$_prerender)l=_=0,h=S=Math.min(this.prerender,p.length),g=null;else{const T=this.getScroll();if(i){let V=T.start-this.$_lastUpdateScrollPosition;if(V<0&&(V=-V),n===null&&V<r||V<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=T.start;const j=this.buffer;T.start-=j,T.end+=j;let H=0;if(this.$refs.before&&(H=this.$refs.before.scrollHeight,T.start-=H),this.$refs.after){const V=this.$refs.after.scrollHeight;T.end+=V}if(n===null){let V,ne=0,$=b-1,M=~~(b/2),Y;do Y=M,V=o[M].accumulator,V<T.start?ne=M:M<b-1&&o[M+1].accumulator>T.start&&($=M),M=~~((ne+$)/2);while(M!==Y);for(M<0&&(M=0),l=M,g=o[b-1].accumulator,h=M;h<b&&o[h].accumulator<T.end;h++);for(h===-1?h=p.length-1:(h++,h>b&&(h=b)),_=l;_<b&&H+o[_].accumulator<T.start;_++);for(S=_;S<b&&H+o[S].accumulator<T.end;S++);}else{l=~~(T.start/n*t);const V=l%t;l-=V,h=Math.ceil(T.end/n*t),_=Math.max(0,Math.floor((T.start-H)/n*t)),S=Math.floor((T.end-H)/n*t),l<0&&(l=0),h>b&&(h=b),_<0&&(_=0),S>b&&(S=b),g=Math.ceil(b/t)*n}}h-l>ks.itemsLimit&&this.itemsLimitError(),this.totalSize=g;let u;const N=l<=this.$_endIndex&&h>=this.$_startIndex;if(N)for(let T=0,j=w.length;T<j;T++)u=w[T],u.nr.used&&(e&&(u.nr.index=a[u.item[d]]),(u.nr.index==null||u.nr.index<l||u.nr.index>=h)&&this.unuseView(u));const D=N?null:new Map;let P,z,B;for(let T=l;T<h;T++){P=p[T];const j=d?P[d]:P;if(j==null)throw new Error(`Key is ${j} on item (keyField is '${d}')`);if(u=y.get(j),!n&&!o[T].size){u&&this.unuseView(u);continue}z=P[v];let H=C.get(z),V=!1;if(!u)N?H&&H.length?u=H.pop():u=this.addView(w,T,P,j,z):(B=D.get(z)||0,(!H||B>=H.length)&&(u=this.addView(w,T,P,j,z),this.unuseView(u,!0),H=C.get(z)),u=H[B],D.set(z,B+1)),y.delete(u.nr.key),u.nr.used=!0,u.nr.index=T,u.nr.key=j,u.nr.type=z,y.set(j,u),V=!0;else if(!u.nr.used&&(u.nr.used=!0,u.nr.index=T,V=!0,H)){const ne=H.indexOf(u);ne!==-1&&H.splice(ne,1)}u.item=P,V&&(T===p.length-1&&this.$emit("scroll-end"),T===0&&this.$emit("scroll-start")),n===null?(u.position=o[T-1].accumulator,u.offset=0):(u.position=Math.floor(T/t)*n,u.offset=T%t*s)}return this.$_startIndex=l,this.$_endIndex=h,this.emitUpdate&&this.$emit("update",l,h,_,S),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:N}},getListenerTarget(){let e=Ct(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,n=i==="vertical";let t;if(this.pageMode){const s=e.getBoundingClientRect(),r=n?s.height:s.width;let v=-(n?s.top:s.left),d=n?window.innerHeight:window.innerWidth;v<0&&(d+=v,v=0),v+d>r&&(d=r-v),t={start:v,end:v+d}}else n?t={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:t={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return t},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Je?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;const n=this.gridItems||1;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=Math.floor(e/n)*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){const i=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,t,s;if(this.pageMode){const r=Ct(this.$el),v=r.tagName==="HTML"?0:r[i.scroll],d=r.getBoundingClientRect(),b=this.$el.getBoundingClientRect()[i.start]-d[i.start];n=r,t=i.scroll,s=e+v+b}else n=this.$el,t=i.scroll,s=e;n[t]=s},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.nr.index-i.nr.index)}}};const Ts={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Ps={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Os(e,i,n,t,s,r){const v=Un("ResizeObserver"),d=Wn("observe-visibility");return Jn((f(),k("div",{class:de(["vue-recycle-scroller",{ready:s.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:i[0]||(i[0]=(...p)=>r.handleScroll&&r.handleScroll(...p))},[e.$slots.before?(f(),k("div",Ts,[we(e.$slots,"before")],512)):E("v-if",!0),(f(),J(dt(n.listTag),{ref:"wrapper",style:Rt({[e.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"}),class:de(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:Q(()=>[(f(!0),k(Z,null,ae(s.pool,p=>(f(),J(dt(n.itemTag),Kn({key:p.nr.id,style:s.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${p.position}px) translate${e.direction==="vertical"?"X":"Y"}(${p.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&s.hoverKey===p.nr.key}]]},qn(n.skipHover?{}:{mouseenter:()=>{s.hoverKey=p.nr.key},mouseleave:()=>{s.hoverKey=null}})),{default:Q(()=>[we(e.$slots,"default",{item:p.item,index:p.nr.index,active:p.nr.used})]),_:2},1040,["style","class"]))),128)),we(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(f(),k("div",Ps,[we(e.$slots,"after")],512)):E("v-if",!0),A(v,{onNotify:r.handleResize},null,8,["onNotify"])],34)),[[d,r.handleVisibilityChange]])}tn.render=Os;tn.__file="src/components/RecycleScroller.vue";const Et=be({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},disableDelete:{type:Boolean},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(e,{emit:i}){const n=e,t=qe(),s=q(()=>{var r;return(((r=t.conf)==null?void 0:r.all_custom_tags)??[]).reduce((v,d)=>[...v,{...d,selected:!!n.selectedTag.find(p=>p.id===d.id)}],[])});return(r,v)=>{const d=jt,p=Yn,b=Gn,o=Ht;return f(),J(o,{onClick:v[0]||(v[0]=y=>i("contextMenuClick",y,r.file,r.idx))},{default:Q(()=>{var y;return[A(d,{key:"deleteFiles",disabled:r.disableDelete},{default:Q(()=>[O(I(r.$t("deleteSelected")),1)]),_:1},8,["disabled"]),A(d,{key:"openWithDefaultApp"},{default:Q(()=>[O(I(r.$t("openWithDefaultApp")),1)]),_:1}),A(d,{key:"saveSelectedAsJson"},{default:Q(()=>[O(I(r.$t("saveSelectedAsJson")),1)]),_:1}),r.file.type==="dir"?(f(),k(Z,{key:0},[A(d,{key:"openInNewTab"},{default:Q(()=>[O(I(r.$t("openInNewTab")),1)]),_:1}),A(d,{key:"openOnTheRight"},{default:Q(()=>[O(I(r.$t("openOnTheRight")),1)]),_:1}),A(d,{key:"openWithWalkMode"},{default:Q(()=>[O(I(r.$t("openWithWalkMode")),1)]),_:1})],64)):E("",!0),r.file.type==="file"?(f(),k(Z,{key:1},[W(Ke)(r.file.name)?(f(),k(Z,{key:0},[A(d,{key:"viewGenInfo"},{default:Q(()=>[O(I(r.$t("viewGenerationInfo")),1)]),_:1}),A(p),((y=W(t).conf)==null?void 0:y.launch_mode)!=="server"?(f(),k(Z,{key:0},[A(d,{key:"send2txt2img"},{default:Q(()=>[O(I(r.$t("sendToTxt2img")),1)]),_:1}),A(d,{key:"send2img2img"},{default:Q(()=>[O(I(r.$t("sendToImg2img")),1)]),_:1}),A(d,{key:"send2inpaint"},{default:Q(()=>[O(I(r.$t("sendToInpaint")),1)]),_:1}),A(d,{key:"send2extras"},{default:Q(()=>[O(I(r.$t("sendToExtraFeatures")),1)]),_:1}),A(b,{key:"sendToThirdPartyExtension",title:r.$t("sendToThirdPartyExtension")},{default:Q(()=>[A(d,{key:"send2controlnet-txt2img"},{default:Q(()=>[O("ControlNet - "+I(r.$t("t2i")),1)]),_:1}),A(d,{key:"send2controlnet-img2img"},{default:Q(()=>[O("ControlNet - "+I(r.$t("i2i")),1)]),_:1}),A(d,{key:"send2outpaint"},{default:Q(()=>[O("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):E("",!0),A(d,{key:"send2BatchDownload"},{default:Q(()=>[O(I(r.$t("sendToBatchDownload")),1)]),_:1}),A(d,{key:"send2savedDir"},{default:Q(()=>[O(I(r.$t("send2savedDir")),1)]),_:1}),A(p),r.isSelectedMutilFiles?(f(),k(Z,{key:1},[A(b,{key:"batch-add-tag",title:r.$t("batchAddTag")},{default:Q(()=>[(f(!0),k(Z,null,ae(s.value,C=>(f(),J(d,{key:`batch-add-tag-${C.id}`},{default:Q(()=>[O(I(C.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),A(b,{key:"batch-remove-tag",title:r.$t("batchRemoveTag")},{default:Q(()=>[(f(!0),k(Z,null,ae(s.value,C=>(f(),J(d,{key:`batch-remove-tag-${C.id}`},{default:Q(()=>[O(I(C.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(f(),J(b,{key:"toggle-tag",title:r.$t("toggleTag")},{default:Q(()=>[(f(!0),k(Z,null,ae(s.value,C=>(f(),J(d,{key:`toggle-tag-${C.id}`},{default:Q(()=>[O(I(C.name)+" ",1),C.selected?(f(),J(W(Jt),{key:0})):(f(),J(W(qt),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),A(d,{key:"openWithLocalFileBrowser"},{default:Q(()=>[O(I(r.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):E("",!0),A(d,{key:"previewInNewWindow"},{default:Q(()=>[O(I(r.$t("previewInNewWindow")),1)]),_:1}),A(d,{key:"download"},{default:Q(()=>[O(I(r.$t("download")),1)]),_:1}),A(d,{key:"copyPreviewUrl"},{default:Q(()=>[O(I(r.$t("copySourceFilePreviewLink")),1)]),_:1})],64)):E("",!0)]}),_:1})}}}),R=e=>(Bt("data-v-8cc303fe"),e=e(),xt(),e),Ds={class:"changeIndicatorWrapper"},Ms={key:0,class:"changeIndicatorsLeft changeIndicators"},Ns={key:0,class:"promptChangeIndicator changeIndicator"},zs={key:1,class:"negpromptChangeIndicator changeIndicator"},Fs={key:2,class:"seedChangeIndicator changeIndicator"},$s={key:3,class:"stepsChangeIndicator changeIndicator"},Qs={key:4,class:"cfgChangeIndicator changeIndicator"},Bs={key:5,class:"sizeChangeIndicator changeIndicator"},xs={key:6,class:"modelChangeIndicator changeIndicator"},Ls={key:7,class:"samplerChangeIndicator changeIndicator"},Rs={key:8,class:"otherChangeIndicator changeIndicator"},js={class:"hoverOverlay"},Hs=R(()=>c("strong",null,"This file",-1)),Vs=R(()=>c("br",null,null,-1)),Us=R(()=>c("br",null,null,-1)),Ws={key:0},Js=R(()=>c("td",null,[c("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Ks={key:1},qs=R(()=>c("td",null,[c("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),Ys={key:2},Gs=R(()=>c("td",null,[c("span",{class:"seedChangeIndicator"},"Seed")],-1)),Zs={key:3},Xs=R(()=>c("td",null,[c("span",{class:"stepsChangeIndicator"},"Steps")],-1)),ea={key:4},ta=R(()=>c("td",null,[c("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),na={key:5},ia=R(()=>c("td",null,[c("span",{class:"sizeChangeIndicator"},"Size")],-1)),sa={key:6},aa=R(()=>c("td",null,[c("span",{class:"modelChangeIndicator"},"Model")],-1)),ra=R(()=>c("br",null,null,-1)),la={key:7},oa=R(()=>c("td",null,[c("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),ca=R(()=>c("br",null,null,-1)),ua=R(()=>c("br",null,null,-1)),da={key:0},fa=R(()=>c("span",{class:"otherChangeIndicator"},"Other",-1)),ha=R(()=>c("br",null,null,-1)),ga=R(()=>c("br",null,null,-1)),pa={key:1,class:"changeIndicatorsRight changeIndicators"},va={key:0,class:"promptChangeIndicator changeIndicator"},ma={key:1,class:"negpromptChangeIndicator changeIndicator"},ya={key:2,class:"seedChangeIndicator changeIndicator"},ba={key:3,class:"stepsChangeIndicator changeIndicator"},ka={key:4,class:"cfgChangeIndicator changeIndicator"},Sa={key:5,class:"sizeChangeIndicator changeIndicator"},wa={key:6,class:"modelChangeIndicator changeIndicator"},Aa={key:7,class:"samplerChangeIndicator changeIndicator"},Ia={key:8,class:"otherChangeIndicator changeIndicator"},_a={class:"hoverOverlay"},Ca=R(()=>c("strong",null,"This file",-1)),Ea=R(()=>c("br",null,null,-1)),Ta=R(()=>c("br",null,null,-1)),Pa={key:0},Oa=R(()=>c("td",null,[c("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Da={key:1},Ma=R(()=>c("td",null,[c("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),Na={key:2},za=R(()=>c("td",null,[c("span",{class:"seedChangeIndicator"},"Seed")],-1)),Fa={key:3},$a=R(()=>c("td",null,[c("span",{class:"stepsChangeIndicator"},"Steps")],-1)),Qa={key:4},Ba=R(()=>c("td",null,[c("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),xa={key:5},La=R(()=>c("td",null,[c("span",{class:"sizeChangeIndicator"},"Size")],-1)),Ra={key:6},ja=R(()=>c("td",null,[c("span",{class:"modelChangeIndicator"},"Model")],-1)),Ha=R(()=>c("br",null,null,-1)),Va={key:7},Ua=R(()=>c("td",null,[c("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Wa=R(()=>c("br",null,null,-1)),Ja=R(()=>c("br",null,null,-1)),Ka={key:0},qa=R(()=>c("span",{class:"otherChangeIndicator"},"Other",-1)),Ya=R(()=>c("br",null,null,-1)),Ga=R(()=>c("br",null,null,-1)),Za=be({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(e){function i(t){const s=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],r=Object.keys(t).filter(v=>!s.includes(v));return Object.fromEntries(r.map(v=>[v,t[v]]))}function n(t){return Object.keys(i(t)).length>0}return(t,s)=>(f(),k("div",Ds,[t.genDiffToPrevious.empty?E("",!0):(f(),k("div",Ms,["prompt"in t.genDiffToPrevious.diff?(f(),k("div",Ns,"P+")):E("",!0),"negativePrompt"in t.genDiffToPrevious.diff?(f(),k("div",zs,"P-")):E("",!0),"seed"in t.genDiffToPrevious.diff?(f(),k("div",Fs,"Se")):E("",!0),"steps"in t.genDiffToPrevious.diff?(f(),k("div",$s,"St")):E("",!0),"cfgScale"in t.genDiffToPrevious.diff?(f(),k("div",Qs,"Cf")):E("",!0),"size"in t.genDiffToPrevious.diff?(f(),k("div",Bs,"Si")):E("",!0),"Model"in t.genDiffToPrevious.diff?(f(),k("div",xs,"Mo")):E("",!0),"Sampler"in t.genDiffToPrevious.diff?(f(),k("div",Ls,"Sa")):E("",!0),n(t.genDiffToPrevious.diff)?(f(),k("div",Rs,"Ot")):E("",!0)])),c("div",js,[c("small",null,[A(W(mt)),Hs,O(" vs "+I(t.genDiffToPrevious.otherFile)+" ",1),Vs,Us,c("table",null,["prompt"in t.genDiffToPrevious.diff?(f(),k("tr",Ws,[Js,c("td",null,I(t.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):E("",!0),"negativePrompt"in t.genDiffToPrevious.diff?(f(),k("tr",Ks,[qs,c("td",null,I(t.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):E("",!0),"seed"in t.genDiffToPrevious.diff?(f(),k("tr",Ys,[Gs,c("td",null,[c("strong",null,I(t.genDiffToPrevious.diff.seed[0]),1),O(" vs "+I(t.genDiffToPrevious.diff.seed[1]),1)])])):E("",!0),"steps"in t.genDiffToPrevious.diff?(f(),k("tr",Zs,[Xs,c("td",null,[c("strong",null,I(t.genDiffToPrevious.diff.steps[0]),1),O(" vs "+I(t.genDiffToPrevious.diff.steps[1]),1)])])):E("",!0),"cfgScale"in t.genDiffToPrevious.diff?(f(),k("tr",ea,[ta,c("td",null,[c("strong",null,I(t.genDiffToPrevious.diff.cfgScale[0]),1),O(" vs "+I(t.genDiffToPrevious.diff.cfgScale[1]),1)])])):E("",!0),"size"in t.genDiffToPrevious.diff?(f(),k("tr",na,[ia,c("td",null,[c("strong",null,I(t.genDiffToPrevious.diff.size[0]),1),O(" vs "+I(t.genDiffToPrevious.diff.size[1]),1)])])):E("",!0),"Model"in t.genDiffToPrevious.diff?(f(),k("tr",sa,[aa,c("td",null,[c("strong",null,I(t.genDiffToPrevious.diff.Model[0]),1),ra,O(" vs "+I(t.genDiffToPrevious.diff.Model[1]),1)])])):E("",!0),"Sampler"in t.genDiffToPrevious.diff?(f(),k("tr",la,[oa,c("td",null,[c("strong",null,I(t.genDiffToPrevious.diff.Sampler[0]),1),ca,O(" vs "+I(t.genDiffToPrevious.diff.Sampler[1]),1)])])):E("",!0)]),ua,n(t.genDiffToPrevious.diff)?(f(),k("div",da,[fa,O(" props that changed:"),ha,ga,c("ul",null,[(f(!0),k(Z,null,ae(i(t.genDiffToPrevious.diff),(r,v)=>(f(),k("li",null,I(v),1))),256))])])):E("",!0)])]),t.genDiffToNext.empty?E("",!0):(f(),k("div",pa,["prompt"in t.genDiffToNext.diff?(f(),k("div",va,"P+")):E("",!0),"negativePrompt"in t.genDiffToNext.diff?(f(),k("div",ma,"P-")):E("",!0),"seed"in t.genDiffToNext.diff?(f(),k("div",ya,"Se")):E("",!0),"steps"in t.genDiffToNext.diff?(f(),k("div",ba,"St")):E("",!0),"cfgScale"in t.genDiffToNext.diff?(f(),k("div",ka,"Cf")):E("",!0),"size"in t.genDiffToNext.diff?(f(),k("div",Sa,"Si")):E("",!0),"Model"in t.genDiffToNext.diff?(f(),k("div",wa,"Mo")):E("",!0),"Sampler"in t.genDiffToNext.diff?(f(),k("div",Aa,"Sa")):E("",!0),n(t.genDiffToNext.diff)?(f(),k("div",Ia,"Ot")):E("",!0)])),c("div",_a,[c("small",null,[A(W(mt)),Ca,O(" vs "+I(t.genDiffToNext.otherFile)+" ",1),Ea,Ta,c("table",null,["prompt"in t.genDiffToNext.diff?(f(),k("tr",Pa,[Oa,c("td",null,I(t.genDiffToNext.diff.prompt)+" tokens changed",1)])):E("",!0),"negativePrompt"in t.genDiffToNext.diff?(f(),k("tr",Da,[Ma,c("td",null,I(t.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):E("",!0),"seed"in t.genDiffToNext.diff?(f(),k("tr",Na,[za,c("td",null,[c("strong",null,I(t.genDiffToNext.diff.seed[0]),1),O(" vs "+I(t.genDiffToNext.diff.seed[1]),1)])])):E("",!0),"steps"in t.genDiffToNext.diff?(f(),k("tr",Fa,[$a,c("td",null,[c("strong",null,I(t.genDiffToNext.diff.steps[0]),1),O(" vs "+I(t.genDiffToNext.diff.steps[1]),1)])])):E("",!0),"cfgScale"in t.genDiffToNext.diff?(f(),k("tr",Qa,[Ba,c("td",null,[c("strong",null,I(t.genDiffToNext.diff.cfgScale[0]),1),O(" vs "+I(t.genDiffToNext.diff.cfgScale[1]),1)])])):E("",!0),"size"in t.genDiffToNext.diff?(f(),k("tr",xa,[La,c("td",null,[c("strong",null,I(t.genDiffToNext.diff.size[0]),1),O(" vs "+I(t.genDiffToNext.diff.size[1]),1)])])):E("",!0),"Model"in t.genDiffToNext.diff?(f(),k("tr",Ra,[ja,c("td",null,[c("strong",null,I(t.genDiffToNext.diff.Model[0]),1),Ha,O(" vs "+I(t.genDiffToNext.diff.Model[1]),1)])])):E("",!0),"Sampler"in t.genDiffToNext.diff?(f(),k("tr",Va,[Ua,c("td",null,[c("strong",null,I(t.genDiffToNext.diff.Sampler[0]),1),Wa,O(" vs "+I(t.genDiffToNext.diff.Sampler[1]),1)])])):E("",!0)]),Ja,n(t.genDiffToNext.diff)?(f(),k("div",Ka,[qa,O(" props that changed:"),Ya,Ga,c("ul",null,[(f(!0),k(Z,null,ae(i(t.genDiffToNext.diff),(r,v)=>(f(),k("li",null,I(v),1))),256))])])):E("",!0)])])]))}});const Xa=Vt(Za,[["__scopeId","data-v-8cc303fe"]]),er=["data-idx"],tr={key:1,class:"more"},nr={class:"float-btn-wrap"},ir={key:1,class:"tags-container"},sr=["urld"],ar={class:"play-icon"},rr=["src"],lr={key:0,class:"tags-container"},or={key:4,class:"preview-icon-wrap"},cr={key:5,class:"profile"},ur={class:"name line-clamp-1"},dr={class:"basic-info"},fr=be({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genDiffToPrevious:{default:()=>({empty:!0,ownFile:"",otherFile:"",diff:""})},genDiffToNext:{default:()=>({empty:!0,ownFile:"",otherFile:"",diff:""})},genInfo:{},enableChangeIndicator:{type:Boolean},extraTags:{}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(e,{emit:i}){const n=e;Zn(o=>({c724a85a:o.$props.cellWidth+"px"}));const t=qe(),s=Nt(),r=q(()=>s.tagMap.get(n.file.fullpath)??[]),v=q(()=>{const o=t.gridThumbnailResolution;return t.enableThumbnail?Xn(n.file,[o,o].join("x")):oe(n.file)}),d=q(()=>{var o;return(((o=t.conf)==null?void 0:o.all_custom_tags)??[]).reduce((y,C)=>[...y,{...C,selected:!!r.value.find(w=>w.id===C.id)}],[])}),p=q(()=>d.value.find(o=>o.type==="custom"&&o.name==="like")),b=()=>{Oe(p.value),i("contextMenuClick",{key:`toggle-tag-${p.value.id}`},n.file,n.idx)};return(o,y)=>{const C=ve,w=jt,a=Ht,l=ii,h=pi;return f(),J(C,{trigger:["contextmenu"],visible:W(t).longPressOpenContextMenu?typeof o.idx=="number"&&o.showMenuIdx===o.idx:void 0,"onUpdate:visible":y[8]||(y[8]=g=>typeof o.idx=="number"&&i("update:showMenuIdx",g?o.idx:-1))},{overlay:Q(()=>[o.enableRightClickMenu?(f(),J(Et,{key:0,file:o.file,idx:o.idx,"selected-tag":r.value,onContextMenuClick:y[7]||(y[7]=(g,_,S)=>i("contextMenuClick",g,_,S)),"is-selected-mutil-files":o.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):E("",!0)]),default:Q(()=>[(f(),k("li",{class:de(["file file-item-trigger grid",{clickable:o.file.type==="dir",selected:o.selected}]),"data-idx":o.idx,key:o.file.name,draggable:"true",onDragstart:y[4]||(y[4]=g=>i("dragstart",g,o.idx)),onDragend:y[5]||(y[5]=g=>i("dragend",g,o.idx)),onClickCapture:y[6]||(y[6]=g=>i("fileItemClick",g,o.file,o.idx))},[c("div",null,[o.enableCloseIcon?(f(),k("div",{key:0,class:"close-icon",onClick:y[0]||(y[0]=g=>i("close-icon-click"))},[A(W(ei))])):E("",!0),o.enableRightClickMenu?(f(),k("div",tr,[A(C,null,{overlay:Q(()=>[A(Et,{file:o.file,idx:o.idx,"selected-tag":r.value,onContextMenuClick:y[1]||(y[1]=(g,_,S)=>i("contextMenuClick",g,_,S)),"is-selected-mutil-files":o.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:Q(()=>[c("div",nr,[A(W(ti))])]),_:1}),o.file.type==="file"?(f(),J(C,{key:0},{overlay:Q(()=>[d.value.length>1?(f(),J(a,{key:0,onClick:y[2]||(y[2]=g=>i("contextMenuClick",g,o.file,o.idx))},{default:Q(()=>[(f(!0),k(Z,null,ae(d.value,g=>(f(),J(w,{key:`toggle-tag-${g.id}`},{default:Q(()=>[O(I(g.name)+" ",1),g.selected?(f(),J(W(Jt),{key:0})):(f(),J(W(qt),{key:1}))]),_:2},1024))),128))]),_:1})):E("",!0)]),default:Q(()=>{var g,_;return[c("div",{class:de(["float-btn-wrap",{"like-selected":(g=p.value)==null?void 0:g.selected}]),onClick:b},[(_=p.value)!=null&&_.selected?(f(),J(W(Wi),{key:0})):(f(),J(W(Yi),{key:1}))],2)]}),_:1})):E("",!0)])):E("",!0),W(ie)(o.file.name)?(f(),k("div",{key:o.file.fullpath,class:de(`idx-${o.idx} item-content`)},[o.enableChangeIndicator?(f(),J(Xa,{key:0,"gen-diff-to-next":o.genDiffToNext,"gen-diff-to-previous":o.genDiffToPrevious},null,8,["gen-diff-to-next","gen-diff-to-previous"])):E("",!0),A(l,{src:v.value,fallback:W(zi),preview:{src:o.fullScreenPreviewImageUrl,onVisibleChange:(g,_)=>i("previewVisibleChange",g,_)}},null,8,["src","fallback","preview"]),r.value&&o.cellWidth>128?(f(),k("div",ir,[(f(!0),k(Z,null,ae(o.extraTags??r.value,g=>(f(),J(h,{key:g.id,color:W(s).getColor(g.name)},{default:Q(()=>[O(I(g.name),1)]),_:2},1032,["color"]))),128))])):E("",!0)],2)):W(ni)(o.file.name)?(f(),k("div",{key:3,class:de(`idx-${o.idx} item-content video`),urld:W(ft)(o.file),style:Rt({"background-image":`url('${W(ft)(o.file)}')`}),onClick:y[3]||(y[3]=g=>W(ci)(o.file))},[c("div",ar,[c("img",{src:W(es),style:{width:"40px",height:"40px"}},null,8,rr)]),r.value&&o.cellWidth>128?(f(),k("div",lr,[(f(!0),k(Z,null,ae(r.value,g=>(f(),J(h,{key:g.id,color:W(s).getColor(g.name)},{default:Q(()=>[O(I(g.name),1)]),_:2},1032,["color"]))),128))])):E("",!0)],14,sr)):(f(),k("div",or,[o.file.type==="file"?(f(),J(W(wi),{key:0,class:"icon center"})):(f(),J(W(Ci),{key:1,class:"icon center"}))])),o.cellWidth>128?(f(),k("div",cr,[c("div",ur,I(o.file.name),1),c("div",dr,[c("div",null,I(o.file.size),1),c("div",null,I(o.file.date),1)])])):E("",!0)])],42,er))]),_:1},8,["visible"])}}});const Ir=Vt(fr,[["__scopeId","data-v-a542ede6"]]);export{Ir as F,Et as _,br as a,kr as b,Sr as c,wr as d,yr as e,Ar as f,tn as g,He as h,ye as i,is as j,Ce as s,re as u};
