import{P as _e,c3 as qt,a as X,d as de,bq as Et,u as Be,c as w,bZ as _t,_ as Gt,V as oe,a0 as he,aj as V,bL as rt,a3 as st,bo as Yt,h as te,c4 as Zt,b as Xt,ay as en,c5 as tn,a2 as lt,bK as nn,c6 as an,c7 as rn,$ as D,b0 as sn,z as ee,aA as ln,a1 as on,ag as ge,c8 as cn,aR as un,c9 as dn,ca as fn,aM as Pt,am as Re,bn as Ot,cb as vn,cc as pn,c2 as ye,cd as hn,ce as mn,R as le,ai as Q,U as gn,cf as Ne,x as R,cg as xt,ch as ot,ci as yn,k as qe,ah as bn,cj as Tt,ar as Y,ck as Ge,l as Pe,aC as Oe,aw as wn,ap as ze,cl as An,cm as ct,an as Bt,bQ as ut,bP as Sn,cn as ke,co as kn,aD as Cn,bO as Nt,cp as In,cq as En,cr as J,cs as ve,t as je,as as dt,ct as ft,c1 as _n,L as ie,J as Pn,bX as vt,al as be,cu as On,bW as xn,cv as Tn,cw as Bn,cx as Nn,at as Mn,au as zn,ax as Mt,o as F,m as W,cy as Fn,cz as $n,cA as Qn,cB as Dn,cC as Ln,a5 as Rn,y as H,cD as we,E as Z,n as z,A as Ye,cE as pt,bG as jn,cF as Vn,B as Hn,N as xe,v as L,r as G,W as Un,cG as Jn,b_ as Wn,M as Kn,cH as qn,cI as Gn,p as se,ae as Yn,cJ as Zn,X as Xn}from"./index-af270b30.js";import{f as ei,h as ti,a as ni,t as ii}from"./db-dbaa937e.js";import{t as Fe,l as ce,g as ai}from"./shortcut-c1bb7547.js";var zt=function(){return{arrow:{type:[Boolean,Object],default:void 0},trigger:{type:[Array,String]},overlay:_e.any,visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},align:{type:Object},getPopupContainer:Function,prefixCls:String,transitionName:String,placement:String,overlayClassName:String,overlayStyle:{type:Object,default:void 0},forceRender:{type:Boolean,default:void 0},mouseEnterDelay:Number,mouseLeaveDelay:Number,openClassName:String,minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:void 0},onVisibleChange:{type:Function},"onUpdate:visible":{type:Function}}},$e=qt(),ri=function(){return X(X({},zt()),{},{type:$e.type,size:String,htmlType:$e.htmlType,href:String,disabled:{type:Boolean,default:void 0},prefixCls:String,icon:_e.any,title:String,loading:$e.loading,onClick:{type:Function}})},si=["type","disabled","loading","htmlType","class","overlay","trigger","align","visible","onVisibleChange","placement","href","title","icon","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","onClick","onUpdate:visible"],li=oe.Group;const Te=de({compatConfig:{MODE:3},name:"ADropdownButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:Et(ri(),{trigger:"hover",placement:"bottomRight",type:"default"}),slots:["icon","leftButton","rightButton","overlay"],setup:function(n,t){var i=t.slots,a=t.attrs,s=t.emit,v=function(p){s("update:visible",p),s("visibleChange",p)},o=Be("dropdown-button",n),d=o.prefixCls,g=o.direction,C=o.getPopupContainer;return function(){var I,p,f=X(X({},n),a),l=f.type,r=l===void 0?"default":l,c=f.disabled,k=f.loading,h=f.htmlType,m=f.class,u=m===void 0?"":m,A=f.overlay,x=A===void 0?(I=i.overlay)===null||I===void 0?void 0:I.call(i):A,O=f.trigger,S=f.align,T=f.visible;f.onVisibleChange;var E=f.placement,B=E===void 0?g.value==="rtl"?"bottomLeft":"bottomRight":E,y=f.href,_=f.title,$=f.icon,b=$===void 0?((p=i.icon)===null||p===void 0?void 0:p.call(i))||w(_t,null,null):$,P=f.mouseEnterDelay,N=f.mouseLeaveDelay,K=f.overlayClassName,j=f.overlayStyle,q=f.destroyPopupOnHide,U=f.onClick;f["onUpdate:visible"];var ae=Gt(f,si),re={align:S,disabled:c,trigger:c?[]:O,placement:B,getPopupContainer:C.value,onVisibleChange:v,mouseEnterDelay:P,mouseLeaveDelay:N,visible:T,overlayClassName:K,overlayStyle:j,destroyPopupOnHide:q},it=w(oe,{type:r,disabled:c,loading:k,onClick:U,htmlType:h,href:y,title:_},{default:i.default}),at=w(oe,{type:r,icon:b},null);return w(li,X(X({},ae),{},{class:he(d.value,u)}),{default:function(){return[i.leftButton?i.leftButton({button:it}):it,w(ue,re,{default:function(){return[i.rightButton?i.rightButton({button:at}):at]},overlay:function(){return x}})]}})}}});var Ft=de({compatConfig:{MODE:3},name:"ADropdown",inheritAttrs:!1,props:Et(zt(),{mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft",trigger:"hover"}),slots:["overlay"],setup:function(n,t){var i=t.slots,a=t.attrs,s=t.emit,v=Be("dropdown",n),o=v.prefixCls,d=v.rootPrefixCls,g=v.direction,C=v.getPopupContainer,I=V(function(){var r=n.placement,c=r===void 0?"":r,k=n.transitionName;return k!==void 0?k:c.indexOf("top")>=0?"".concat(d.value,"-slide-down"):"".concat(d.value,"-slide-up")}),p=function(){var c,k,h,m=n.overlay||((c=i.overlay)===null||c===void 0?void 0:c.call(i)),u=Array.isArray(m)?m[0]:m;if(!u)return null;var A=u.props||{};rt(!A.mode||A.mode==="vertical","Dropdown",'mode="'.concat(A.mode,`" is not supported for Dropdown's Menu.`));var x=A.selectable,O=x===void 0?!1:x,S=A.expandIcon,T=S===void 0?(k=u.children)===null||k===void 0||(h=k.expandIcon)===null||h===void 0?void 0:h.call(k):S,E=typeof T<"u"&&lt(T)?T:w("span",{class:"".concat(o.value,"-menu-submenu-arrow")},[w(nn,{class:"".concat(o.value,"-menu-submenu-arrow-icon")},null)]),B=lt(u)?st(u,{mode:"vertical",selectable:O,expandIcon:function(){return E}}):u;return B},f=V(function(){var r=n.placement;if(!r)return g.value==="rtl"?"bottomRight":"bottomLeft";if(r.includes("Center")){var c=r.slice(0,r.indexOf("Center"));return rt(!r.includes("Center"),"Dropdown","You are using '".concat(r,"' placement in Dropdown, which is deprecated. Try to use '").concat(c,"' instead.")),c}return r}),l=function(c){s("update:visible",c),s("visibleChange",c)};return function(){var r,c,k=n.arrow,h=n.trigger,m=n.disabled,u=n.overlayClassName,A=(r=i.default)===null||r===void 0?void 0:r.call(i)[0],x=st(A,Yt({class:he(A==null||(c=A.props)===null||c===void 0?void 0:c.class,te({},"".concat(o.value,"-rtl"),g.value==="rtl"),"".concat(o.value,"-trigger"))},m?{disabled:m}:{})),O=he(u,te({},"".concat(o.value,"-rtl"),g.value==="rtl")),S=m?[]:h,T;S&&S.indexOf("contextmenu")!==-1&&(T=!0);var E=Zt({arrowPointAtCenter:Xt(k)==="object"&&k.pointAtCenter,autoAdjustOverflow:!0}),B=en(X(X(X({},n),a),{},{builtinPlacements:E,overlayClassName:O,arrow:k,alignPoint:T,prefixCls:o.value,getPopupContainer:C.value,transitionName:I.value,trigger:S,onVisibleChange:l,placement:f.value}),["overlay","onUpdate:visible"]);return w(tn,B,{default:function(){return[x]},overlay:p})}}});Ft.Button=Te;const ue=Ft;var oi=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},ci=de({compatConfig:{MODE:3},name:"ACheckableTag",props:oi(),setup:function(n,t){var i=t.slots,a=t.emit,s=Be("tag",n),v=s.prefixCls,o=function(C){var I=n.checked;a("update:checked",!I),a("change",!I),a("click",C)},d=V(function(){var g;return he(v.value,(g={},te(g,"".concat(v.value,"-checkable"),!0),te(g,"".concat(v.value,"-checkable-checked"),n.checked),g))});return function(){var g;return w("span",{class:d.value,onClick:o},[(g=i.default)===null||g===void 0?void 0:g.call(i)])}}});const Ve=ci;var ui=new RegExp("^(".concat(an.join("|"),")(-inverse)?$")),di=new RegExp("^(".concat(rn.join("|"),")$")),fi=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:_e.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:_e.any}},pe=de({compatConfig:{MODE:3},name:"ATag",props:fi(),slots:["closeIcon","icon"],setup:function(n,t){var i=t.slots,a=t.emit,s=t.attrs,v=Be("tag",n),o=v.prefixCls,d=v.direction,g=D(!0);sn(function(){n.visible!==void 0&&(g.value=n.visible)});var C=function(l){l.stopPropagation(),a("update:visible",!1),a("close",l),!l.defaultPrevented&&n.visible===void 0&&(g.value=!1)},I=V(function(){var f=n.color;return f?ui.test(f)||di.test(f):!1}),p=V(function(){var f;return he(o.value,(f={},te(f,"".concat(o.value,"-").concat(n.color),I.value),te(f,"".concat(o.value,"-has-color"),n.color&&!I.value),te(f,"".concat(o.value,"-hidden"),!g.value),te(f,"".concat(o.value,"-rtl"),d.value==="rtl"),f))});return function(){var f,l,r,c=n.icon,k=c===void 0?(f=i.icon)===null||f===void 0?void 0:f.call(i):c,h=n.color,m=n.closeIcon,u=m===void 0?(l=i.closeIcon)===null||l===void 0?void 0:l.call(i):m,A=n.closable,x=A===void 0?!1:A,O=function(){return x?u?w("span",{class:"".concat(o.value,"-close-icon"),onClick:C},[u]):w(on,{class:"".concat(o.value,"-close-icon"),onClick:C},null):null},S={backgroundColor:h&&!I.value?h:void 0},T=k||null,E=(r=i.default)===null||r===void 0?void 0:r.call(i),B=T?w(ee,null,[T,w("span",null,[E])]):E,y="onClick"in s,_=w("span",{class:p.value,style:S},[B,O()]);return y?w(ln,null,{default:function(){return[_]}}):_}}});pe.CheckableTag=Ve;pe.install=function(e){return e.component(pe.name,pe),e.component(Ve.name,Ve),e};const vi=pe;ue.Button=Te;ue.install=function(e){return e.component(ue.name,ue),e.component(Te.name,Te),e};var pi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const hi=pi;function ht(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){mi(e,a,t[a])})}return e}function mi(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ze=function(n,t){var i=ht({},n,t.attrs);return w(ge,ht({},i,{icon:hi}),null)};Ze.displayName="StarFilled";Ze.inheritAttrs=!1;const gi=Ze;var yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const bi=yi;function mt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){wi(e,a,t[a])})}return e}function wi(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Xe=function(n,t){var i=mt({},n,t.attrs);return w(ge,mt({},i,{icon:bi}),null)};Xe.displayName="FileOutlined";Xe.inheritAttrs=!1;const Ai=Xe;var Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const ki=Si;function gt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Ci(e,a,t[a])})}return e}function Ci(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var et=function(n,t){var i=gt({},n,t.attrs);return w(ge,gt({},i,{icon:ki}),null)};et.displayName="FolderOpenOutlined";et.inheritAttrs=!1;const Ii=et;function Ei(e,n,t){if(!cn(t))return!1;var i=typeof n;return(i=="number"?un(t)&&dn(n,t.length):i=="string"&&n in t)?fn(t[n],e):!1}var _i=Math.ceil,Pi=Math.max;function Oi(e,n,t,i){for(var a=-1,s=Pi(_i((n-e)/(t||1)),0),v=Array(s);s--;)v[i?s:++a]=e,e+=t;return v}function xi(e){return function(n,t,i){return i&&typeof i!="number"&&Ei(n,t,i)&&(t=i=void 0),n=Fe(n),t===void 0?(t=n,n=0):t=Fe(t),i=i===void 0?n<t?1:-1:Fe(i),Oi(n,t,i,e)}}var Ti=xi();const $t=Ti,me=(...e)=>{document.addEventListener(...e),Pt(()=>document.removeEventListener(...e))},Bi="data:image/png;base64,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",Ae=new WeakMap;function Ni(e,n){return{useHookShareState:i=>{const a=pn();Re(a),Ae.has(a)||(Ae.set(a,Ot(e(a,i??(n==null?void 0:n())))),Pt(()=>{Ae.delete(a)}));const s=Ae.get(a);return Re(s),{state:s,toRefs(){return vn(s)}}}}}var Mi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const zi=Mi;function yt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Fi(e,a,t[a])})}return e}function Fi(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var tt=function(n,t){var i=yt({},n,t.attrs);return w(ge,yt({},i,{icon:zi}),null)};tt.displayName="DatabaseOutlined";tt.inheritAttrs=!1;const $i=tt;var Qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const Di=Qi;function bt(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),i.forEach(function(a){Li(e,a,t[a])})}return e}function Li(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var nt=function(n,t){var i=bt({},n,t.attrs);return w(ge,bt({},i,{icon:Di}),null)};nt.displayName="StarOutlined";nt.inheritAttrs=!1;const Ri=nt;const fe=async e=>(await ye.value.get("/files",{params:{folder_path:e}})).data,ji=async e=>(await ye.value.post("/delete_files",{file_paths:e})).data,Qt=async(e,n,t)=>(await ye.value.post("/move_files",{file_paths:e,dest:n,create_dest_folder:t})).data,Vi=async(e,n,t)=>(await ye.value.post("/copy_files",{file_paths:e,dest:n,create_dest_folder:t})).data,Hi=async e=>{await ye.value.post("/mkdirs",{dest_folder:e})};var Dt={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,n){(function(t,i){e.exports=i})(hn,function(){var t={};t.version="0.3.5";var i=t.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(l){var r,c;for(r in l)c=l[r],c!==void 0&&l.hasOwnProperty(r)&&(i[r]=c);return this},t.status=null,t.set=function(l){var r=t.isStarted();l=a(l,i.minimum,1),t.status=l===1?null:l;var c=t.render(!r),k=c.querySelector(i.barSelector),h=i.speed,m=i.easing;return c.offsetWidth,o(function(u){i.positionUsing===""&&(i.positionUsing=t.getPositioningCSS()),d(k,v(l,h,m)),l===1?(d(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout(function(){d(c,{transition:"all "+h+"ms linear",opacity:0}),setTimeout(function(){t.remove(),u()},h)},h)):setTimeout(u,h)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var l=function(){setTimeout(function(){t.status&&(t.trickle(),l())},i.trickleSpeed)};return i.trickle&&l(),this},t.done=function(l){return!l&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(l){var r=t.status;return r?r>1?void 0:(typeof l!="number"&&(r>=0&&r<.2?l=.1:r>=.2&&r<.5?l=.04:r>=.5&&r<.8?l=.02:r>=.8&&r<.99?l=.005:l=0),r=a(r+l,0,.994),t.set(r)):t.start()},t.trickle=function(){return t.inc()},function(){var l=0,r=0;t.promise=function(c){return!c||c.state()==="resolved"?this:(r===0&&t.start(),l++,r++,c.always(function(){r--,r===0?(l=0,t.done()):t.set((l-r)/l)}),this)}}(),t.getElement=function(){var l=t.getParent();if(l){var r=Array.prototype.slice.call(l.querySelectorAll(".nprogress")).filter(function(c){return c.parentElement===l});if(r.length>0)return r[0]}return null},t.getParent=function(){if(i.parent instanceof HTMLElement)return i.parent;if(typeof i.parent=="string")return document.querySelector(i.parent)},t.render=function(l){if(t.isRendered())return t.getElement();C(document.documentElement,"nprogress-busy");var r=document.createElement("div");r.id="nprogress",r.className="nprogress",r.innerHTML=i.template;var c=r.querySelector(i.barSelector),k=l?"-100":s(t.status||0),h=t.getParent(),m;return d(c,{transition:"all 0 linear",transform:"translate3d("+k+"%,0,0)"}),i.showSpinner||(m=r.querySelector(i.spinnerSelector),m&&f(m)),h!=document.body&&C(h,"nprogress-custom-parent"),h.appendChild(r),r},t.remove=function(){t.status=null,I(document.documentElement,"nprogress-busy"),I(t.getParent(),"nprogress-custom-parent");var l=t.getElement();l&&f(l)},t.isRendered=function(){return!!t.getElement()},t.getPositioningCSS=function(){var l=document.body.style,r="WebkitTransform"in l?"Webkit":"MozTransform"in l?"Moz":"msTransform"in l?"ms":"OTransform"in l?"O":"";return r+"Perspective"in l?"translate3d":r+"Transform"in l?"translate":"margin"};function a(l,r,c){return l<r?r:l>c?c:l}function s(l){return(-1+l)*100}function v(l,r,c){var k;return i.positionUsing==="translate3d"?k={transform:"translate3d("+s(l)+"%,0,0)"}:i.positionUsing==="translate"?k={transform:"translate("+s(l)+"%,0)"}:k={"margin-left":s(l)+"%"},k.transition="all "+r+"ms "+c,k}var o=function(){var l=[];function r(){var c=l.shift();c&&c(r)}return function(c){l.push(c),l.length==1&&r()}}(),d=function(){var l=["Webkit","O","Moz","ms"],r={};function c(u){return u.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(A,x){return x.toUpperCase()})}function k(u){var A=document.body.style;if(u in A)return u;for(var x=l.length,O=u.charAt(0).toUpperCase()+u.slice(1),S;x--;)if(S=l[x]+O,S in A)return S;return u}function h(u){return u=c(u),r[u]||(r[u]=k(u))}function m(u,A,x){A=h(A),u.style[A]=x}return function(u,A){var x=arguments,O,S;if(x.length==2)for(O in A)S=A[O],S!==void 0&&A.hasOwnProperty(O)&&m(u,O,S);else m(u,x[1],x[2])}}();function g(l,r){var c=typeof l=="string"?l:p(l);return c.indexOf(" "+r+" ")>=0}function C(l,r){var c=p(l),k=c+r;g(c,r)||(l.className=k.substring(1))}function I(l,r){var c=p(l),k;g(l,r)&&(k=c.replace(" "+r+" "," "),l.className=k.substring(1,k.length-1))}function p(l){return(" "+(l&&l.className||"")+" ").replace(/\s+/gi," ")}function f(l){l&&l.parentNode&&l.parentNode.removeChild(l)}return t})})(Dt);var Ui=Dt.exports;const Ji=mn(Ui),Wi=e=>{const n=D("");return new Promise(t=>{le.confirm({title:Q("inputFolderName"),content:()=>w(gn,{value:n.value,"onUpdate:value":i=>n.value=i},null),async onOk(){if(!n.value)return;const i=Ne(e,n.value);await Hi(i),t()}})})},Lt=()=>w("p",{style:{background:"var(--zp-secondary-background)",padding:"8px",borderLeft:"4px solid var(--primary-color)"}},[R("Tips: "),Q("multiSelectTips")]),wt=["blue","cyan","gold","green","lime","magenta","orange","pink","purple","red","yellow","geekblue","volcano"],Rt=xt("useTagStore",()=>{const e=Ot(new Map),n=async s=>{if(s=s.filter(v=>!e.has(v)),!!s.length)try{s.forEach(o=>e.set(o,[]));const v=await ei(s);for(const o in v)e.set(o,v[o])}catch{s.forEach(v=>e.delete(v))}},t=new Map;return{tagMap:e,getColor:s=>{let v=t.get(s);if(!v){const o=ot.hash.sha256.hash(s),d=parseInt(ot.codec.hex.fromBits(o),16)%wt.length;v=wt[d],t.set(s,v)}return v},fetchImageTags:n,refreshTags:async s=>{s.forEach(v=>e.delete(v)),await n(s)}}}),Ki=xt("useBatchDownloadStore",()=>{const e=D([]);return{selectdFiles:e,addFiles:t=>{e.value=yn([...e.value,...t])}}});function Qe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xn(e)}const De=new Map,M=qe(),qi=Ki(),jt=Rt(),At=bn(),Se=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Ce,useEventListen:He}=Tt(),{useHookShareState:ne}=Ni((e,{images:n})=>{const t=D({tabIdx:-1,paneIdx:-1}),i=V(()=>ce(a.value)),a=D([]),s=V(()=>{var r;return a.value.map(c=>c.curr).slice((r=M.conf)!=null&&r.is_win?1:0)}),v=V(()=>Ne(...s.value)),o=D(M.defaultSortingMethod),d=V(()=>{var m;if(n.value)return n.value;if(!i.value)return[];const r=((m=i.value)==null?void 0:m.files)??[],c=o.value,{walkFiles:k}=i.value,h=u=>M.onlyFoldersAndImages?u.filter(A=>A.type==="dir"||J(A.name)):u;return t.value.walkModePath?k?k.map(u=>ve(h(u),c)).flat():ve(h(r),c):ve(h(r),c)}),g=D([]),C=D(-1),I=D(!0),p=D(!1),f=D(!1),l=()=>{var r,c,k;return(k=(c=(r=M.tabList)==null?void 0:r[t.value.tabIdx])==null?void 0:c.panes)==null?void 0:k[t.value.paneIdx]};return{previewing:f,spinning:p,canLoadNext:I,multiSelectedIdxs:g,previewIdx:C,basePath:s,currLocation:v,currPage:i,stack:a,sortMethod:o,sortedFiles:d,scroller:D(),stackViewEl:D(),props:t,getPane:l,...Tt()}},()=>({images:D()}));function Ma(){const{previewIdx:e,eventEmitter:n,canLoadNext:t,previewing:i,sortedFiles:a,scroller:s,props:v}=ne().toRefs(),{state:o}=ne();let d=null;const g=(f,l)=>{var r;i.value=f,d!=null&&!f&&l&&((r=s.value)==null||r.scrollToItem(d),d=null)},C=()=>{v.value.walkModePath&&!p("next")&&t&&(Y.info(Q("loadingNextFolder")),n.value.emit("loadNextDir",!0))};me("keydown",f=>{var l;if(i.value){let r=e.value;if(["ArrowDown","ArrowRight"].includes(f.key))for(r++;a.value[r]&&!J(a.value[r].name);)r++;else if(["ArrowUp","ArrowLeft"].includes(f.key))for(r--;a.value[r]&&!J(a.value[r].name);)r--;if(J((l=a.value[r])==null?void 0:l.name)??""){e.value=r;const c=s.value;c&&!(r>=c.$_startIndex&&r<=c.$_endIndex)&&(d=r)}C()}});const I=f=>{var r;let l=e.value;if(f==="next")for(l++;a.value[l]&&!J(a.value[l].name);)l++;else if(f==="prev")for(l--;a.value[l]&&!J(a.value[l].name);)l--;if(J((r=a.value[l])==null?void 0:r.name)??""){e.value=l;const c=s.value;c&&!(l>=c.$_startIndex&&l<=c.$_endIndex)&&(d=l)}C()},p=f=>{var r;let l=e.value;if(f==="next")for(l++;a.value[l]&&!J(a.value[l].name);)l++;else if(f==="prev")for(l--;a.value[l]&&!J(a.value[l].name);)l--;return J((r=a.value[l])==null?void 0:r.name)??""};return He("removeFiles",async()=>{var f;i.value&&!o.sortedFiles[e.value]&&(Y.info(Q("manualExitFullScreen"),5),await Ge(500),(f=document.querySelector(".ant-image-preview-operations-operation .anticon-close"))==null||f.click(),e.value=-1)}),{previewIdx:e,onPreviewVisibleChange:g,previewing:i,previewImgMove:I,canPreview:p}}function za(){const e=D(),{scroller:n,stackViewEl:t,stack:i,currPage:a,currLocation:s,sortMethod:v,useEventListen:o,eventEmitter:d,getPane:g,multiSelectedIdxs:C,sortedFiles:I,props:p}=ne().toRefs();Pe(()=>i.value.length,Oe((b,P)=>{var N;b!==P&&((N=n.value)==null||N.scrollToItem(0))},300));const f=async b=>{if(await h(b),p.value.walkModePath){await Ge();const[P]=ve(a.value.files,v.value).filter(N=>N.type==="dir");P&&await h(P.fullpath),await d.value.emit("loadNextDir")}};wn(async()=>{var b;if(!i.value.length){const P=await fe("/");i.value.push({files:P.files,curr:"/"})}e.value=new Ji,e.value.configure({parent:t.value}),p.value.path&&p.value.path!=="/"?await f(p.value.walkModePath??p.value.path):(b=M.conf)!=null&&b.home&&h(M.conf.home)}),Pe(s,Oe(b=>{const P=g.value();if(!P)return;P.path=b;const N=P.path.split("/").pop(),j=(()=>{var q;if(!p.value.walkModePath){const U=ke(b);for(const[ae,re]of Object.entries(M.pathAliasMap))if(U.startsWith(re))return U.replace(re,ae);return N}return"Walk: "+(((q=M.quickMovePaths.find(U=>U.dir===P.walkModePath))==null?void 0:q.zh)??N)})();P.name=ze("div",{style:"display:flex;align-items:center"},[ze($i),ze("span",{class:"line-clamp-1",style:"max-width: 256px"},j)]),P.nameFallbackStr=j,M.recent=M.recent.filter(q=>q.key!==P.key),M.recent.unshift({path:b,key:P.key}),M.recent.length>20&&(M.recent=M.recent.slice(0,20))},300));const l=()=>je(s.value),r=async b=>{var P,N;if(b.type==="dir")try{(P=e.value)==null||P.start();const{files:K}=await fe(b.fullpath);i.value.push({files:K,curr:b.name})}finally{(N=e.value)==null||N.done()}},c=b=>{for(;b<i.value.length-1;)i.value.pop()},k=(b,P)=>(Re(M.conf,"global.conf load failed"),M.conf.is_win?b.toLowerCase()==P.toLowerCase():b==P),h=async b=>{var N,K;const P=i.value.slice();try{An(b)||(b=Ne(((N=M.conf)==null?void 0:N.sd_cwd)??"/",b));const j=ct(b),q=i.value.map(U=>U.curr);for(q.shift();q[0]&&j[0]&&k(q[0],j[0]);)q.shift(),j.shift();for(let U=0;U<q.length;U++)i.value.pop();if(!j.length)return m();for(const U of j){const ae=(K=a.value)==null?void 0:K.files.find(re=>k(re.name,U));if(!ae)throw console.error({frags:j,frag:U,stack:Bt(i.value)}),new Error(`${U} not found`);await r(ae)}}catch(j){throw Y.error(Q("moveFailedCheckPath")+(j instanceof Error?j.message:"")),console.error(b,ct(b),a.value),i.value=P,j}},m=ut(async()=>{var b,P,N;try{if((b=e.value)==null||b.start(),p.value.walkModePath)c(0),await f(p.value.walkModePath);else{const{files:K}=await fe(i.value.length===1?"/":s.value);ce(i.value).files=K}(P=n.value)==null||P.scrollToItem(0),Y.success(Q("refreshCompleted"))}finally{(N=e.value)==null||N.done()}});Sn("returnToIIB",ut(async()=>{var b,P;if(!p.value.walkModePath)try{(b=e.value)==null||b.start();const{files:N}=await fe(i.value.length===1?"/":s.value);ce(i.value).files.map(j=>j.date).join()!==N.map(j=>j.date).join()&&(ce(i.value).files=N,Y.success(Q("autoUpdate")))}finally{(P=e.value)==null||P.done()}})),o.value("refresh",m);const u=b=>{p.value.walkModePath&&(g.value().walkModePath=b),f(b)},A=V(()=>M.quickMovePaths.map(b=>({...b,path:ke(b.dir)}))),x=V(()=>{const b=ke(s.value);return A.value.find(N=>N.path===b)}),O=async()=>{const b=x.value;if(b){if(!b.can_delete)return;await ti(s.value),Y.success(Q("removeComplete"))}else await ni(s.value),Y.success(Q("addComplete"));dt.emit("searchIndexExpired"),dt.emit("updateGlobalSetting")},S=D(!1),T=D(s.value),E=()=>{S.value=!0,T.value=s.value},B=async()=>{await h(T.value),S.value=!1};me("click",()=>{S.value=!1});const y=()=>{const b=parent.location,P=b.href.substring(0,b.href.length-b.search.length),N=new URLSearchParams(b.search);N.set("action","open"),N.set("path",s.value);const K=`${P}?${N.toString()}`;je(K,Q("copyLocationUrlSuccessMsg"))},_=()=>{console.log(`select all 0 -> ${I.value.length}`),C.value=$t(0,I.value.length)};return o.value("selectAll",_),{locInputValue:T,isLocationEditing:S,onLocEditEnter:B,onEditBtnClick:E,addToSearchScanPathAndQuickMove:O,searchPathInfo:x,refresh:m,copyLocation:l,back:c,openNext:r,currPage:a,currLocation:s,to:h,stack:i,scroller:n,share:y,selectAll:_,quickMoveTo:u,onCreateFloderBtnClick:async()=>{await Wi(s.value),await m()}}}function Fa(){const{scroller:e,sortedFiles:n,stack:t,sortMethod:i,currLocation:a,currPage:s,stackViewEl:v,canLoadNext:o,previewIdx:d,props:g}=ne().toRefs(),{state:C}=ne(),I=D(!1),p=D(M.defaultGridCellWidth),f=V(()=>p.value+16),l=44,{width:r}=kn(v),c=V(()=>~~(r.value/f.value)),k=V(()=>{const O=f.value;return{first:O+(p.value<=160?0:l),second:O}}),h=D(!1),m=async()=>{var O;if(!(h.value||!g.value.walkModePath||!o.value))try{h.value=!0;const S=t.value[t.value.length-2],T=ve(S.files,i.value),E=T.findIndex(B=>{var y;return B.name===((y=s.value)==null?void 0:y.curr)});if(E!==-1){const B=T[E+1],y=Ne(a.value,"../",B.name),_=await fe(y),$=s.value;$.curr=B.name,$.walkFiles||($.walkFiles=[$.files]),$.walkFiles.push(_.files),console.log("curr page files length",(O=s.value)==null?void 0:O.files.length)}}catch(S){console.error("loadNextDir",S),o.value=!1}finally{h.value=!1}},u=async(O=!1)=>{const S=e.value,T=()=>O?d.value:(S==null?void 0:S.$_endIndex)??0;for(;!n.value.length||T()>n.value.length-20&&o.value;)await Ge(100),await m()};C.useEventListen("loadNextDir",u);const A=()=>{const O=e.value;if(O){const S=n.value.slice(Math.max(O.$_startIndex-10,0),O.$_endIndex+10).filter(T=>T.is_under_scanned_path&&J(T.name)).map(T=>T.fullpath);jt.fetchImageTags(S)}};Pe(a,Oe(A,150));const x=Oe(()=>{u(),A()},300);return{gridItems:c,sortedFiles:n,sortMethodConv:Cn,moreActionsDropdownShow:I,gridSize:f,sortMethod:i,onScroll:x,loadNextDir:m,loadNextDirLoading:h,canLoadNext:o,itemSize:k,cellWidth:p,onViewedImagesChange:A}}function $a(){const{currLocation:e,sortedFiles:n,currPage:t,multiSelectedIdxs:i,eventEmitter:a}=ne().toRefs(),s=()=>{i.value=[]};return me("click",s),me("blur",s),Pe(t,s),{onFileDragStart:(g,C)=>{const I=Bt(n.value[C]);At.fileDragging=!0,console.log("onFileDragStart set drag file ",g,C,I);const p=[I];let f=I.type==="dir";if(i.value.includes(C)){const r=i.value.map(c=>n.value[c]);p.push(...r),f=r.some(c=>c.type==="dir")}const l={includeDir:f,loc:e.value||"search-result",path:ft(p,"fullpath").map(r=>r.fullpath),nodes:ft(p,"fullpath"),__id:"FileTransferData"};g.dataTransfer.setData("text/plain",JSON.stringify(l))},onDrop:async g=>{const C=_n(g);if(!C)return;const I=e.value;if(C.loc===I)return;const p=Nt(),f=async()=>p.pushAction(async()=>{await Vi(C.path,I),a.value.emit("refresh"),le.destroyAll()}),l=()=>p.pushAction(async()=>{await Qt(C.path,I),Ce.emit("removeFiles",{paths:C.path,loc:C.loc}),a.value.emit("refresh"),le.destroyAll()});le.confirm({title:Q("confirm")+"?",width:"60vw",content:()=>{let r,c,k;return w("div",null,[w("div",null,[`${Q("moveSelectedFilesTo")} ${I}`,w("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[C.path.map(h=>w("li",null,[h.split(/[/\\]/).pop()]))])]),w(Lt,null,null),w("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},class:"actions"},[w(oe,{onClick:le.destroyAll},Qe(r=Q("cancel"))?r:{default:()=>[r]}),w(oe,{type:"primary",loading:!p.isIdle,onClick:f},Qe(c=Q("copy"))?c:{default:()=>[c]}),w(oe,{type:"primary",loading:!p.isIdle,onClick:l},Qe(k=Q("move"))?k:{default:()=>[k]})])])},maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},multiSelectedIdxs:i,onFileDragEnd:()=>{At.fileDragging=!1}}}function Qa({openNext:e}){const n=D(!1),t=D(""),{sortedFiles:i,previewIdx:a,multiSelectedIdxs:s,stack:v,currLocation:o,spinning:d,previewing:g,stackViewEl:C,eventEmitter:I,props:p}=ne().toRefs(),f=ke;He("removeFiles",({paths:h,loc:m})=>{if(f(m)!==f(o.value))return;const u=ce(v.value);u&&(u.files=u.files.filter(A=>!h.includes(A.fullpath)),u.walkFiles&&(u.walkFiles=u.walkFiles.map(A=>A.filter(x=>!h.includes(x.fullpath)))))}),He("addFiles",({files:h,loc:m})=>{if(f(m)!==f(o.value))return;const u=ce(v.value);u&&u.files.unshift(...h)});const l=Nt(),r=async(h,m,u)=>{a.value=u,M.fullscreenPreviewInitialUrl=ie(m);const A=s.value.indexOf(u);if(h.shiftKey){if(A!==-1)s.value.splice(A,1);else{s.value.push(u),s.value.sort((S,T)=>S-T);const x=s.value[0],O=s.value[s.value.length-1];s.value=$t(x,O+1)}h.stopPropagation()}else h.ctrlKey||h.metaKey?(A!==-1?s.value.splice(A,1):s.value.push(u),h.stopPropagation()):await e(m)},c=async(h,m,u)=>{var T,E,B;const A=ie(m),x=o.value,O=()=>{let y=[];return s.value.includes(u)?y=s.value.map(_=>i.value[_]):y.push(m),y},S=async y=>{if(!d.value)try{d.value=!0,await Tn(m.fullpath),Se.postMessage(JSON.stringify({event:"click_hidden_button",btnEleId:"iib_hidden_img_update_trigger"}));const _=setTimeout(()=>Bn.warn({message:Q("long_loading"),duration:20}),5e3);await Nn(),clearTimeout(_),Se.postMessage(JSON.stringify({event:"click_hidden_button",btnEleId:`iib_hidden_tab_${y}`}))}catch(_){console.error(_),Y.error("发送图像失败，请携带console的错误消息找开发者")}finally{d.value=!1}};if(`${h.key}`.startsWith("toggle-tag-")){const y=+`${h.key}`.split("toggle-tag-")[1],{is_remove:_}=await ii({tag_id:y,img_path:m.fullpath}),$=(E=(T=M.conf)==null?void 0:T.all_custom_tags.find(b=>b.id===y))==null?void 0:E.name;jt.refreshTags([m.fullpath]),Y.success(Q(_?"removedTagFromImage":"addedTagToImage",{tag:$}));return}switch(h.key){case"previewInNewWindow":return window.open(A);case"download":return window.open(ie(m,!0));case"copyPreviewUrl":return je(parent.document.location.origin+A);case"send2txt2img":return S("txt2img");case"send2img2img":return S("img2img");case"send2inpaint":return S("inpaint");case"send2extras":return S("extras");case"send2savedDir":{const y=M.quickMovePaths.find(b=>b.key==="outdir_save");if(!y)return Y.error(Q("unknownSavedDir"));const _=On(y.dir,(B=M.conf)==null?void 0:B.sd_cwd),$=O();await Qt($.map(b=>b.fullpath),_,!0),Ce.emit("removeFiles",{paths:$.map(b=>b.fullpath),loc:o.value}),Ce.emit("addFiles",{files:$,loc:_});break}case"send2controlnet-img2img":case"send2controlnet-txt2img":{const y=h.key.split("-")[1];Se.postMessage(JSON.stringify({event:"send_to_control_net",type:y,url:ie(m)}));break}case"send2outpaint":{t.value=await l.pushAction(()=>vt(m.fullpath)).res;const[y,_]=(t.value||"").split(`
`);Se.postMessage(JSON.stringify({event:"send_to_outpaint",url:ie(m),prompt:y,negPrompt:_.slice(17)}));break}case"openWithWalkMode":{De.set(x,v.value);const y=M.tabList[p.value.tabIdx],_={type:"local",key:be(),path:m.fullpath,name:Q("local"),stackKey:x,walkModePath:m.fullpath};y.panes.push(_),y.key=_.key;break}case"openInNewTab":{De.set(x,v.value);const y=M.tabList[p.value.tabIdx],_={type:"local",key:be(),path:m.fullpath,name:Q("local"),stackKey:x};y.panes.push(_),y.key=_.key;break}case"openOnTheRight":{De.set(x,v.value);let y=M.tabList[p.value.tabIdx+1];y||(y={panes:[],key:"",id:be()},M.tabList[p.value.tabIdx+1]=y);const _={type:"local",key:be(),path:m.fullpath,name:Q("local"),stackKey:x};y.panes.push(_),y.key=_.key;break}case"send2BatchDownload":{qi.addFiles(O());break}case"viewGenInfo":{n.value=!0,t.value=await l.pushAction(()=>vt(m.fullpath)).res;break}case"openWithLocalFileBrowser":{await Pn(m.fullpath);break}case"deleteFiles":{const y=O();await new Promise(_=>{le.confirm({title:Q("confirmDelete"),maskClosable:!0,width:"60vw",content:w("div",null,[w("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[y.map($=>w("li",null,[$.fullpath.split(/[/\\]/).pop()]))]),w(Lt,null,null)]),async onOk(){const $=y.map(b=>b.fullpath);await ji($),Y.success(Q("deleteSuccess")),Ce.emit("removeFiles",{paths:$,loc:o.value}),_()}})});break}}return{}},{isOutside:k}=In(C);return me("keydown",h=>{var u,A,x;const m=ai(h);if(g.value){const O=(u=Object.entries(M.shortcut).find(S=>S[1]===m&&S[1]))==null?void 0:u[0];if(O){h.stopPropagation(),h.preventDefault();const S=a.value,T=i.value[S];switch(O){case"delete":return ie(T)===M.fullscreenPreviewInitialUrl?Y.warn(Q("fullscreenRestriction")):c({key:"deleteFiles"},T,S);default:{const E=(A=/^toggle_tag_(.*)$/.exec(O))==null?void 0:A[1],B=(x=M.conf)==null?void 0:x.all_custom_tags.find(y=>y.name===E);return B?c({key:`toggle-tag-${B.id}`},T,S):void 0}}}}else!k.value&&["Ctrl + KeyA","Cmd + KeyA"].includes(m)&&(h.preventDefault(),h.stopPropagation(),I.value.emit("selectAll"))}),{onFileItemClick:r,onContextMenuClick:c,showGenInfo:n,imageGenInfo:t,q:l}}const Da=()=>{const{stackViewEl:e}=ne().toRefs(),n=D(-1);return En(e,t=>{var a;let i=t.target;for(;i.parentElement;)if(i=i.parentElement,i.tagName.toLowerCase()==="li"&&i.classList.contains("file-item-trigger")){const s=(a=i.dataset)==null?void 0:a.idx;s&&Number.isSafeInteger(+s)&&(n.value=+s);return}}),{showMenuIdx:n}};function Gi(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);var t=e.indexOf("Trident/");if(t>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var a=e.indexOf("Edge/");return a>0?parseInt(e.substring(a+5,e.indexOf(".",a)),10):-1}let Ie;function Ue(){Ue.init||(Ue.init=!0,Ie=Gi()!==-1)}var Me={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ue(),Mt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Ie&&this.$el.appendChild(e),e.data="about:blank",Ie||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Ie&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const Yi=Fn();Mn("data-v-b329ee4c");const Zi={class:"resize-observer",tabindex:"-1"};zn();const Xi=Yi((e,n,t,i,a,s)=>(F(),W("div",Zi)));Me.render=Xi;Me.__scopeId="data-v-b329ee4c";Me.__file="src/components/ResizeObserver.vue";function Ee(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ee=function(n){return typeof n}:Ee=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ee(e)}function ea(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function St(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ta(e,n,t){return n&&St(e.prototype,n),t&&St(e,t),e}function kt(e){return na(e)||ia(e)||aa(e)||ra()}function na(e){if(Array.isArray(e))return Je(e)}function ia(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function aa(e,n){if(e){if(typeof e=="string")return Je(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Je(e,n)}}function Je(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function ra(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sa(e){var n;return typeof e=="function"?n={callback:e}:n=e,n}function la(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,a,s,v=function(d){for(var g=arguments.length,C=new Array(g>1?g-1:0),I=1;I<g;I++)C[I-1]=arguments[I];if(s=C,!(i&&d===a)){var p=t.leading;typeof p=="function"&&(p=p(d,a)),(!i||d!==a)&&p&&e.apply(void 0,[d].concat(kt(s))),a=d,clearTimeout(i),i=setTimeout(function(){e.apply(void 0,[d].concat(kt(s))),i=0},n)}};return v._clear=function(){clearTimeout(i),i=null},v}function Vt(e,n){if(e===n)return!0;if(Ee(e)==="object"){for(var t in e)if(!Vt(e[t],n[t]))return!1;return!0}return!1}var oa=function(){function e(n,t,i){ea(this,e),this.el=n,this.observer=null,this.frozen=!1,this.createObserver(t,i)}return ta(e,[{key:"createObserver",value:function(t,i){var a=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=sa(t),this.callback=function(o,d){a.options.callback(o,d),o&&a.options.once&&(a.frozen=!0,a.destroyObserver())},this.callback&&this.options.throttle){var s=this.options.throttleOptions||{},v=s.leading;this.callback=la(this.callback,this.options.throttle,{leading:function(d){return v==="both"||v==="visible"&&d||v==="hidden"&&!d}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(o){var d=o[0];if(o.length>1){var g=o.find(function(I){return I.isIntersecting});g&&(d=g)}if(a.callback){var C=d.isIntersecting&&d.intersectionRatio>=a.threshold;if(C===a.oldResult)return;a.oldResult=C,a.callback(C,d)}},this.options.intersection),Mt(function(){a.observer&&a.observer.observe(a.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function Ht(e,n,t){var i=n.value;if(i)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new oa(e,i,t);e._vue_visibilityState=a}}function ca(e,n,t){var i=n.value,a=n.oldValue;if(!Vt(i,a)){var s=e._vue_visibilityState;if(!i){Ut(e);return}s?s.createObserver(i,t):Ht(e,{value:i},t)}}function Ut(e){var n=e._vue_visibilityState;n&&(n.destroyObserver(),delete e._vue_visibilityState)}var ua={beforeMount:Ht,updated:ca,unmounted:Ut},da={itemsLimit:1e3},fa=/(auto|scroll)/;function Jt(e,n){return e.parentNode===null?n:Jt(e.parentNode,n.concat([e]))}var Le=function(n,t){return getComputedStyle(n,null).getPropertyValue(t)},va=function(n){return Le(n,"overflow")+Le(n,"overflow-y")+Le(n,"overflow-x")},pa=function(n){return fa.test(va(n))};function Ct(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=Jt(e.parentNode,[]),t=0;t<n.length;t+=1)if(pa(n[t]))return n[t];return document.scrollingElement||document.documentElement}}function We(e){"@babel/helpers - typeof";return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},We(e)}var ha={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(n){return["vertical","horizontal"].includes(n)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function ma(){return this.items.length&&We(this.items[0])!=="object"}var Ke=!1;if(typeof window<"u"){Ke=!1;try{var ga=Object.defineProperty({},"passive",{get:function(){Ke=!0}});window.addEventListener("test",null,ga)}catch{}}let ya=0;var Wt={name:"RecycleScroller",components:{ResizeObserver:Me},directives:{ObserveVisibility:ua},props:{...ha,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},n=this.items,t=this.sizeField,i=this.minItemSize;let a=1e4,s=0,v;for(let o=0,d=n.length;o<d;o++)v=n[o][t]||i,v<a&&(a=v),s+=v,e[o]={accumulator:s,size:v};return this.$_computedMinItemSize=a,e}return[]},simpleArray:ma,itemIndexByKey(){const{keyField:e,items:n}=this,t={};for(let i=0,a=n.length;i<a;i++)t[n[i][e]]=i;return t}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,n,t,i,a){const s=$n({id:ya++,index:n,used:!0,key:i,type:a}),v=Qn({item:t,position:0,nr:s});return e.push(v),v},unuseView(e,n=!1){const t=this.$_unusedViews,i=e.nr.type;let a=t.get(i);a||(a=[],t.set(i,a)),a.push(e),n||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const n=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:t}=this.updateVisibleItems(!1,!0);t||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});n(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&n()},this.updateInterval))}},handleVisibilityChange(e,n){this.ready&&(e||n.boundingClientRect.width!==0||n.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,n=!1){const t=this.itemSize,i=this.gridItems||1,a=this.itemSecondarySize||t,s=this.$_computedMinItemSize,v=this.typeField,o=this.simpleArray?null:this.keyField,d=this.items,g=d.length,C=this.sizes,I=this.$_views,p=this.$_unusedViews,f=this.pool,l=this.itemIndexByKey;let r,c,k,h,m;if(!g)r=c=h=m=k=0;else if(this.$_prerender)r=h=0,c=m=Math.min(this.prerender,d.length),k=null;else{const E=this.getScroll();if(n){let _=E.start-this.$_lastUpdateScrollPosition;if(_<0&&(_=-_),t===null&&_<s||_<t)return{continuous:!0}}this.$_lastUpdateScrollPosition=E.start;const B=this.buffer;E.start-=B,E.end+=B;let y=0;if(this.$refs.before&&(y=this.$refs.before.scrollHeight,E.start-=y),this.$refs.after){const _=this.$refs.after.scrollHeight;E.end+=_}if(t===null){let _,$=0,b=g-1,P=~~(g/2),N;do N=P,_=C[P].accumulator,_<E.start?$=P:P<g-1&&C[P+1].accumulator>E.start&&(b=P),P=~~(($+b)/2);while(P!==N);for(P<0&&(P=0),r=P,k=C[g-1].accumulator,c=P;c<g&&C[c].accumulator<E.end;c++);for(c===-1?c=d.length-1:(c++,c>g&&(c=g)),h=r;h<g&&y+C[h].accumulator<E.start;h++);for(m=h;m<g&&y+C[m].accumulator<E.end;m++);}else{r=~~(E.start/t*i);const _=r%i;r-=_,c=Math.ceil(E.end/t*i),h=Math.max(0,Math.floor((E.start-y)/t*i)),m=Math.floor((E.end-y)/t*i),r<0&&(r=0),c>g&&(c=g),h<0&&(h=0),m>g&&(m=g),k=Math.ceil(g/i)*t}}c-r>da.itemsLimit&&this.itemsLimitError(),this.totalSize=k;let u;const A=r<=this.$_endIndex&&c>=this.$_startIndex;if(A)for(let E=0,B=f.length;E<B;E++)u=f[E],u.nr.used&&(e&&(u.nr.index=l[u.item[o]]),(u.nr.index==null||u.nr.index<r||u.nr.index>=c)&&this.unuseView(u));const x=A?null:new Map;let O,S,T;for(let E=r;E<c;E++){O=d[E];const B=o?O[o]:O;if(B==null)throw new Error(`Key is ${B} on item (keyField is '${o}')`);if(u=I.get(B),!t&&!C[E].size){u&&this.unuseView(u);continue}S=O[v];let y=p.get(S),_=!1;if(!u)A?y&&y.length?u=y.pop():u=this.addView(f,E,O,B,S):(T=x.get(S)||0,(!y||T>=y.length)&&(u=this.addView(f,E,O,B,S),this.unuseView(u,!0),y=p.get(S)),u=y[T],x.set(S,T+1)),I.delete(u.nr.key),u.nr.used=!0,u.nr.index=E,u.nr.key=B,u.nr.type=S,I.set(B,u),_=!0;else if(!u.nr.used&&(u.nr.used=!0,u.nr.index=E,_=!0,y)){const $=y.indexOf(u);$!==-1&&y.splice($,1)}u.item=O,_&&(E===d.length-1&&this.$emit("scroll-end"),E===0&&this.$emit("scroll-start")),t===null?(u.position=C[E-1].accumulator,u.offset=0):(u.position=Math.floor(E/i)*t,u.offset=E%i*a)}return this.$_startIndex=r,this.$_endIndex=c,this.emitUpdate&&this.$emit("update",r,c,h,m),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:A}},getListenerTarget(){let e=Ct(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:n}=this,t=n==="vertical";let i;if(this.pageMode){const a=e.getBoundingClientRect(),s=t?a.height:a.width;let v=-(t?a.top:a.left),o=t?window.innerHeight:window.innerWidth;v<0&&(o+=v,v=0),v+o>s&&(o=s-v),i={start:v,end:v+o}}else t?i={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:i={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return i},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Ke?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let n;const t=this.gridItems||1;this.itemSize===null?n=e>0?this.sizes[e-1].accumulator:0:n=Math.floor(e/t)*this.itemSize,this.scrollToPosition(n)},scrollToPosition(e){const n=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let t,i,a;if(this.pageMode){const s=Ct(this.$el),v=s.tagName==="HTML"?0:s[n.scroll],o=s.getBoundingClientRect(),g=this.$el.getBoundingClientRect()[n.start]-o[n.start];t=s,i=n.scroll,a=e+v+g}else t=this.$el,i=n.scroll,a=e;t[i]=a},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,n)=>e.nr.index-n.nr.index)}}};const ba={key:0,ref:"before",class:"vue-recycle-scroller__slot"},wa={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Aa(e,n,t,i,a,s){const v=Dn("ResizeObserver"),o=Ln("observe-visibility");return Rn((F(),H("div",{class:xe(["vue-recycle-scroller",{ready:a.ready,"page-mode":t.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:n[0]||(n[0]=(...d)=>s.handleScroll&&s.handleScroll(...d))},[e.$slots.before?(F(),H("div",ba,[we(e.$slots,"before")],512)):Z("v-if",!0),(F(),W(pt(t.listTag),{ref:"wrapper",style:Hn({[e.direction==="vertical"?"minHeight":"minWidth"]:a.totalSize+"px"}),class:xe(["vue-recycle-scroller__item-wrapper",t.listClass])},{default:z(()=>[(F(!0),H(ee,null,Ye(a.pool,d=>(F(),W(pt(t.itemTag),jn({key:d.nr.id,style:a.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${d.position}px) translate${e.direction==="vertical"?"X":"Y"}(${d.offset}px)`,width:t.gridItems?`${e.direction==="vertical"&&t.itemSecondarySize||t.itemSize}px`:void 0,height:t.gridItems?`${e.direction==="horizontal"&&t.itemSecondarySize||t.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[t.itemClass,{hover:!t.skipHover&&a.hoverKey===d.nr.key}]]},Vn(t.skipHover?{}:{mouseenter:()=>{a.hoverKey=d.nr.key},mouseleave:()=>{a.hoverKey=null}})),{default:z(()=>[we(e.$slots,"default",{item:d.item,index:d.nr.index,active:d.nr.used})]),_:2},1040,["style","class"]))),128)),we(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(F(),H("div",wa,[we(e.$slots,"after")],512)):Z("v-if",!0),w(v,{onNotify:s.handleResize},null,8,["onNotify"])],34)),[[o,s.handleVisibilityChange]])}Wt.render=Aa;Wt.__file="src/components/RecycleScroller.vue";const It=de({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},disableDelete:{type:Boolean}},emits:["contextMenuClick"],setup(e,{emit:n}){const t=e,i=qe(),a=V(()=>{var s;return(((s=i.conf)==null?void 0:s.all_custom_tags)??[]).reduce((v,o)=>[...v,{...o,selected:!!t.selectedTag.find(d=>d.id===o.id)}],[])});return(s,v)=>{const o=Un,d=Jn,g=Wn,C=Kn;return F(),W(C,{onClick:v[0]||(v[0]=I=>n("contextMenuClick",I,s.file,s.idx))},{default:z(()=>{var I;return[w(o,{key:"deleteFiles",disabled:s.disableDelete},{default:z(()=>[R(L(s.$t("deleteSelected")),1)]),_:1},8,["disabled"]),s.file.type==="dir"?(F(),H(ee,{key:0},[w(o,{key:"openInNewTab"},{default:z(()=>[R(L(s.$t("openInNewTab")),1)]),_:1}),w(o,{key:"openOnTheRight"},{default:z(()=>[R(L(s.$t("openOnTheRight")),1)]),_:1}),w(o,{key:"openWithWalkMode"},{default:z(()=>[R(L(s.$t("openWithWalkMode")),1)]),_:1})],64)):Z("",!0),s.file.type==="file"?(F(),H(ee,{key:1},[G(J)(s.file.name)?(F(),H(ee,{key:0},[w(o,{key:"viewGenInfo"},{default:z(()=>[R(L(s.$t("viewGenerationInfo")),1)]),_:1}),w(d),((I=G(i).conf)==null?void 0:I.launch_mode)!=="server"?(F(),H(ee,{key:0},[w(o,{key:"send2txt2img"},{default:z(()=>[R(L(s.$t("sendToTxt2img")),1)]),_:1}),w(o,{key:"send2img2img"},{default:z(()=>[R(L(s.$t("sendToImg2img")),1)]),_:1}),w(o,{key:"send2inpaint"},{default:z(()=>[R(L(s.$t("sendToInpaint")),1)]),_:1}),w(o,{key:"send2extras"},{default:z(()=>[R(L(s.$t("sendToExtraFeatures")),1)]),_:1}),w(g,{key:"sendToThirdPartyExtension",title:s.$t("sendToThirdPartyExtension")},{default:z(()=>[w(o,{key:"send2controlnet-txt2img"},{default:z(()=>[R("ControlNet - "+L(s.$t("t2i")),1)]),_:1}),w(o,{key:"send2controlnet-img2img"},{default:z(()=>[R("ControlNet - "+L(s.$t("i2i")),1)]),_:1}),w(o,{key:"send2outpaint"},{default:z(()=>[R("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):Z("",!0),w(o,{key:"send2BatchDownload"},{default:z(()=>[R(L(s.$t("sendToBatchDownload")),1)]),_:1}),w(o,{key:"send2savedDir"},{default:z(()=>[R(L(s.$t("send2savedDir")),1)]),_:1}),w(d),w(g,{key:"toggle-tag",title:s.$t("toggleTag")},{default:z(()=>[(F(!0),H(ee,null,Ye(a.value,p=>(F(),W(o,{key:`toggle-tag-${p.id}`},{default:z(()=>[R(L(p.name)+" ",1),p.selected?(F(),W(G(gi),{key:0})):(F(),W(G(Ri),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"]),w(o,{key:"openWithLocalFileBrowser"},{default:z(()=>[R(L(s.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):Z("",!0),w(o,{key:"previewInNewWindow"},{default:z(()=>[R(L(s.$t("previewInNewWindow")),1)]),_:1}),w(o,{key:"download"},{default:z(()=>[R(L(s.$t("download")),1)]),_:1}),w(o,{key:"copyPreviewUrl"},{default:z(()=>[R(L(s.$t("copySourceFilePreviewLink")),1)]),_:1})],64)):Z("",!0)]}),_:1})}}}),Sa=["data-idx"],ka={class:"more"},Ca={key:0,class:"tags-container"},Ia={key:3,class:"preview-icon-wrap"},Ea={key:4,class:"profile"},_a={class:"name line-clamp-1"},Pa={class:"basic-info"},Oa=de({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(e,{emit:n}){const t=e;qn(o=>({aaf8adf2:o.$props.cellWidth+"px"}));const i=qe(),a=Rt(),s=V(()=>a.tagMap.get(t.file.fullpath)??[]),v=V(()=>{const o=i.gridThumbnailResolution;return i.enableThumbnail?Gn(t.file,[o,o].join("x")):ie(t.file)});return(o,d)=>{const g=ue,C=Zn,I=vi;return F(),W(g,{trigger:["contextmenu"],visible:G(i).longPressOpenContextMenu?typeof o.idx=="number"&&o.showMenuIdx===o.idx:void 0,"onUpdate:visible":d[6]||(d[6]=p=>typeof o.idx=="number"&&n("update:showMenuIdx",p?o.idx:-1))},{overlay:z(()=>[o.enableRightClickMenu?(F(),W(It,{key:0,file:o.file,idx:o.idx,"selected-tag":s.value,onContextMenuClick:d[5]||(d[5]=(p,f,l)=>n("contextMenuClick",p,f,l))},null,8,["file","idx","selected-tag"])):Z("",!0)]),default:z(()=>[(F(),H("li",{class:xe(["file file-item-trigger grid",{clickable:o.file.type==="dir",selected:o.selected}]),"data-idx":o.idx,key:o.file.name,draggable:"true",onDragstart:d[2]||(d[2]=p=>n("dragstart",p,o.idx)),onDragend:d[3]||(d[3]=p=>n("dragend",p,o.idx)),onClickCapture:d[4]||(d[4]=p=>n("fileItemClick",p,o.file,o.idx))},[se("div",null,[o.enableCloseIcon?(F(),H("div",{key:0,class:"close-icon",onClick:d[0]||(d[0]=p=>n("close-icon-click"))},[w(G(Yn))])):Z("",!0),o.enableRightClickMenu?(F(),W(g,{key:1},{overlay:z(()=>[w(It,{file:o.file,idx:o.idx,"selected-tag":s.value,onContextMenuClick:d[1]||(d[1]=(p,f,l)=>n("contextMenuClick",p,f,l))},null,8,["file","idx","selected-tag"])]),default:z(()=>[se("div",ka,[w(G(_t))])]),_:1})):Z("",!0),G(J)(o.file.name)?(F(),H("div",{style:{position:"relative"},key:o.file.fullpath,class:xe(`idx-${o.idx}`)},[w(C,{src:v.value,fallback:G(Bi),preview:{src:o.fullScreenPreviewImageUrl,onVisibleChange:(p,f)=>n("previewVisibleChange",p,f)}},null,8,["src","fallback","preview"]),s.value&&o.cellWidth>128?(F(),H("div",Ca,[(F(!0),H(ee,null,Ye(s.value,p=>(F(),W(I,{key:p.id,color:G(a).getColor(p.name)},{default:z(()=>[R(L(p.name),1)]),_:2},1032,["color"]))),128))])):Z("",!0)],2)):(F(),H("div",Ia,[o.file.type==="file"?(F(),W(G(Ai),{key:0,class:"icon center"})):(F(),W(G(Ii),{key:1,class:"icon center"}))])),o.cellWidth>128?(F(),H("div",Ea,[se("div",_a,L(o.file.name),1),se("div",Pa,[se("div",null,L(o.file.size),1),se("div",null,L(o.file.date),1)])])):Z("",!0)])],42,Sa))]),_:1},8,["visible"])}}});const La=Xn(Oa,[["__scopeId","data-v-eb7b4ec8"]]);export{ue as D,La as F,gi as S,It as _,za as a,Fa as b,$a as c,Qa as d,Ma as e,Da as f,Wt as g,Rt as h,He as i,me as j,Ri as k,vi as l,Ki as m,De as s,ne as u};
