import{d as ce,u as Ve,g as re,_ as ut,c as l,a as Oe,P as be,D as Re,f as ct,w as Mt,b as Ot,e as Rt,h as et,M as Be,i as Bt,j as Lt,F as Le,A as dt,r as le,k as Ne,l as tt,o as Nt,s as Ae,m as $e,n as Ee,p as Et,q as zt,t as Tt,v as he,x as V,y as at,z as jt,B as Fe,C as nt,E as ze,G as Vt,H as Ut,I as xe,J as De,K as Gt,L as Wt,N as qt,O as D,Q as j,R as y,S as Y,T as A,U as Te,V as W,W as pt,X as Ht,Y as U,Z as b,$ as e,a0 as P,a1 as G,a2 as Kt,a3 as st,a4 as Qt,a5 as Jt,a6 as Xt,a7 as Yt,a8 as Zt,a9 as ea,aa as ta,ab as ot,ac as aa,ad as na,ae as sa,af as oa,ag as ra,ah as la}from"./index-1961a2a7.js";import{S as ie,s as ia}from"./index-374f1119.js";import{F as q,N as ua,_ as ca}from"./numInput-813ff52e.js";import"./index-7e005f25.js";/* empty css              */import{_ as da}from"./shortcut-14bd4711.js";import{D as ft}from"./index-8dbf40be.js";/* empty css              *//* empty css              */import{u as Ue,N as pa,g as M,s as vt,a as fa,b as va,c as ma,d as ga,F as ha}from"./FileItem-97e3c353.js";import{u as ka,a as ba,b as ya,c as Ca,M as wa,L as _a,R as Ia,f as Sa}from"./MultiSelectKeep-95a62820.js";import{g as ke,o as Pa}from"./functionalCallableComp-0536b145.js";import"./Checkbox-0e82a685.js";var Aa=["class","style"],$a=function(){return{prefixCls:String,href:String,separator:be.any,overlay:be.any,onClick:Function}};const ue=ce({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:$a(),slots:["separator","overlay"],setup:function(t,c){var r=c.slots,v=c.attrs,m=Ve("breadcrumb",t),$=m.prefixCls,O=function(i,d){var p=re(r,t,"overlay");return p?l(ft,{overlay:p,placement:"bottom"},{default:function(){return[l("span",{class:"".concat(d,"-overlay-link")},[i,l(Re,null,null)])]}}):i};return function(){var w,i=(w=re(r,t,"separator"))!==null&&w!==void 0?w:"/",d=re(r,t),p=v.class,g=v.style,C=ut(v,Aa),h;return t.href!==void 0?h=l("a",Oe({class:"".concat($.value,"-link"),onClick:t.onClick},C),[d]):h=l("span",Oe({class:"".concat($.value,"-link"),onClick:t.onClick},C),[d]),h=O(h,$.value),d?l("span",{class:p,style:g},[h,i&&l("span",{class:"".concat($.value,"-separator")},[i])]):null}}});var Fa=function(){return{prefixCls:String,routes:{type:Array},params:be.any,separator:be.any,itemRender:{type:Function}}};function xa(s,t){if(!s.breadcrumbName)return null;var c=Object.keys(t).join("|"),r=s.breadcrumbName.replace(new RegExp(":(".concat(c,")"),"g"),function(v,m){return t[m]||v});return r}function rt(s){var t=s.route,c=s.params,r=s.routes,v=s.paths,m=r.indexOf(t)===r.length-1,$=xa(t,c);return m?l("span",null,[$]):l("a",{href:"#/".concat(v.join("/"))},[$])}const ae=ce({compatConfig:{MODE:3},name:"ABreadcrumb",props:Fa(),slots:["separator","itemRender"],setup:function(t,c){var r=c.slots,v=Ve("breadcrumb",t),m=v.prefixCls,$=v.direction,O=function(p,g){return p=(p||"").replace(/^\//,""),Object.keys(g).forEach(function(C){p=p.replace(":".concat(C),g[C])}),p},w=function(p,g,C){var h=Bt(p),R=O(g||"",C);return R&&h.push(R),h},i=function(p){var g=p.routes,C=g===void 0?[]:g,h=p.params,R=h===void 0?{}:h,_=p.separator,L=p.itemRender,B=L===void 0?rt:L,E=[];return C.map(function(S){var T=O(S.path,R);T&&E.push(T);var H=[].concat(E),K=null;return S.children&&S.children.length&&(K=l(Be,null,{default:function(){return[S.children.map(function(z){return l(Be.Item,{key:z.path||z.breadcrumbName},{default:function(){return[B({route:z,params:R,routes:C,paths:w(H,z.path,R)})]}})})]}})),l(ue,{overlay:K,separator:_,key:T||S.breadcrumbName},{default:function(){return[B({route:S,params:R,routes:C,paths:H})]}})})};return function(){var d,p,g,C=t.routes,h=t.params,R=h===void 0?{}:h,_=ct(re(r,t)),L=(d=re(r,t,"separator"))!==null&&d!==void 0?d:"/",B=t.itemRender||r.itemRender||rt;C&&C.length>0?g=i({routes:C,params:R,separator:L,itemRender:B}):_.length&&(g=_.map(function(S,T){return Mt(Ot(S.type)==="object"&&(S.type.__ANT_BREADCRUMB_ITEM||S.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Rt(S,{separator:L,key:T})}));var E=(p={},et(p,m.value,!0),et(p,"".concat(m.value,"-rtl"),$.value==="rtl"),p);return l("div",{class:E},[g])}}});var Da=["separator","class"],Ma=function(){return{prefixCls:String}};const je=ce({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Ma(),setup:function(t,c){var r=c.slots,v=c.attrs,m=Ve("breadcrumb",t),$=m.prefixCls;return function(){var O;v.separator;var w=v.class,i=ut(v,Da),d=ct((O=r.default)===null||O===void 0?void 0:O.call(r));return l("span",Oe({class:["".concat($.value,"-separator"),w]},i),[d.length>0?d:"/"])}}});ae.Item=ue;ae.Separator=je;ae.install=function(s){return s.component(ae.name,ae),s.component(ue.name,ue),s.component(je.name,je),s};q.useInjectFormItemContext=Lt;q.ItemRest=Le;q.install=function(s){return s.component(q.name,q),s.component(q.Item.name,q.Item),s.component(Le.name,Le),s};ie.setDefaultIndicator=ia;ie.install=function(s){return s.component(ie.name,ie),s};var Oa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const Ra=Oa;function lt(s){for(var t=1;t<arguments.length;t++){var c=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(c).filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable}))),r.forEach(function(v){Ba(s,v,c[v])})}return s}function Ba(s,t,c){return t in s?Object.defineProperty(s,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[t]=c,s}var Ge=function(t,c){var r=lt({},t,c.attrs);return l(dt,lt({},r,{icon:Ra}),null)};Ge.displayName="ArrowLeftOutlined";Ge.inheritAttrs=!1;const La=Ge;var Na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Ea=Na;function it(s){for(var t=1;t<arguments.length;t++){var c=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(c);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(c).filter(function(v){return Object.getOwnPropertyDescriptor(c,v).enumerable}))),r.forEach(function(v){za(s,v,c[v])})}return s}function za(s,t,c){return t in s?Object.defineProperty(s,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[t]=c,s}var We=function(t,c){var r=it({},t,c.attrs);return l(dt,it({},r,{icon:Ea}),null)};We.displayName="DatabaseOutlined";We.inheritAttrs=!1;const Ta=We;function ja(){const s=le(),{scroller:t,stackViewEl:c,stack:r,currPage:v,currLocation:m,useEventListen:$,eventEmitter:O,getPane:w,props:i,deletedFiles:d,walker:p,sortedFiles:g}=Ue().toRefs();Ne(()=>r.value.length,tt((a,u)=>{var f;a!==u&&((f=t.value)==null||f.scrollToItem(0))},300)),Nt(async()=>{var a;if(!r.value.length)if(i.value.mode==="scanned-fixed"||i.value.mode==="walk")r.value=[{files:[],curr:i.value.path??""}];else{const u=await ke("/");r.value.push({files:u.files,curr:"/"})}s.value=new pa,s.value.configure({parent:c.value}),i.value.path&&i.value.path!=="/"?await B(i.value.path):(a=M.conf)!=null&&a.home&&B(M.conf.home)}),Ne(m,tt(a=>{const u=w.value();if(!u)return;u.path=a;const f=Ae(a).pop()??"",F=(()=>{const x={walk:"Walk","scanned-fixed":"Fixed",scanned:null}[i.value.mode??"scanned"],N=ee=>x?`${x}: ${ee}`:ee,X=M.getShortPath(a);return N(X.length>24&&f?f:X)})();u.name=$e("div",{style:"display:flex;align-items:center"},[$e(Ta),$e("span",{class:"line-clamp-1",style:"max-width: 256px"},F)]),u.nameFallbackStr=F,M.recent=M.recent.filter(x=>x.key!==u.key),M.recent.unshift({path:a,key:u.key,mode:i.value.mode}),M.recent.length>20&&(M.recent=M.recent.slice(0,20))},300));const C=()=>ze(m.value),h=async a=>{var u,f;if(a.type==="dir")try{(u=s.value)==null||u.start();const{files:I}=await ke(a.fullpath);i.value.mode=="scanned-fixed"?r.value=[{files:I,curr:a.fullpath}]:r.value.push({files:I,curr:a.name})}finally{(f=s.value)==null||f.done()}},R=a=>{if(i.value.mode!="walk")for(;a<r.value.length-1;)r.value.pop()},_=()=>{B(Vt(m.value))},L=(a,u)=>(Ut(M.conf,"global.conf load failed"),M.conf.is_win?a.toLowerCase()==u.toLowerCase():a==u),B=async a=>{i.value.mode==="walk"?w.value().path=a:i.value.mode==="scanned-fixed"?await h({fullpath:a,name:a,type:"dir"}):await E(a),Ee(500).then(()=>O.value.emit("viewableAreaFilesChange"))},E=async a=>{var f,I;const u=r.value.slice();try{Et(a)||(a=zt(((f=M.conf)==null?void 0:f.sd_cwd)??"/",a));const F=Ae(a),x=r.value.map(N=>N.curr);for(x.shift();x[0]&&F[0]&&L(x[0],F[0]);)x.shift(),F.shift();for(let N=0;N<x.length;N++)r.value.pop();if(!F.length)return S();for(const N of F){const X=(I=v.value)==null?void 0:I.files.find(ee=>L(ee.name,N));if(!X)throw console.error({frags:F,frag:N,stack:Tt(r.value)}),new Error(`${N} not found`);await h(X)}}catch(F){throw he.error(V("moveFailedCheckPath")+(F instanceof Error?F.message:"")),console.error(a,Ae(a),v.value),r.value=u,F}},S=at(async()=>{var a,u,f;try{if((a=s.value)==null||a.start(),p.value)await p.value.reset(),O.value.emit("loadNextDir");else{const{files:I}=await ke(m.value);xe(r.value).files=I}d.value.clear(),(u=t.value)==null||u.scrollToItem(0),he.success(V("refreshCompleted"))}finally{(f=s.value)==null||f.done()}});jt("returnToIIB",at(async()=>{var a,u,f;if(i.value.mode==="walk"&&p.value){const I=((a=t.value)==null?void 0:a.$_endIndex)??64;if(I<128&&await p.value.isExpired()){const F=he.loading(V("autoUpdate"),0);try{const x=new Promise(N=>{p.value.seamlessRefresh(I).then(()=>{O.value.emit("loadNextDir"),N()})});await Promise.all([x,Ee(1500)])}finally{F()}}return}try{(u=s.value)==null||u.start();const{files:I}=await ke(m.value);xe(r.value).files.map(x=>x.date).join()!==I.map(x=>x.date).join()&&(xe(r.value).files=I,he.success(V("autoUpdate")))}finally{(f=s.value)==null||f.done()}})),$.value("refresh",S);const T=a=>{B(a)},H=Fe(()=>M.quickMovePaths.map(a=>({...a,path:nt(a.dir)}))),K=Fe(()=>{const a=nt(m.value);return H.value.find(f=>f.path===a)}),Z=async()=>{const a=M.tabList[i.value.tabIdx],u={type:"empty",name:V("emptyStartPage"),key:Date.now()+De(),popAddPathModal:{path:m.value,type:"scanned"}};a.panes.push(u),a.key=u.key},z=le(!1),Q=le(m.value),de=()=>{z.value=!0,Q.value=m.value},ye=async()=>{await B(Q.value),z.value=!1};ka("click",a=>{var u,f,I;(I=(f=(u=a.target)==null?void 0:u.className)==null?void 0:f.includes)!=null&&I.call(f,"ant-input")||(z.value=!1)});const Ce=()=>{const a=parent.location,u=a.href.substring(0,a.href.length-a.search.length),f=new URLSearchParams(a.search);f.set("action","open"),f.set("path",m.value),f.set("mode",i.value.mode??"scanned");const I=`${u}?${f.toString()}`;ze(I,V("copyLocationUrlSuccessMsg"))},ne=(a="tag-search")=>{const u=M.tabList[i.value.tabIdx],f={type:a,key:De(),searchScope:m.value,name:V(a==="tag-search"?"imgSearch":"fuzzy-search")};u.panes.push(f),u.key=f.key},J=()=>O.value.emit("selectAll"),se=async()=>{await Pa(m.value),await S()},pe=()=>{const a=m.value;vt.set(a,r.value);const u=M.tabList[i.value.tabIdx],f={type:"local",key:De(),path:a,name:V("local"),stackKey:a,mode:"walk"};u.panes.push(f),u.key=f.key},we=Fe(()=>!p.value&&g.value.some(a=>a.type==="dir"));return{locInputValue:Q,isLocationEditing:z,onLocEditEnter:ye,onEditBtnClick:de,addToSearchScanPathAndQuickMove:Z,searchPathInfo:K,refresh:S,copyLocation:C,back:R,openNext:h,currPage:v,currLocation:m,stack:r,scroller:t,share:Ce,selectAll:J,quickMoveTo:T,onCreateFloderBtnClick:se,onWalkBtnClick:pe,showWalkButton:we,searchInCurrentDir:ne,backToLastUseTo:_}}const Me=new Map,Va=()=>{const{useEventListen:s,sortedFiles:t,getViewableAreaFiles:c}=Ue().toRefs(),r=le(M.defaultChangeIndchecked),v=le(M.defaultSeedChangeChecked),m=async()=>{if(await Ee(100),!r.value)return;const w=c.value().filter(d=>Gt(d.fullpath)&&!d.gen_info_obj);if(!w.length)return;const i=await Wt(w.map(d=>d.fullpath).filter(d=>!Me.has(d)));w.forEach(d=>{const p=i[d.fullpath]||Me.get(d.fullpath)||"";Me.set(d.fullpath,p),d.gen_info_obj=qt(p),d.gen_info_raw=p})};s.value("viewableAreaFilesChange",m);const $=w=>{const i=t.value;return[w,v.value,i[w-1],i[w],i[w+1]]};function O(w,i,d,p){const g={diff:{},empty:!0,ownFile:"",otherFile:""};if(i+d<0||i+d>=t.value.length||t.value[i]==null||!("gen_info_obj"in t.value[i])||!("gen_info_obj"in t.value[i+d]))return g;const C=w,h=t.value[i+d].gen_info_obj;if(h==null)return g;const R=["hashes","resources"];g.diff={},g.ownFile=p.name,g.otherFile=t.value[i+d].name,g.empty=!1,v.value||R.push("seed");for(const _ in C)if(!R.includes(_)){if(!(_ in h)){g.diff[_]="+";continue}if(C[_]!=h[_])if(_.includes("rompt")&&C[_]!=""&&h[_]!=""){const L=C[_].split(","),B=h[_].split(",");let E=0;for(const S in L)L[S]!=B[S]&&E++;g.diff[_]=E}else g.diff[_]=[C[_],h[_]]}return g}return{getGenDiff:O,changeIndchecked:r,seedChangeChecked:v,getRawGenParams:()=>m(),getGenDiffWatchDep:$}};const Ua={class:"base-info"},Ga=ce({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(s){return(t,c)=>(D(),j("div",Ua,[y("span",null,[Y(A(t.$t("items",[t.fileNum]))+" ",1),t.selectedFileNum?(D(),j(Te,{key:0},[Y(", "+A(t.$t("selectedItems",[t.selectedFileNum])),1)],64)):W("",!0)])]))}});const Wa=pt(Ga,[["__scopeId","data-v-afd25667"]]),qa={class:"hint"},Ha={class:"location-bar"},Ka=["onClick"],Qa={key:3,class:"location-act"},Ja={class:"actions"},Xa=["onClick"],Ya={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Za={style:{padding:"4px"}},en={style:{padding:"4px"}},tn={style:{padding:"4px"}},an={key:0,class:"view"},nn={style:{padding:"16px 0 512px"}},sn={key:0,class:"preview-switch"},on=ce({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(s){const t=s,c=Ht(),{scroller:r,stackViewEl:v,props:m,multiSelectedIdxs:$,spinning:O}=Ue().toRefs(),{currLocation:w,currPage:i,refresh:d,copyLocation:p,back:g,openNext:C,stack:h,quickMoveTo:R,addToSearchScanPathAndQuickMove:_,locInputValue:L,isLocationEditing:B,onLocEditEnter:E,onEditBtnClick:S,share:T,selectAll:H,onCreateFloderBtnClick:K,onWalkBtnClick:Z,showWalkButton:z,searchInCurrentDir:Q,backToLastUseTo:de}=ja(),{gridItems:ye,sortMethodConv:Ce,moreActionsDropdownShow:ne,sortedFiles:J,sortMethod:se,itemSize:pe,loadNextDir:we,loadNextDirLoading:a,canLoadNext:u,onScroll:f,cellWidth:I,dirCoverCache:F}=fa(),{onDrop:x,onFileDragStart:N,onFileDragEnd:X}=ba(),{onFileItemClick:ee,onContextMenuClick:qe,showGenInfo:fe,imageGenInfo:He,q:mt}=ya({openNext:C}),{previewIdx:ve,onPreviewVisibleChange:gt,previewing:_e,previewImgMove:Ke,canPreview:Qe}=Ca(),{showMenuIdx:Ie}=va(),{onClearAllSelected:ht,onReverseSelect:kt,onSelectAll:bt}=ma(),{getGenDiff:yt,changeIndchecked:oe,seedChangeChecked:me,getRawGenParams:Ct,getGenDiffWatchDep:wt}=Va();return Ne(()=>t,()=>{m.value=t;const k=vt.get(t.stackKey??"");k&&(h.value=k.slice())},{immediate:!0}),(k,n)=>{const _t=aa,It=na,St=sa,Pt=oa,At=ue,$t=ae,Je=ra,Se=la,Xe=Be,Pe=ft,Ft=ua,ge=ca,Ye=da,xt=q,Dt=ie;return D(),U(Dt,{spinning:e(O),size:"large"},{default:b(()=>[l(wa,{show:e(c).keepMultiSelect||!!e($).length,onClearAllSelected:e(ht),onSelectAll:e(bt),onReverseSelect:e(kt)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),l(_t,{style:{display:"none"}}),y("div",{ref_key:"stackViewEl",ref:v,onDragover:n[30]||(n[30]=P(()=>{},["prevent"])),onDrop:n[31]||(n[31]=P(o=>e(x)(o),["prevent"])),class:"container"},[l(St,{visible:e(fe),"onUpdate:visible":n[1]||(n[1]=o=>G(fe)?fe.value=o:null),width:"70vw","mask-closable":"",onOk:n[2]||(n[2]=o=>fe.value=!1)},{cancelText:b(()=>[]),default:b(()=>[l(It,{active:"",loading:!e(mt).isIdle},{default:b(()=>[y("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:n[0]||(n[0]=o=>e(ze)(e(He)))},[y("div",qa,A(k.$t("doubleClickToCopy")),1),Y(" "+A(e(He)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),y("div",Ha,[y("div",{class:"breadcrumb",style:Kt({flex:e(B)?1:""})},[e(B)?(D(),U(Pt,{key:0,style:{flex:"1"},value:e(L),"onUpdate:value":n[3]||(n[3]=o=>G(L)?L.value=o:null),onClick:n[4]||(n[4]=P(()=>{},["stop"])),onKeydown:n[5]||(n[5]=P(()=>{},["stop"])),onPressEnter:e(E),"allow-clear":""},null,8,["value","onPressEnter"])):(D(),U($t,{key:1,style:{flex:"1"}},{default:b(()=>[(D(!0),j(Te,null,st(e(h),(o,te)=>(D(),U(At,{key:te},{default:b(()=>[y("a",{onClick:P(Ze=>e(g)(te),["prevent"])},A(o.curr==="/"?k.$t("root"):o.curr.replace(/:\/$/,k.$t("drive"))),9,Ka)]),_:2},1024))),128))]),_:1})),e(B)?(D(),U(Je,{key:2,size:"small",onClick:e(E),type:"primary"},{default:b(()=>[Y(A(k.$t("go")),1)]),_:1},8,["onClick"])):(D(),j("div",Qa,[k.mode==="scanned-fixed"?(D(),j("a",{key:0,onClick:n[6]||(n[6]=P((...o)=>e(de)&&e(de)(...o),["prevent"])),style:{margin:"0 8px 16px 0"}},[l(e(La))])):W("",!0),y("a",{onClick:n[7]||(n[7]=P((...o)=>e(p)&&e(p)(...o),["prevent"])),class:"copy"},A(k.$t("copy")),1),y("a",{onClick:n[8]||(n[8]=P((...o)=>e(S)&&e(S)(...o),["prevent","stop"]))},A(k.$t("edit")),1)]))],4),y("div",Ja,[y("a",{class:"opt",onClick:n[9]||(n[9]=P((...o)=>e(d)&&e(d)(...o),["prevent"]))},A(k.$t("refresh")),1),l(Pe,null,{overlay:b(()=>[l(Xe,null,{default:b(()=>[l(Se,{key:"tag-search"},{default:b(()=>[y("a",{onClick:n[11]||(n[11]=P(o=>e(Q)("tag-search"),["prevent"]))},A(k.$t("imgSearch")),1)]),_:1}),l(Se,{key:"tag-search"},{default:b(()=>[y("a",{onClick:n[12]||(n[12]=P(o=>e(Q)("fuzzy-search"),["prevent"]))},A(k.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:b(()=>[y("a",{class:"opt",onClick:n[10]||(n[10]=P(()=>{},["prevent"]))},[Y(A(k.$t("search"))+" ",1),l(e(Re))])]),_:1}),e(z)?(D(),j("a",{key:0,class:"opt",onClick:n[13]||(n[13]=P((...o)=>e(Z)&&e(Z)(...o),["prevent"]))}," Walk ")):W("",!0),y("a",{class:"opt",onClick:n[14]||(n[14]=P((...o)=>e(H)&&e(H)(...o),["prevent","stop"]))},A(k.$t("selectAll")),1),e(Qt)?W("",!0):(D(),j("a",{key:1,class:"opt",onClick:n[15]||(n[15]=P((...o)=>e(T)&&e(T)(...o),["prevent"]))},A(k.$t("share")),1)),l(Pe,null,{overlay:b(()=>[l(Xe,null,{default:b(()=>[(D(!0),j(Te,null,st(e(c).quickMovePaths,o=>(D(),U(Se,{key:o.dir},{default:b(()=>[y("a",{onClick:P(te=>e(R)(o.dir),["prevent"])},A(o.zh),9,Xa)]),_:2},1024))),128))]),_:1})]),default:b(()=>[y("a",{class:"opt",onClick:n[16]||(n[16]=P(()=>{},["prevent"]))},[Y(A(k.$t("quickMove"))+" ",1),l(e(Re))])]),_:1}),l(Pe,{trigger:["click"],visible:e(ne),"onUpdate:visible":n[26]||(n[26]=o=>G(ne)?ne.value=o:null),placement:"bottomLeft",getPopupContainer:o=>o.parentNode},{overlay:b(()=>[y("div",Ya,[l(xt,Jt(Xt({labelCol:{span:10},wrapperCol:{span:14}})),{default:b(()=>[l(ge,{label:k.$t("gridCellWidth")},{default:b(()=>[l(Ft,{modelValue:e(I),"onUpdate:modelValue":n[18]||(n[18]=o=>G(I)?I.value=o:null),max:1024,min:64,step:16},null,8,["modelValue"])]),_:1},8,["label"]),l(ge,{label:k.$t("sortingMethod")},{default:b(()=>[l(e(Yt),{value:e(se),"onUpdate:value":n[19]||(n[19]=o=>G(se)?se.value=o:null),onClick:n[20]||(n[20]=P(()=>{},["stop"])),conv:e(Ce),options:e(Zt)},null,8,["value","conv","options"])]),_:1},8,["label"]),l(ge,{label:k.$t("showChangeIndicators")},{default:b(()=>[l(Ye,{checked:e(oe),"onUpdate:checked":n[21]||(n[21]=o=>G(oe)?oe.value=o:null),onClick:e(Ct)},null,8,["checked","onClick"])]),_:1},8,["label"]),l(ge,{label:k.$t("seedAsChange")},{default:b(()=>[l(Ye,{checked:e(me),"onUpdate:checked":n[22]||(n[22]=o=>G(me)?me.value=o:null),disabled:!e(oe)},null,8,["checked","disabled"])]),_:1},8,["label"]),y("div",Za,[y("a",{onClick:n[23]||(n[23]=P((...o)=>e(_)&&e(_)(...o),["prevent"]))},A(k.$t("addToSearchScanPathAndQuickMove")),1)]),y("div",en,[y("a",{onClick:n[24]||(n[24]=P(o=>e(ea)(e(w)+"/"),["prevent"]))},A(k.$t("openWithLocalFileBrowser")),1)]),y("div",tn,[y("a",{onClick:n[25]||(n[25]=P((...o)=>e(K)&&e(K)(...o),["prevent"]))},A(k.$t("createFolder")),1)])]),_:1},16)])]),default:b(()=>[y("a",{class:"opt",onClick:n[17]||(n[17]=P(()=>{},["prevent"]))},A(k.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(i)?(D(),j("div",an,[l(e(ga),{class:"file-list",items:e(J),ref_key:"scroller",ref:r,onScroll:e(f),"item-size":e(pe).first,"key-field":"fullpath","item-secondary-size":e(pe).second,gridItems:e(ye)},{default:b(({item:o,index:te})=>[l(ha,{idx:parseInt(te),file:o,"full-screen-preview-image-url":e(J)[e(ve)]?e(ta)(e(J)[e(ve)]):"","show-menu-idx":e(Ie),"onUpdate:showMenuIdx":n[27]||(n[27]=Ze=>G(Ie)?Ie.value=Ze:null),selected:e($).includes(te),"cell-width":e(I),onFileItemClick:e(ee),onDragstart:e(N),onDragend:e(X),onPreviewVisibleChange:e(gt),onContextMenuClick:e(qe),"is-selected-mutil-files":e($).length>1,"enable-change-indicator":e(oe),"seed-change-checked":e(me),"get-gen-diff":e(yt),"get-gen-diff-watch-dep":e(wt),previewing:e(_e),"cover-files":e(F).get(o.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","previewing","cover-files"])]),after:b(()=>[y("div",nn,[t.mode==="walk"?(D(),U(Je,{key:0,onClick:e(we),loading:e(a),block:"",type:"primary",disabled:!e(u),ghost:""},{default:b(()=>[Y(A(k.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):W("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(_e)?(D(),j("div",sn,[l(e(_a),{onClick:n[28]||(n[28]=o=>e(Ke)("prev")),class:ot({disable:!e(Qe)("prev")})},null,8,["class"]),l(e(Ia),{onClick:n[29]||(n[29]=o=>e(Ke)("next")),class:ot({disable:!e(Qe)("next")})},null,8,["class"])])):W("",!0)])):W("",!0)],544),e(_e)?(D(),U(Sa,{key:0,file:e(J)[e(ve)],idx:e(ve),onContextMenuClick:e(qe)},null,8,["file","idx","onContextMenuClick"])):W("",!0),l(Wa,{"file-num":e(J).length,"selected-file-num":e($).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const yn=pt(on,[["__scopeId","data-v-2ea5a4a1"]]);export{yn as default};
