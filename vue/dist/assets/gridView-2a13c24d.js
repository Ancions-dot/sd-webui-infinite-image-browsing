import{u as w,b as k,F as y,g as b}from"./FileItem-dd54980e.js";import{d as F,r as h,c4 as x,v as C,aS as D,aW as I,o as E,k as S,c,A as V,C as e,Q as z,cd as B,cf as A,q as R}from"./index-538b0789.js";import"./functionalCallableComp-7f541e28.js";import"./index-9bb1316a.js";import"./index-0482b84f.js";const q=F({__name:"gridView",props:{tabIdx:{},paneIdx:{},id:{},removable:{type:Boolean},allowDragAndDrop:{type:Boolean},files:{},paneKey:{}},setup(p){const o=p,d=h(),{stackViewEl:m}=w().toRefs(),{itemSize:i,gridItems:u,cellWidth:g}=k(),f=x(),s=C(o.files??[]),_=async a=>{const l=B(a);o.allowDragAndDrop&&l&&(s.value=A([...s.value,...l.nodes]))},v=a=>{s.value.splice(a,1)};return D(()=>{d.pageFuncExportMap.set(o.paneKey,{getFiles:()=>I(s.value),setFiles:a=>s.value=a})}),(a,l)=>(E(),S("div",{class:"container",ref_key:"stackViewEl",ref:m,onDrop:_},[c(e(b),{ref:"scroller",class:"file-list",items:s.value.slice(),"item-size":e(i).first,"key-field":"fullpath","item-secondary-size":e(i).second,gridItems:e(u)},{default:V(({item:t,index:n})=>{var r;return[c(y,{idx:n,file:t,"cell-width":e(g),"enable-close-icon":o.removable,onCloseIconClick:K=>v(n),"full-screen-preview-image-url":e(z)(t),tags:(r=t==null?void 0:t.tags)==null?void 0:r.map(e(f).tagConvert),"enable-right-click-menu":!1},null,8,["idx","file","cell-width","enable-close-icon","onCloseIconClick","full-screen-preview-image-url","tags"])]}),_:1},8,["items","item-size","item-secondary-size","gridItems"])],544))}});const M=R(q,[["__scopeId","data-v-22e183b6"]]);export{M as default};
