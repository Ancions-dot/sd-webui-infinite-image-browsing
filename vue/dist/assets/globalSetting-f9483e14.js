import{d as A,$ as B,r as K,m as H,n as Q,S as f,T as w,c as t,a1 as o,a2 as e,z as i,a0 as C,Y as S,U as p,X as M,aI as X,E as Y,W as h,V as _,aa as V,aN as Z,ab as j,a6 as P,a3 as T,a7 as q,aO as J,aP as ee,aQ as te,aR as le,ai as x,ah as ae,Z as ne}from"./index-4d943b58.js";import{_ as R,a as N,F as oe}from"./numInput-a4935dbe.js";import"./index-e702f1a9.js";/* empty css              *//* empty css              */import{_ as O,g as se,C as de}from"./shortcut-5818cc90.js";/* empty css              */import{a as ue}from"./functionalCallableComp-89ac6972.js";import"./Checkbox-2c792c46.js";const F="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ie=["width","height","src"],re=A({__name:"ImageSetting",setup(D){function a($,r){return new Promise(m=>{const g=new Image;g.onload=()=>{const u=document.createElement("canvas");u.width=g.width*r,u.height=g.height*r,u.getContext("2d").drawImage(g,0,0,u.width,u.height),m(u.toDataURL())},g.src=$})}const d=B(),k=K("");return H(()=>[d.enableThumbnail,d.gridThumbnailResolution],Q(async()=>{d.enableThumbnail&&(k.value=await a(F,d.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),($,r)=>{const m=N,g=O;return f(),w(M,null,[t(m,{label:e(i)("defaultGridCellWidth")},{default:o(()=>[t(R,{min:64,max:1024,step:16,modelValue:e(d).defaultGridCellWidth,"onUpdate:modelValue":r[0]||(r[0]=u=>e(d).defaultGridCellWidth=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e(i)("useThumbnailPreview")},{default:o(()=>[t(g,{checked:e(d).enableThumbnail,"onUpdate:checked":r[1]||(r[1]=u=>e(d).enableThumbnail=u)},null,8,["checked"])]),_:1},8,["label"]),e(d).enableThumbnail?(f(),C(m,{key:0,label:e(i)("thumbnailResolution")},{default:o(()=>[t(R,{modelValue:e(d).gridThumbnailResolution,"onUpdate:modelValue":r[2]||(r[2]=u=>e(d).gridThumbnailResolution=u),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):S("",!0),t(m,{label:e(i)("livePreview")},{default:o(()=>[p("div",null,[p("img",{width:e(d).defaultGridCellWidth,height:e(d).defaultGridCellWidth,src:e(d).enableThumbnail?k.value:e(F)},null,8,ie)])]),_:1},8,["label"]),t(m,{label:e(i)("defaultShowChangeIndicators")},{default:o(()=>[t(g,{checked:e(d).defaultChangeIndchecked,"onUpdate:checked":r[3]||(r[3]=u=>e(d).defaultChangeIndchecked=u)},null,8,["checked"])]),_:1},8,["label"]),e(d).defaultChangeIndchecked?(f(),C(m,{key:1,label:e(i)("defaultSeedAsChange")},{default:o(()=>[t(g,{checked:e(d).defaultSeedChangeChecked,"onUpdate:checked":r[4]||(r[4]=u=>e(d).defaultSeedChangeChecked=u)},null,8,["checked"])]),_:1},8,["label"])):S("",!0),t(m,{label:e(i)("previewMaskBackgroundOpacity")},{default:o(()=>[t(R,{min:0,max:1,step:.05,modelValue:e(d).previewBgOpacity,"onUpdate:modelValue":r[5]||(r[5]=u=>e(d).previewBgOpacity=u)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),ce={class:"panel"},me={style:{"margin-top":"0"}},pe={class:"lang-select-wrap"},he={class:"col"},ge={class:"col"},fe={class:"col"},be={class:"col"},_e=A({__name:"globalSetting",setup(D){const a=B(),d=X(),k=K(!1),$=async()=>{window.location.reload()},r=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],m=(s,l)=>{const y=se(s);y&&(a.shortcut[l]=y)},g=async()=>{await J("shutdown_api_server_command"),await ee.removeFile(te),await le()},u=Y(()=>[{value:"empty",text:i("emptyStartPage")},{value:"last-workspace-state",text:i("restoreLastWorkspaceState")},...d.snapshots.map(l=>({value:`workspace_snapshot_${l.id}`,text:i("restoreWorkspaceSnapshot",[l.name])}))]);return(s,l)=>{const y=x,c=N,I=O,L=R,v=x,G=de,U=ae,E=oe;return f(),w("div",ce,[S("",!0),t(E,null,{default:o(()=>{var W;return[p("h2",me,h(e(i)("ImageBrowsingSettings")),1),t(re),p("h2",null,h(e(i)("imgSearch")),1),t(c,{label:s.$t("rebuildImageIndex")},{default:o(()=>[t(y,{onClick:e(ue)},{default:o(()=>[_(h(s.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),p("h2",null,h(e(i)("autoRefresh")),1),t(c,{label:s.$t("autoRefreshWalkMode")},{default:o(()=>[t(I,{checked:e(a).autoRefreshWalkMode,"onUpdate:checked":l[0]||(l[0]=n=>e(a).autoRefreshWalkMode=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("autoRefreshNormalFixedMode")},{default:o(()=>[t(I,{checked:e(a).autoRefreshNormalFixedMode,"onUpdate:checked":l[1]||(l[1]=n=>e(a).autoRefreshNormalFixedMode=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:e(i)("autoRefreshWalkModePosLimit")},{default:o(()=>[t(L,{min:0,max:1024,step:16,modelValue:e(a).autoRefreshWalkModePosLimit,"onUpdate:modelValue":l[2]||(l[2]=n=>e(a).autoRefreshWalkModePosLimit=n)},null,8,["modelValue"])]),_:1},8,["label"]),p("h2",null,h(e(i)("other")),1),t(c,{label:s.$t("onlyFoldersAndImages")},{default:o(()=>[t(I,{checked:e(a).onlyFoldersAndImages,"onUpdate:checked":l[3]||(l[3]=n=>e(a).onlyFoldersAndImages=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("defaultSortingMethod")},{default:o(()=>[t(e(V),{value:e(a).defaultSortingMethod,"onUpdate:value":l[4]||(l[4]=n=>e(a).defaultSortingMethod=n),conv:e(Z),options:e(j)},null,8,["value","conv","options"])]),_:1},8,["label"]),t(c,{label:s.$t("longPressOpenContextMenu")},{default:o(()=>[t(I,{checked:e(a).longPressOpenContextMenu,"onUpdate:checked":l[5]||(l[5]=n=>e(a).longPressOpenContextMenu=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("openOnAppStart")},{default:o(()=>[t(e(V),{value:e(a).defaultInitinalPage,"onUpdate:value":l[6]||(l[6]=n=>e(a).defaultInitinalPage=n),options:u.value},null,8,["value","options"])]),_:1},8,["label"]),t(c,{label:s.$t("lang")},{default:o(()=>[p("div",pe,[t(e(V),{options:r,value:e(a).lang,"onUpdate:value":l[7]||(l[7]=n=>e(a).lang=n),onChange:l[8]||(l[8]=n=>k.value=!0)},null,8,["value"])]),k.value?(f(),C(v,{key:0,type:"primary",onClick:$,ghost:""},{default:o(()=>[_(h(e(i)("langChangeReload")),1)]),_:1})):S("",!0)]),_:1},8,["label"]),(f(!0),w(M,null,P(e(a).ignoredConfirmActions,(n,b)=>(f(),C(c,{label:s.$t(b+"SkipConfirm"),key:b},{default:o(()=>[t(G,{checked:e(a).ignoredConfirmActions[b],"onUpdate:checked":z=>e(a).ignoredConfirmActions[b]=z},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),p("h2",null,h(e(i)("shortcutKey")),1),t(c,{label:s.$t("download")},{default:o(()=>[p("div",he,[t(U,{value:e(a).shortcut.download,onKeydown:l[9]||(l[9]=T(n=>m(n,"download"),["stop","prevent"])),placeholder:s.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(v,{onClick:l[10]||(l[10]=n=>e(a).shortcut.download=""),class:"clear-btn"},{default:o(()=>[_(h(s.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),t(c,{label:s.$t("deleteSelected")},{default:o(()=>[p("div",ge,[t(U,{value:e(a).shortcut.delete,onKeydown:l[11]||(l[11]=T(n=>m(n,"delete"),["stop","prevent"])),placeholder:s.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(v,{onClick:l[12]||(l[12]=n=>e(a).shortcut.delete=""),class:"clear-btn"},{default:o(()=>[_(h(s.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(f(!0),w(M,null,P(((W=e(a).conf)==null?void 0:W.all_custom_tags)??[],n=>(f(),C(c,{label:s.$t("toggleTagSelection",{tag:n.name}),key:n.id},{default:o(()=>[p("div",fe,[t(U,{value:e(a).shortcut[`toggle_tag_${n.name}`],onKeydown:T(b=>m(b,`toggle_tag_${n.name}`),["stop","prevent"]),placeholder:s.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),t(v,{onClick:b=>e(a).shortcut[`toggle_tag_${n.name}`]="",class:"clear-btn"},{default:o(()=>[_(h(s.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(q)?(f(),w(M,{key:0},[p("h2",null,h(e(i)("clientSpecificSettings")),1),t(c,null,{default:o(()=>[p("div",be,[t(v,{onClick:g,class:"clear-btn"},{default:o(()=>[_(h(s.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):S("",!0)]}),_:1})])}}});const Re=ne(_e,[["__scopeId","data-v-81593520"]]);export{Re as default};
