import{d as v,cx as C,bO as I,V as i,W as _,X as f,c,a4 as r,Y as h,Z as d,a5 as e,a3 as F,ag as x,b$ as z,cy as B,al as $,a1 as R}from"./index-58aa78ac.js";import{u as S,a as V,k as E,F as A,d as T}from"./FileItem-6f2c42a7.js";import"./functionalCallableComp-6dc127fa.js";/* empty css              */import"./index-a5a392f6.js";const L={class:"actions-panel actions"},N={key:0,class:"file-list"},U={class:"hint"},H=v({__name:"batchDownload",props:{tabIdx:{},paneIdx:{},id:{}},setup(O){const{stackViewEl:w}=S().toRefs(),{itemSize:p,gridItems:k,cellWidth:b}=V(),n=E(),{selectdFiles:l}=C(n),u=I(),y=async t=>{const a=z(t);a&&n.addFiles(a.nodes)},D=async()=>{u.pushAction(async()=>{const t=await B.value.post("/zip",{paths:l.value.map(o=>o.fullpath)},{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",`iib_${new Date().toLocaleString()}.zip`),document.body.appendChild(s),s.click()})},g=t=>{l.value.splice(t,1)};return(t,a)=>{const s=$;return i(),_("div",{class:"container",ref_key:"stackViewEl",ref:w,onDrop:y},[f("div",L,[c(s,{onClick:a[0]||(a[0]=o=>e(n).selectdFiles=[])},{default:r(()=>[h(d(t.$t("clear")),1)]),_:1}),c(s,{onClick:D,type:"primary",loading:!e(u).isIdle},{default:r(()=>[h(d(t.$t("zipDownload")),1)]),_:1},8,["loading"])]),e(l).length?(i(),F(e(T),{key:1,ref:"scroller",class:"file-list",items:e(l).slice(),"item-size":e(p).first,"key-field":"fullpath","item-secondary-size":e(p).second,gridItems:e(k)},{default:r(({item:o,index:m})=>[c(A,{idx:m,file:o,"cell-width":e(b),"enable-close-icon":"",onCloseIconClick:W=>g(m),"full-screen-preview-image-url":e(x)(o),"enable-right-click-menu":!1},null,8,["idx","file","cell-width","onCloseIconClick","full-screen-preview-image-url"])]),_:1},8,["items","item-size","item-secondary-size","gridItems"])):(i(),_("div",N,[f("p",U,d(t.$t("batchDownloaDDragAndDropHint")),1)]))],544)}}});const Z=R(H,[["__scopeId","data-v-aab31da2"]]);export{Z as default};
