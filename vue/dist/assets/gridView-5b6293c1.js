import{u as w,b as y,F as k,g as b}from"./FileItem-0615b03c.js";import{d as F,k as h,c1 as x,$ as D,b2 as I,b6 as C,o as E,y as V,c as r,n as z,r as e,L as S,cb as B,cd as R,X as $}from"./index-872ef657.js";import"./shortcut-34e39412.js";const A=F({__name:"gridView",props:{tabIdx:{},paneIdx:{},id:{},removable:{type:Boolean},allowDragAndDrop:{type:Boolean},files:{},paneKey:{}},setup(d){const l=d,p=h(),{stackViewEl:u}=w().toRefs(),{itemSize:i,gridItems:m,cellWidth:g}=y(),f=x(),s=D(l.files??[]),_=async a=>{const o=B(a);l.allowDragAndDrop&&o&&(s.value=R([...s.value,...o.nodes]))},v=a=>{s.value.splice(a,1)};return I(()=>{p.pageFuncExportMap.set(l.paneKey,{getFiles:()=>C(s.value),setFiles:a=>s.value=a})}),(a,o)=>(E(),V("div",{class:"container",ref_key:"stackViewEl",ref:u,onDrop:_},[r(e(b),{ref:"scroller",class:"file-list",items:s.value.slice(),"item-size":e(i).first,"key-field":"fullpath","item-secondary-size":e(i).second,gridItems:e(m)},{default:z(({item:t,index:n})=>{var c;return[r(k,{idx:n,file:t,"cell-width":e(g),"enable-close-icon":l.removable,onCloseIconClick:K=>v(n),"full-screen-preview-image-url":e(S)(t),tags:(c=t==null?void 0:t.tags)==null?void 0:c.map(e(f).tagConvert),"enable-right-click-menu":!1},null,8,["idx","file","cell-width","enable-close-icon","onCloseIconClick","full-screen-preview-image-url","tags"])]}),_:1},8,["items","item-size","item-secondary-size","gridItems"])],544))}});const H=$(A,[["__scopeId","data-v-d663e84e"]]);export{H as default};
