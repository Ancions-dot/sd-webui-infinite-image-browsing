import{d as K,$ as O,r as W,m as z,n as H,S as b,T as w,c as t,a1 as a,a2 as e,z as r,a0 as C,Y as S,U as p,X as I,aI as Q,E as X,W as g,V as _,aa as U,aN as Y,ab as Z,a6 as A,a3 as V,a7 as j,aO as q,aP as J,aQ as ee,aR as te,ai as B,ah as le,Z as ae}from"./index-8049db06.js";import{N as x,_ as F,F as ne}from"./numInput-eaae8d26.js";import"./index-939e7fd1.js";/* empty css              *//* empty css              */import{_ as D,g as oe,C as se}from"./shortcut-8ae2d17b.js";/* empty css              */import{a as de}from"./functionalCallableComp-127db4a5.js";import"./Checkbox-b6df5e2c.js";const R="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ue=["width","height","src"],ie=K({__name:"ImageSetting",setup(N){function n(y,i){return new Promise(c=>{const m=new Image;m.onload=()=>{const u=document.createElement("canvas");u.width=m.width*i,u.height=m.height*i,u.getContext("2d").drawImage(m,0,0,u.width,u.height),c(u.toDataURL())},m.src=y})}const o=O(),v=W("");return z(()=>[o.enableThumbnail,o.gridThumbnailResolution],H(async()=>{o.enableThumbnail&&(v.value=await n(R,o.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(y,i)=>{const c=F,m=D;return b(),w(I,null,[t(c,{label:e(r)("defaultGridCellWidth")},{default:a(()=>[t(x,{min:64,max:1024,step:16,modelValue:e(o).defaultGridCellWidth,"onUpdate:modelValue":i[0]||(i[0]=u=>e(o).defaultGridCellWidth=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(r)("useThumbnailPreview")},{default:a(()=>[t(m,{checked:e(o).enableThumbnail,"onUpdate:checked":i[1]||(i[1]=u=>e(o).enableThumbnail=u)},null,8,["checked"])]),_:1},8,["label"]),e(o).enableThumbnail?(b(),C(c,{key:0,label:e(r)("thumbnailResolution")},{default:a(()=>[t(x,{modelValue:e(o).gridThumbnailResolution,"onUpdate:modelValue":i[2]||(i[2]=u=>e(o).gridThumbnailResolution=u),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):S("",!0),t(c,{label:e(r)("livePreview")},{default:a(()=>[p("div",null,[p("img",{width:e(o).defaultGridCellWidth,height:e(o).defaultGridCellWidth,src:e(o).enableThumbnail?v.value:e(R)},null,8,ue)])]),_:1},8,["label"]),t(c,{label:e(r)("defaultShowChangeIndicators")},{default:a(()=>[t(m,{checked:e(o).defaultChangeIndchecked,"onUpdate:checked":i[3]||(i[3]=u=>e(o).defaultChangeIndchecked=u)},null,8,["checked"])]),_:1},8,["label"]),e(o).defaultChangeIndchecked?(b(),C(c,{key:1,label:e(r)("defaultSeedAsChange")},{default:a(()=>[t(m,{checked:e(o).defaultSeedChangeChecked,"onUpdate:checked":i[4]||(i[4]=u=>e(o).defaultSeedChangeChecked=u)},null,8,["checked"])]),_:1},8,["label"])):S("",!0),t(c,{label:e(r)("previewMaskBackgroundOpacity")},{default:a(()=>[t(x,{min:0,max:1,step:.05,modelValue:e(o).previewBgOpacity,"onUpdate:modelValue":i[5]||(i[5]=u=>e(o).previewBgOpacity=u)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),re={class:"panel"},ce={style:{"margin-top":"0"}},pe={class:"lang-select-wrap"},me={class:"col"},he={class:"col"},ge={class:"col"},be={class:"col"},fe=K({__name:"globalSetting",setup(N){const n=O(),o=Q(),v=W(!1),y=async()=>{window.location.reload()},i=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],c=(d,l)=>{const $=oe(d);$&&(n.shortcut[l]=$)},m=async()=>{await q("shutdown_api_server_command"),await J.removeFile(ee),await te()},u=X(()=>[{value:"empty",text:r("emptyStartPage")},{value:"last-workspace-state",text:r("restoreLastWorkspaceState")},...o.snapshots.map(l=>({value:`workspace_snapshot_${l.id}`,text:r("restoreWorkspaceSnapshot",[l.name])}))]);return(d,l)=>{const $=B,h=F,M=D,k=B,G=se,T=le,E=ne;return b(),w("div",re,[S("",!0),t(E,null,{default:a(()=>{var P;return[p("h2",ce,g(e(r)("ImageBrowsingSettings")),1),t(ie),p("h2",null,g(e(r)("imgSearch")),1),t(h,{label:d.$t("rebuildImageIndex")},{default:a(()=>[t($,{onClick:e(de)},{default:a(()=>[_(g(d.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),p("h2",null,g(e(r)("other")),1),t(h,{label:d.$t("onlyFoldersAndImages")},{default:a(()=>[t(M,{checked:e(n).onlyFoldersAndImages,"onUpdate:checked":l[0]||(l[0]=s=>e(n).onlyFoldersAndImages=s)},null,8,["checked"])]),_:1},8,["label"]),t(h,{label:d.$t("defaultSortingMethod")},{default:a(()=>[t(e(U),{value:e(n).defaultSortingMethod,"onUpdate:value":l[1]||(l[1]=s=>e(n).defaultSortingMethod=s),conv:e(Y),options:e(Z)},null,8,["value","conv","options"])]),_:1},8,["label"]),t(h,{label:d.$t("longPressOpenContextMenu")},{default:a(()=>[t(M,{checked:e(n).longPressOpenContextMenu,"onUpdate:checked":l[2]||(l[2]=s=>e(n).longPressOpenContextMenu=s)},null,8,["checked"])]),_:1},8,["label"]),t(h,{label:d.$t("openOnAppStart")},{default:a(()=>[t(e(U),{value:e(n).defaultInitinalPage,"onUpdate:value":l[3]||(l[3]=s=>e(n).defaultInitinalPage=s),options:u.value},null,8,["value","options"])]),_:1},8,["label"]),t(h,{label:d.$t("lang")},{default:a(()=>[p("div",pe,[t(e(U),{options:i,value:e(n).lang,"onUpdate:value":l[4]||(l[4]=s=>e(n).lang=s),onChange:l[5]||(l[5]=s=>v.value=!0)},null,8,["value"])]),v.value?(b(),C(k,{key:0,type:"primary",onClick:y,ghost:""},{default:a(()=>[_(g(e(r)("langChangeReload")),1)]),_:1})):S("",!0)]),_:1},8,["label"]),(b(!0),w(I,null,A(e(n).ignoredConfirmActions,(s,f)=>(b(),C(h,{label:d.$t(f+"SkipConfirm"),key:f},{default:a(()=>[t(G,{checked:e(n).ignoredConfirmActions[f],"onUpdate:checked":L=>e(n).ignoredConfirmActions[f]=L},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),p("h2",null,g(e(r)("shortcutKey")),1),t(h,{label:d.$t("download")},{default:a(()=>[p("div",me,[t(T,{value:e(n).shortcut.download,onKeydown:l[6]||(l[6]=V(s=>c(s,"download"),["stop","prevent"])),placeholder:d.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(k,{onClick:l[7]||(l[7]=s=>e(n).shortcut.download=""),class:"clear-btn"},{default:a(()=>[_(g(d.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),t(h,{label:d.$t("deleteSelected")},{default:a(()=>[p("div",he,[t(T,{value:e(n).shortcut.delete,onKeydown:l[8]||(l[8]=V(s=>c(s,"delete"),["stop","prevent"])),placeholder:d.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(k,{onClick:l[9]||(l[9]=s=>e(n).shortcut.delete=""),class:"clear-btn"},{default:a(()=>[_(g(d.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(b(!0),w(I,null,A(((P=e(n).conf)==null?void 0:P.all_custom_tags)??[],s=>(b(),C(h,{label:d.$t("toggleTagSelection",{tag:s.name}),key:s.id},{default:a(()=>[p("div",ge,[t(T,{value:e(n).shortcut[`toggle_tag_${s.name}`],onKeydown:V(f=>c(f,`toggle_tag_${s.name}`),["stop","prevent"]),placeholder:d.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),t(k,{onClick:f=>e(n).shortcut[`toggle_tag_${s.name}`]="",class:"clear-btn"},{default:a(()=>[_(g(d.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(j)?(b(),w(I,{key:0},[p("h2",null,g(e(r)("clientSpecificSettings")),1),t(h,null,{default:a(()=>[p("div",be,[t(k,{onClick:m,class:"clear-btn"},{default:a(()=>[_(g(d.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):S("",!0)]}),_:1})])}}});const Te=ae(fe,[["__scopeId","data-v-b3189bd2"]]);export{Te as default};
