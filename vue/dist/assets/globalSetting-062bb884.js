import{d as R,X as K,r as W,k as H,l as z,O as f,Q as w,c as t,Z as a,$ as e,x as r,Y as C,V as S,R as p,U as I,aH as Q,B as X,T as g,S as _,a7 as U,aM as Y,a8 as Z,a3 as P,a0 as V,a4 as j,aN as q,aO as J,aP as ee,aQ as te,ag as A,af as le,W as ae}from"./index-1961a2a7.js";import{N as x,_ as F,F as ne}from"./numInput-813ff52e.js";import"./index-7e005f25.js";/* empty css              *//* empty css              */import{_ as D,g as oe,C as se}from"./shortcut-14bd4711.js";/* empty css              */import{a as de}from"./functionalCallableComp-0536b145.js";import"./Checkbox-0e82a685.js";const O="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ue=["width","height","src"],ie=R({__name:"ImageSetting",setup(N){function n(y,i){return new Promise(c=>{const m=new Image;m.onload=()=>{const u=document.createElement("canvas");u.width=m.width*i,u.height=m.height*i,u.getContext("2d").drawImage(m,0,0,u.width,u.height),c(u.toDataURL())},m.src=y})}const o=K(),v=W("");return H(()=>[o.enableThumbnail,o.gridThumbnailResolution],z(async()=>{o.enableThumbnail&&(v.value=await n(O,o.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(y,i)=>{const c=F,m=D;return f(),w(I,null,[t(c,{label:e(r)("defaultGridCellWidth")},{default:a(()=>[t(x,{min:64,max:1024,step:16,modelValue:e(o).defaultGridCellWidth,"onUpdate:modelValue":i[0]||(i[0]=u=>e(o).defaultGridCellWidth=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:e(r)("useThumbnailPreview")},{default:a(()=>[t(m,{checked:e(o).enableThumbnail,"onUpdate:checked":i[1]||(i[1]=u=>e(o).enableThumbnail=u)},null,8,["checked"])]),_:1},8,["label"]),e(o).enableThumbnail?(f(),C(c,{key:0,label:e(r)("thumbnailResolution")},{default:a(()=>[t(x,{modelValue:e(o).gridThumbnailResolution,"onUpdate:modelValue":i[2]||(i[2]=u=>e(o).gridThumbnailResolution=u),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):S("",!0),t(c,{label:e(r)("livePreview")},{default:a(()=>[p("div",null,[p("img",{width:e(o).defaultGridCellWidth,height:e(o).defaultGridCellWidth,src:e(o).enableThumbnail?v.value:e(O)},null,8,ue)])]),_:1},8,["label"]),t(c,{label:e(r)("defaultShowChangeIndicators")},{default:a(()=>[t(m,{checked:e(o).defaultChangeIndchecked,"onUpdate:checked":i[3]||(i[3]=u=>e(o).defaultChangeIndchecked=u)},null,8,["checked"])]),_:1},8,["label"]),e(o).defaultChangeIndchecked?(f(),C(c,{key:1,label:e(r)("defaultSeedAsChange")},{default:a(()=>[t(m,{checked:e(o).defaultSeedChangeChecked,"onUpdate:checked":i[4]||(i[4]=u=>e(o).defaultSeedChangeChecked=u)},null,8,["checked"])]),_:1},8,["label"])):S("",!0),t(c,{label:e(r)("previewMaskBackgroundOpacity")},{default:a(()=>[t(x,{min:0,max:1,step:.05,modelValue:e(o).previewBgOpacity,"onUpdate:modelValue":i[5]||(i[5]=u=>e(o).previewBgOpacity=u)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),re={class:"panel"},ce={style:{"margin-top":"0"}},pe={class:"lang-select-wrap"},me={class:"col"},he={class:"col"},ge={class:"col"},fe={class:"col"},be=R({__name:"globalSetting",setup(N){const n=K(),o=Q(),v=W(!1),y=async()=>{window.location.reload()},i=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],c=(d,l)=>{const $=oe(d);$&&(n.shortcut[l]=$)},m=async()=>{await q("shutdown_api_server_command"),await J.removeFile(ee),await te()},u=X(()=>[{value:"empty",text:r("emptyStartPage")},{value:"last-workspace-state",text:r("restoreLastWorkspaceState")},...o.snapshots.map(l=>({value:`workspace_snapshot_${l.id}`,text:r("restoreWorkspaceSnapshot",[l.name])}))]);return(d,l)=>{const $=A,h=F,M=D,k=A,G=se,T=le,E=ne;return f(),w("div",re,[S("",!0),t(E,null,{default:a(()=>{var B;return[p("h2",ce,g(e(r)("ImageBrowsingSettings")),1),t(ie),p("h2",null,g(e(r)("imgSearch")),1),t(h,{label:d.$t("rebuildImageIndex")},{default:a(()=>[t($,{onClick:e(de)},{default:a(()=>[_(g(d.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),p("h2",null,g(e(r)("other")),1),t(h,{label:d.$t("onlyFoldersAndImages")},{default:a(()=>[t(M,{checked:e(n).onlyFoldersAndImages,"onUpdate:checked":l[0]||(l[0]=s=>e(n).onlyFoldersAndImages=s)},null,8,["checked"])]),_:1},8,["label"]),t(h,{label:d.$t("defaultSortingMethod")},{default:a(()=>[t(e(U),{value:e(n).defaultSortingMethod,"onUpdate:value":l[1]||(l[1]=s=>e(n).defaultSortingMethod=s),conv:e(Y),options:e(Z)},null,8,["value","conv","options"])]),_:1},8,["label"]),t(h,{label:d.$t("longPressOpenContextMenu")},{default:a(()=>[t(M,{checked:e(n).longPressOpenContextMenu,"onUpdate:checked":l[2]||(l[2]=s=>e(n).longPressOpenContextMenu=s)},null,8,["checked"])]),_:1},8,["label"]),t(h,{label:d.$t("openOnAppStart")},{default:a(()=>[t(e(U),{value:e(n).defaultInitinalPage,"onUpdate:value":l[3]||(l[3]=s=>e(n).defaultInitinalPage=s),options:u.value},null,8,["value","options"])]),_:1},8,["label"]),t(h,{label:d.$t("lang")},{default:a(()=>[p("div",pe,[t(e(U),{options:i,value:e(n).lang,"onUpdate:value":l[4]||(l[4]=s=>e(n).lang=s),onChange:l[5]||(l[5]=s=>v.value=!0)},null,8,["value"])]),v.value?(f(),C(k,{key:0,type:"primary",onClick:y,ghost:""},{default:a(()=>[_(g(e(r)("langChangeReload")),1)]),_:1})):S("",!0)]),_:1},8,["label"]),(f(!0),w(I,null,P(e(n).ignoredConfirmActions,(s,b)=>(f(),C(h,{label:d.$t(b+"SkipConfirm"),key:b},{default:a(()=>[t(G,{checked:e(n).ignoredConfirmActions[b],"onUpdate:checked":L=>e(n).ignoredConfirmActions[b]=L},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),p("h2",null,g(e(r)("shortcutKey")),1),t(h,{label:d.$t("download")},{default:a(()=>[p("div",me,[t(T,{value:e(n).shortcut.download,onKeydown:l[6]||(l[6]=V(s=>c(s,"download"),["stop","prevent"])),placeholder:d.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(k,{onClick:l[7]||(l[7]=s=>e(n).shortcut.download=""),class:"clear-btn"},{default:a(()=>[_(g(d.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),t(h,{label:d.$t("deleteSelected")},{default:a(()=>[p("div",he,[t(T,{value:e(n).shortcut.delete,onKeydown:l[8]||(l[8]=V(s=>c(s,"delete"),["stop","prevent"])),placeholder:d.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(k,{onClick:l[9]||(l[9]=s=>e(n).shortcut.delete=""),class:"clear-btn"},{default:a(()=>[_(g(d.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(f(!0),w(I,null,P(((B=e(n).conf)==null?void 0:B.all_custom_tags)??[],s=>(f(),C(h,{label:d.$t("toggleTagSelection",{tag:s.name}),key:s.id},{default:a(()=>[p("div",ge,[t(T,{value:e(n).shortcut[`toggle_tag_${s.name}`],onKeydown:V(b=>c(b,`toggle_tag_${s.name}`),["stop","prevent"]),placeholder:d.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),t(k,{onClick:b=>e(n).shortcut[`toggle_tag_${s.name}`]="",class:"clear-btn"},{default:a(()=>[_(g(d.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(j)?(f(),w(I,{key:0},[p("h2",null,g(e(r)("clientSpecificSettings")),1),t(h,null,{default:a(()=>[p("div",fe,[t(k,{onClick:m,class:"clear-btn"},{default:a(()=>[_(g(d.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):S("",!0)]}),_:1})])}}});const Te=ae(be,[["__scopeId","data-v-b3189bd2"]]);export{Te as default};
