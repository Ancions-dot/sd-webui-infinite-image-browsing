import{d as de,u as Ve,g as le,_ as ut,c as u,a as Le,P as be,D as Be,f as ct,w as Ot,b as Lt,e as Bt,h as et,M as Ne,i as Nt,j as Rt,F as Re,A as dt,r as ie,k as Ee,l as tt,o as Et,m as Pe,n as zt,p as at,s as Ae,q as jt,t as $e,v as Y,x as nt,y as Tt,z as xe,B as Fe,C as pt,E as ze,G as Vt,H as De,I as Ut,J as Wt,K as Gt,L as D,N as T,O as _,Q as Z,R as P,S as je,T as G,U as ft,V as qt,W as U,X as C,Y as e,Z as S,$ as W,a0 as Ht,a1 as st,a2 as Kt,a3 as Qt,a4 as Jt,a5 as Xt,a6 as Yt,a7 as Zt,a8 as ea,a9 as ot,aa as ta,ab as aa,ac as na,ad as sa,ae as oa,af as ra}from"./index-ea35fc22.js";import{S as ue,s as la}from"./index-d0dd3d4d.js";import{F as q,N as ia,_ as ua,a as ca}from"./numInput-d0a2e88e.js";/* empty css              */import{D as vt}from"./index-00968932.js";/* empty css              *//* empty css              */import{u as Ue,N as da,g as M,s as mt,a as pa,b as fa,c as va,d as ma,F as ga}from"./FileItem-2d52fcd1.js";import{u as ha,a as ka,b as ba,c as ya,M as Ca,L as _a,R as wa,f as Ia}from"./MultiSelectKeep-484d4e63.js";import{g as ke,l as Me,o as Sa}from"./functionalCallableComp-fd82f4ba.js";import"./shortcut-7906f123.js";import"./Checkbox-560b47ff.js";var Pa=["class","style"],Aa=function(){return{prefixCls:String,href:String,separator:be.any,overlay:be.any,onClick:Function}};const ce=de({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Aa(),slots:["separator","overlay"],setup:function(t,d){var o=d.slots,f=d.attrs,m=Ve("breadcrumb",t),A=m.prefixCls,g=function(l,b){var c=le(o,t,"overlay");return c?u(vt,{overlay:c,placement:"bottom"},{default:function(){return[u("span",{class:"".concat(b,"-overlay-link")},[l,u(Be,null,null)])]}}):l};return function(){var k,l=(k=le(o,t,"separator"))!==null&&k!==void 0?k:"/",b=le(o,t),c=f.class,w=f.style,h=ut(f,Pa),I;return t.href!==void 0?I=u("a",Le({class:"".concat(A.value,"-link"),onClick:t.onClick},h),[b]):I=u("span",Le({class:"".concat(A.value,"-link"),onClick:t.onClick},h),[b]),I=g(I,A.value),b?u("span",{class:c,style:w},[I,l&&u("span",{class:"".concat(A.value,"-separator")},[l])]):null}}});var $a=function(){return{prefixCls:String,routes:{type:Array},params:be.any,separator:be.any,itemRender:{type:Function}}};function xa(s,t){if(!s.breadcrumbName)return null;var d=Object.keys(t).join("|"),o=s.breadcrumbName.replace(new RegExp(":(".concat(d,")"),"g"),function(f,m){return t[m]||f});return o}function rt(s){var t=s.route,d=s.params,o=s.routes,f=s.paths,m=o.indexOf(t)===o.length-1,A=xa(t,d);return m?u("span",null,[A]):u("a",{href:"#/".concat(f.join("/"))},[A])}const ae=de({compatConfig:{MODE:3},name:"ABreadcrumb",props:$a(),slots:["separator","itemRender"],setup:function(t,d){var o=d.slots,f=Ve("breadcrumb",t),m=f.prefixCls,A=f.direction,g=function(c,w){return c=(c||"").replace(/^\//,""),Object.keys(w).forEach(function(h){c=c.replace(":".concat(h),w[h])}),c},k=function(c,w,h){var I=Nt(c),v=g(w||"",h);return v&&I.push(v),I},l=function(c){var w=c.routes,h=w===void 0?[]:w,I=c.params,v=I===void 0?{}:I,R=c.separator,B=c.itemRender,L=B===void 0?rt:B,O=[];return h.map(function($){var j=g($.path,v);j&&O.push(j);var H=[].concat(O),K=null;return $.children&&$.children.length&&(K=u(Ne,null,{default:function(){return[$.children.map(function(z){return u(Ne.Item,{key:z.path||z.breadcrumbName},{default:function(){return[L({route:z,params:v,routes:h,paths:k(H,z.path,v)})]}})})]}})),u(ce,{overlay:K,separator:R,key:j||$.breadcrumbName},{default:function(){return[L({route:$,params:v,routes:h,paths:H})]}})})};return function(){var b,c,w,h=t.routes,I=t.params,v=I===void 0?{}:I,R=ct(le(o,t)),B=(b=le(o,t,"separator"))!==null&&b!==void 0?b:"/",L=t.itemRender||o.itemRender||rt;h&&h.length>0?w=l({routes:h,params:v,separator:B,itemRender:L}):R.length&&(w=R.map(function($,j){return Ot(Lt($.type)==="object"&&($.type.__ANT_BREADCRUMB_ITEM||$.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Bt($,{separator:B,key:j})}));var O=(c={},et(c,m.value,!0),et(c,"".concat(m.value,"-rtl"),A.value==="rtl"),c);return u("div",{class:O},[w])}}});var Fa=["separator","class"],Da=function(){return{prefixCls:String}};const Te=de({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Da(),setup:function(t,d){var o=d.slots,f=d.attrs,m=Ve("breadcrumb",t),A=m.prefixCls;return function(){var g;f.separator;var k=f.class,l=ut(f,Fa),b=ct((g=o.default)===null||g===void 0?void 0:g.call(o));return u("span",Le({class:["".concat(A.value,"-separator"),k]},l),[b.length>0?b:"/"])}}});ae.Item=ce;ae.Separator=Te;ae.install=function(s){return s.component(ae.name,ae),s.component(ce.name,ce),s.component(Te.name,Te),s};q.useInjectFormItemContext=Rt;q.ItemRest=Re;q.install=function(s){return s.component(q.name,q),s.component(q.Item.name,q.Item),s.component(Re.name,Re),s};ue.setDefaultIndicator=la;ue.install=function(s){return s.component(ue.name,ue),s};var Ma={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const Oa=Ma;function lt(s){for(var t=1;t<arguments.length;t++){var d=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(d).filter(function(f){return Object.getOwnPropertyDescriptor(d,f).enumerable}))),o.forEach(function(f){La(s,f,d[f])})}return s}function La(s,t,d){return t in s?Object.defineProperty(s,t,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[t]=d,s}var We=function(t,d){var o=lt({},t,d.attrs);return u(dt,lt({},o,{icon:Oa}),null)};We.displayName="ArrowLeftOutlined";We.inheritAttrs=!1;const Ba=We;var Na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Ra=Na;function it(s){for(var t=1;t<arguments.length;t++){var d=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(d).filter(function(f){return Object.getOwnPropertyDescriptor(d,f).enumerable}))),o.forEach(function(f){Ea(s,f,d[f])})}return s}function Ea(s,t,d){return t in s?Object.defineProperty(s,t,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[t]=d,s}var Ge=function(t,d){var o=it({},t,d.attrs);return u(dt,it({},o,{icon:Ra}),null)};Ge.displayName="DatabaseOutlined";Ge.inheritAttrs=!1;const za=Ge;function ja(){const s=ie(),{scroller:t,stackViewEl:d,stack:o,currPage:f,currLocation:m,useEventListen:A,eventEmitter:g,getPane:k,props:l,deletedFiles:b,walker:c,sortedFiles:w}=Ue().toRefs();Ee(()=>o.value.length,tt((a,i)=>{var p;a!==i&&((p=t.value)==null||p.scrollToItem(0))},300));const h=async a=>{var i;await O(a),l.value.mode==="walk"&&(await pt(),await((i=c.value)==null?void 0:i.reset()),g.value.emit("loadNextDir"))};Et(async()=>{var a;if(!o.value.length)if(l.value.mode==="scanned-fixed")o.value=[{files:[],curr:""}];else{const i=await ke("/");o.value.push({files:i.files,curr:"/"})}s.value=new da,s.value.configure({parent:d.value}),l.value.path&&l.value.path!=="/"?await h(l.value.path):(a=M.conf)!=null&&a.home&&O(M.conf.home)}),Ee(m,tt(a=>{const i=k.value();if(!i)return;i.path=a;const p=i.path.split("/").pop()??"",F=(()=>{const E={walk:"Walk","scanned-fixed":"Fixed",scanned:null}[l.value.mode??"scanned"],N=V=>E?`${E}: ${V}`:V,X=Fe(a);for(const[V,oe]of Object.entries(M.pathAliasMap))if(X.startsWith(oe))return N(X.replace(oe,V));return N(p)})();i.name=Pe("div",{style:"display:flex;align-items:center"},[Pe(za),Pe("span",{class:"line-clamp-1",style:"max-width: 256px"},F)]),i.nameFallbackStr=F,M.recent=M.recent.filter(E=>E.key!==i.key),M.recent.unshift({path:a,key:i.key}),M.recent.length>20&&(M.recent=M.recent.slice(0,20))},300));const I=()=>ze(m.value),v=async a=>{var i,p;if(a.type==="dir")try{(i=s.value)==null||i.start();const{files:x}=await ke(a.fullpath);l.value.mode=="scanned-fixed"?o.value=[{files:x,curr:a.fullpath}]:o.value.push({files:x,curr:a.name})}finally{(p=s.value)==null||p.done()}},R=a=>{for(;a<o.value.length-1;)o.value.pop()},B=()=>{const a=at(...Ae(m.value).slice(0,-1));O(a)},L=(a,i)=>(Vt(M.conf,"global.conf load failed"),M.conf.is_win?a.toLowerCase()==i.toLowerCase():a==i),O=async a=>{var p,x;if(l.value.mode==="scanned-fixed")return v({fullpath:a,name:a,type:"dir"});const i=o.value.slice();try{zt(a)||(a=at(((p=M.conf)==null?void 0:p.sd_cwd)??"/",a));const F=Ae(a),E=o.value.map(N=>N.curr);for(E.shift();E[0]&&F[0]&&L(E[0],F[0]);)E.shift(),F.shift();for(let N=0;N<E.length;N++)o.value.pop();if(!F.length)return $();for(const N of F){const X=(x=f.value)==null?void 0:x.files.find(V=>L(V.name,N));if(!X)throw console.error({frags:F,frag:N,stack:jt(o.value)}),new Error(`${N} not found`);await v(X)}}catch(F){throw $e.error(Y("moveFailedCheckPath")+(F instanceof Error?F.message:"")),console.error(a,Ae(a),f.value),o.value=i,F}},$=nt(async()=>{var a,i,p;try{if((a=s.value)==null||a.start(),c.value)await c.value.reset(),g.value.emit("loadNextDir");else{const{files:x}=await ke(o.value.length===1&&l.value.mode!=="scanned-fixed"?"/":m.value);Me(o.value).files=x}b.value.clear(),(i=t.value)==null||i.scrollToItem(0),$e.success(Y("refreshCompleted"))}finally{(p=s.value)==null||p.done()}});Tt("returnToIIB",nt(async()=>{var a,i;if(l.value.mode!=="walk")try{(a=s.value)==null||a.start();const{files:p}=await ke(o.value.length===1&&l.value.mode!=="scanned-fixed"?"/":m.value);Me(o.value).files.map(F=>F.date).join()!==p.map(F=>F.date).join()&&(Me(o.value).files=p,$e.success(Y("autoUpdate")))}finally{(i=s.value)==null||i.done()}})),A.value("refresh",$);const j=a=>{h(a)},H=xe(()=>M.quickMovePaths.map(a=>({...a,path:Fe(a.dir)}))),K=xe(()=>{const a=Fe(m.value);return H.value.find(p=>p.path===a)}),ee=async()=>{const a=M.tabList[l.value.tabIdx],i={type:"empty",name:Y("emptyStartPage"),key:Date.now()+De(),popAddPathModal:{path:m.value,type:"scanned"}};a.panes.push(i),a.key=i.key},z=ie(!1),Q=ie(m.value),pe=()=>{z.value=!0,Q.value=m.value},ye=async()=>{await O(Q.value),z.value=!1};ha("click",a=>{var i,p,x;(x=(p=(i=a.target)==null?void 0:i.className)==null?void 0:p.includes)!=null&&x.call(p,"ant-input")||(z.value=!1)});const Ce=()=>{const a=parent.location,i=a.href.substring(0,a.href.length-a.search.length),p=new URLSearchParams(a.search);p.set("action","open"),c.value&&p.set("walk","1"),p.set("path",m.value),p.set("mode",l.value.mode??"scanned");const x=`${i}?${p.toString()}`;ze(x,Y("copyLocationUrlSuccessMsg"))},ne=(a="tag-search")=>{const i=M.tabList[l.value.tabIdx],p={type:a,key:De(),searchScope:m.value,name:Y(a==="tag-search"?"imgSearch":"fuzzy-search")};i.panes.push(p),i.key=p.key},J=()=>g.value.emit("selectAll"),se=async()=>{await Sa(m.value),await $()},fe=()=>{const a=m.value;mt.set(a,o.value);const i=M.tabList[l.value.tabIdx],p={type:"local",key:De(),path:a,name:Y("local"),stackKey:a,mode:"walk"};i.panes.push(p),i.key=p.key},_e=xe(()=>!c.value&&w.value.some(a=>a.type==="dir"));return{locInputValue:Q,isLocationEditing:z,onLocEditEnter:ye,onEditBtnClick:pe,addToSearchScanPathAndQuickMove:ee,searchPathInfo:K,refresh:$,copyLocation:I,back:R,openNext:v,currPage:f,currLocation:m,to:O,stack:o,scroller:t,share:Ce,selectAll:J,quickMoveTo:j,onCreateFloderBtnClick:se,onWalkBtnClick:fe,showWalkButton:_e,searchInCurrentDir:ne,backToLastUseTo:B}}const Oe=new Map,Ta=()=>{const{useEventListen:s,sortedFiles:t}=Ue().toRefs(),d=ie(M.defaultChangeIndchecked),o=ie(M.defaultSeedChangeChecked),f=async({files:g})=>{if(await pt(100),!d.value||(g=g.filter(l=>Ut(l.fullpath)&&!l.gen_info_obj),!g.length))return;const k=await Wt(g.map(l=>l.fullpath).filter(l=>!Oe.has(l)));g.forEach(l=>{const b=k[l.fullpath]||Oe.get(l.fullpath)||"";Oe.set(l.fullpath,b),l.gen_info_obj=Gt(b),l.gen_info_raw=b})};s.value("viewableAreaFilesChange",f);const m=g=>{const k=t.value;return[g,o.value,k[g-1],k[g],k[g+1]]};function A(g,k,l,b){const c={diff:{},empty:!0,ownFile:"",otherFile:""};if(k+l<0||k+l>=t.value.length||t.value[k]==null||!("gen_info_obj"in t.value[k])||!("gen_info_obj"in t.value[k+l]))return c;const w=g,h=t.value[k+l].gen_info_obj;if(h==null)return c;const I=["hashes","resources"];c.diff={},c.ownFile=b.name,c.otherFile=t.value[k+l].name,c.empty=!1,o.value||I.push("seed");for(const v in w)if(!I.includes(v)){if(!(v in h)){c.diff[v]="+";continue}if(w[v]!=h[v])if(v.includes("rompt")&&w[v]!=""&&h[v]!=""){const R=w[v].split(","),B=h[v].split(",");let L=0;for(const O in R)R[O]!=B[O]&&L++;c.diff[v]=L}else c.diff[v]=[w[v],h[v]]}return c}return{getGenDiff:A,changeIndchecked:d,seedChangeChecked:o,getRawGenParams:()=>f({files:t.value,startIdx:0}),getGenDiffWatchDep:m}};const Va={class:"base-info"},Ua=de({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(s){return(t,d)=>(D(),T("div",Va,[_("span",null,[Z(P(t.$t("items",[t.fileNum]))+" ",1),t.selectedFileNum?(D(),T(je,{key:0},[Z(", "+P(t.$t("selectedItems",[t.selectedFileNum])),1)],64)):G("",!0)])]))}});const Wa=ft(Ua,[["__scopeId","data-v-afd25667"]]),Ga={class:"hint"},qa={class:"location-bar"},Ha=["onClick"],Ka={key:3,class:"location-act"},Qa={class:"actions"},Ja=["onClick"],Xa={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Ya={style:{padding:"4px"}},Za={style:{padding:"4px"}},en={style:{padding:"4px"}},tn={key:0,class:"view"},an={style:{padding:"16px 0 512px"}},nn={key:0,class:"preview-switch"},sn=de({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(s){const t=s,d=qt(),{scroller:o,stackViewEl:f,props:m,multiSelectedIdxs:A,spinning:g}=Ue().toRefs(),{currLocation:k,currPage:l,refresh:b,copyLocation:c,back:w,openNext:h,stack:I,quickMoveTo:v,addToSearchScanPathAndQuickMove:R,locInputValue:B,isLocationEditing:L,onLocEditEnter:O,onEditBtnClick:$,share:j,selectAll:H,onCreateFloderBtnClick:K,onWalkBtnClick:ee,showWalkButton:z,searchInCurrentDir:Q,backToLastUseTo:pe}=ja(),{gridItems:ye,sortMethodConv:Ce,moreActionsDropdownShow:ne,sortedFiles:J,sortMethod:se,itemSize:fe,loadNextDir:_e,loadNextDirLoading:a,canLoadNext:i,onScroll:p,cellWidth:x,dirCoverCache:F}=pa(),{onDrop:E,onFileDragStart:N,onFileDragEnd:X}=ka(),{onFileItemClick:V,onContextMenuClick:oe,showGenInfo:ve,imageGenInfo:qe,q:gt}=ba({openNext:h}),{previewIdx:me,onPreviewVisibleChange:ht,previewing:He,previewImgMove:Ke,canPreview:Qe}=ya(),{showMenuIdx:we}=fa(),{onClearAllSelected:kt,onReverseSelect:bt,onSelectAll:yt}=va(),{getGenDiff:Ct,changeIndchecked:re,seedChangeChecked:ge,getRawGenParams:_t,getGenDiffWatchDep:wt}=Ta();return Ee(()=>t,()=>{m.value=t;const y=mt.get(t.stackKey??"");y&&(I.value=y.slice())},{immediate:!0}),(y,n)=>{const It=ta,St=aa,Pt=na,At=sa,$t=ce,xt=ae,Je=oa,Ie=ra,Xe=Ne,Se=vt,Ft=ia,he=ua,Ye=ca,Dt=q,Mt=ue;return D(),U(Mt,{spinning:e(g),size:"large"},{default:C(()=>[u(Ca,{show:e(d).keepMultiSelect||!!e(A).length,onClearAllSelected:e(kt),onSelectAll:e(yt),onReverseSelect:e(bt)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),u(It,{style:{display:"none"}}),_("div",{ref_key:"stackViewEl",ref:f,onDragover:n[30]||(n[30]=S(()=>{},["prevent"])),onDrop:n[31]||(n[31]=S(r=>e(E)(r),["prevent"])),class:"container"},[u(Pt,{visible:e(ve),"onUpdate:visible":n[1]||(n[1]=r=>W(ve)?ve.value=r:null),width:"70vw","mask-closable":"",onOk:n[2]||(n[2]=r=>ve.value=!1)},{cancelText:C(()=>[]),default:C(()=>[u(St,{active:"",loading:!e(gt).isIdle},{default:C(()=>[_("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:n[0]||(n[0]=r=>e(ze)(e(qe)))},[_("div",Ga,P(y.$t("doubleClickToCopy")),1),Z(" "+P(e(qe)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),_("div",qa,[_("div",{class:"breadcrumb",style:Ht({flex:e(L)?1:""})},[e(L)?(D(),U(At,{key:0,style:{flex:"1"},value:e(B),"onUpdate:value":n[3]||(n[3]=r=>W(B)?B.value=r:null),onClick:n[4]||(n[4]=S(()=>{},["stop"])),onKeydown:n[5]||(n[5]=S(()=>{},["stop"])),onPressEnter:e(O),"allow-clear":""},null,8,["value","onPressEnter"])):(D(),U(xt,{key:1,style:{flex:"1"}},{default:C(()=>[(D(!0),T(je,null,st(e(I),(r,te)=>(D(),U($t,{key:te},{default:C(()=>[_("a",{onClick:S(Ze=>e(w)(te),["prevent"])},P(r.curr==="/"?y.$t("root"):r.curr.replace(/:\/$/,y.$t("drive"))),9,Ha)]),_:2},1024))),128))]),_:1})),e(L)?(D(),U(Je,{key:2,size:"small",onClick:e(O),type:"primary"},{default:C(()=>[Z(P(y.$t("go")),1)]),_:1},8,["onClick"])):(D(),T("div",Ka,[y.mode==="scanned-fixed"?(D(),T("a",{key:0,onClick:n[6]||(n[6]=S((...r)=>e(pe)&&e(pe)(...r),["prevent"])),style:{margin:"0 8px 16px 0"}},[u(e(Ba))])):G("",!0),_("a",{onClick:n[7]||(n[7]=S((...r)=>e(c)&&e(c)(...r),["prevent"])),class:"copy"},P(y.$t("copy")),1),_("a",{onClick:n[8]||(n[8]=S((...r)=>e($)&&e($)(...r),["prevent","stop"]))},P(y.$t("edit")),1)]))],4),_("div",Qa,[_("a",{class:"opt",onClick:n[9]||(n[9]=S((...r)=>e(b)&&e(b)(...r),["prevent"]))},P(y.$t("refresh")),1),u(Se,null,{overlay:C(()=>[u(Xe,null,{default:C(()=>[u(Ie,{key:"tag-search"},{default:C(()=>[_("a",{onClick:n[11]||(n[11]=S(r=>e(Q)("tag-search"),["prevent"]))},P(y.$t("imgSearch")),1)]),_:1}),u(Ie,{key:"tag-search"},{default:C(()=>[_("a",{onClick:n[12]||(n[12]=S(r=>e(Q)("fuzzy-search"),["prevent"]))},P(y.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:C(()=>[_("a",{class:"opt",onClick:n[10]||(n[10]=S(()=>{},["prevent"]))},[Z(P(y.$t("search"))+" ",1),u(e(Be))])]),_:1}),e(z)?(D(),T("a",{key:0,class:"opt",onClick:n[13]||(n[13]=S((...r)=>e(ee)&&e(ee)(...r),["prevent"]))}," Walk ")):G("",!0),_("a",{class:"opt",onClick:n[14]||(n[14]=S((...r)=>e(H)&&e(H)(...r),["prevent","stop"]))},P(y.$t("selectAll")),1),e(Kt)?G("",!0):(D(),T("a",{key:1,class:"opt",onClick:n[15]||(n[15]=S((...r)=>e(j)&&e(j)(...r),["prevent"]))},P(y.$t("share")),1)),u(Se,null,{overlay:C(()=>[u(Xe,null,{default:C(()=>[(D(!0),T(je,null,st(e(d).quickMovePaths,r=>(D(),U(Ie,{key:r.dir},{default:C(()=>[_("a",{onClick:S(te=>e(v)(r.dir),["prevent"])},P(r.zh),9,Ja)]),_:2},1024))),128))]),_:1})]),default:C(()=>[_("a",{class:"opt",onClick:n[16]||(n[16]=S(()=>{},["prevent"]))},[Z(P(y.$t("quickMove"))+" ",1),u(e(Be))])]),_:1}),u(Se,{trigger:["click"],visible:e(ne),"onUpdate:visible":n[26]||(n[26]=r=>W(ne)?ne.value=r:null),placement:"bottomLeft",getPopupContainer:r=>r.parentNode},{overlay:C(()=>[_("div",Xa,[u(Dt,Qt(Jt({labelCol:{span:10},wrapperCol:{span:14}})),{default:C(()=>[u(he,{label:y.$t("gridCellWidth")},{default:C(()=>[u(Ft,{modelValue:e(x),"onUpdate:modelValue":n[18]||(n[18]=r=>W(x)?x.value=r:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),u(he,{label:y.$t("sortingMethod")},{default:C(()=>[u(e(Xt),{value:e(se),"onUpdate:value":n[19]||(n[19]=r=>W(se)?se.value=r:null),onClick:n[20]||(n[20]=S(()=>{},["stop"])),conv:e(Ce),options:e(Yt)},null,8,["value","conv","options"])]),_:1},8,["label"]),u(he,{label:y.$t("showChangeIndicators")},{default:C(()=>[u(Ye,{checked:e(re),"onUpdate:checked":n[21]||(n[21]=r=>W(re)?re.value=r:null),onClick:e(_t)},null,8,["checked","onClick"])]),_:1},8,["label"]),u(he,{label:y.$t("seedAsChange")},{default:C(()=>[u(Ye,{checked:e(ge),"onUpdate:checked":n[22]||(n[22]=r=>W(ge)?ge.value=r:null),disabled:!e(re)},null,8,["checked","disabled"])]),_:1},8,["label"]),_("div",Ya,[_("a",{onClick:n[23]||(n[23]=S((...r)=>e(R)&&e(R)(...r),["prevent"]))},P(y.$t("addToSearchScanPathAndQuickMove")),1)]),_("div",Za,[_("a",{onClick:n[24]||(n[24]=S(r=>e(Zt)(e(k)+"/"),["prevent"]))},P(y.$t("openWithLocalFileBrowser")),1)]),_("div",en,[_("a",{onClick:n[25]||(n[25]=S((...r)=>e(K)&&e(K)(...r),["prevent"]))},P(y.$t("createFolder")),1)])]),_:1},16)])]),default:C(()=>[_("a",{class:"opt",onClick:n[17]||(n[17]=S(()=>{},["prevent"]))},P(y.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(l)?(D(),T("div",tn,[u(e(ma),{class:"file-list",items:e(J),ref_key:"scroller",ref:o,onScroll:e(p),"item-size":e(fe).first,"key-field":"fullpath","item-secondary-size":e(fe).second,gridItems:e(ye)},{default:C(({item:r,index:te})=>[u(ga,{idx:parseInt(te),file:r,"full-screen-preview-image-url":e(J)[e(me)]?e(ea)(e(J)[e(me)]):"","show-menu-idx":e(we),"onUpdate:showMenuIdx":n[27]||(n[27]=Ze=>W(we)?we.value=Ze:null),selected:e(A).includes(te),"cell-width":e(x),onFileItemClick:e(V),onDragstart:e(N),onDragend:e(X),onPreviewVisibleChange:e(ht),onContextMenuClick:e(oe),"is-selected-mutil-files":e(A).length>1,"enable-change-indicator":e(re),"seed-change-checked":e(ge),"get-gen-diff":e(Ct),"get-gen-diff-watch-dep":e(wt),"cover-files":e(F).get(r.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","cover-files"])]),after:C(()=>[_("div",an,[t.mode==="walk"?(D(),U(Je,{key:0,onClick:e(_e),loading:e(a),block:"",type:"primary",disabled:!e(i),ghost:""},{default:C(()=>[Z(P(y.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):G("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(He)?(D(),T("div",nn,[u(e(_a),{onClick:n[28]||(n[28]=r=>e(Ke)("prev")),class:ot({disable:!e(Qe)("prev")})},null,8,["class"]),u(e(wa),{onClick:n[29]||(n[29]=r=>e(Ke)("next")),class:ot({disable:!e(Qe)("next")})},null,8,["class"])])):G("",!0)])):G("",!0)],544),e(He)?(D(),U(Ia,{key:0,file:e(J)[e(me)],idx:e(me),onContextMenuClick:e(oe)},null,8,["file","idx","onContextMenuClick"])):G("",!0),u(Wa,{"file-num":e(J).length,"selected-file-num":e(A).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const kn=ft(sn,[["__scopeId","data-v-817f474b"]]);export{kn as default};
