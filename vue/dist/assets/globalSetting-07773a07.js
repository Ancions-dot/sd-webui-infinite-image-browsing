import{d as A,$ as B,r as K,m as H,n as Q,S as f,T as C,c as t,a1 as o,a2 as e,z as i,a0 as S,Y as $,U as p,X as M,aI as X,E as Y,W as h,V as _,aa as P,aN as Z,ab as j,a6 as W,a3 as V,a7 as q,aO as J,aP as ee,aQ as te,aR as le,ai as x,ah as ae,Z as ne}from"./index-a33b95f7.js";import{_ as R,a as N,F as oe}from"./numInput-38c76ac2.js";import"./index-27f39dab.js";/* empty css              *//* empty css              */import{_ as O,g as se,C as de}from"./shortcut-d49aad65.js";/* empty css              */import{a as ue}from"./functionalCallableComp-9da3b0bc.js";import"./Checkbox-f891fdcd.js";const F="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ie=["width","height","src"],re=A({__name:"ImageSetting",setup(D){function a(I,r){return new Promise(m=>{const g=new Image;g.onload=()=>{const u=document.createElement("canvas");u.width=g.width*r,u.height=g.height*r,u.getContext("2d").drawImage(g,0,0,u.width,u.height),m(u.toDataURL())},g.src=I})}const d=B(),k=K("");return H(()=>[d.enableThumbnail,d.gridThumbnailResolution],Q(async()=>{d.enableThumbnail&&(k.value=await a(F,d.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(I,r)=>{const m=N,g=O;return f(),C(M,null,[t(m,{label:e(i)("defaultGridCellWidth")},{default:o(()=>[t(R,{min:64,max:1024,step:16,modelValue:e(d).defaultGridCellWidth,"onUpdate:modelValue":r[0]||(r[0]=u=>e(d).defaultGridCellWidth=u)},null,8,["modelValue"])]),_:1},8,["label"]),t(m,{label:e(i)("useThumbnailPreview")},{default:o(()=>[t(g,{checked:e(d).enableThumbnail,"onUpdate:checked":r[1]||(r[1]=u=>e(d).enableThumbnail=u)},null,8,["checked"])]),_:1},8,["label"]),e(d).enableThumbnail?(f(),S(m,{key:0,label:e(i)("thumbnailResolution")},{default:o(()=>[t(R,{modelValue:e(d).gridThumbnailResolution,"onUpdate:modelValue":r[2]||(r[2]=u=>e(d).gridThumbnailResolution=u),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):$("",!0),t(m,{label:e(i)("livePreview")},{default:o(()=>[p("div",null,[p("img",{width:e(d).defaultGridCellWidth,height:e(d).defaultGridCellWidth,src:e(d).enableThumbnail?k.value:e(F)},null,8,ie)])]),_:1},8,["label"]),t(m,{label:e(i)("defaultShowChangeIndicators")},{default:o(()=>[t(g,{checked:e(d).defaultChangeIndchecked,"onUpdate:checked":r[3]||(r[3]=u=>e(d).defaultChangeIndchecked=u)},null,8,["checked"])]),_:1},8,["label"]),e(d).defaultChangeIndchecked?(f(),S(m,{key:1,label:e(i)("defaultSeedAsChange")},{default:o(()=>[t(g,{checked:e(d).defaultSeedChangeChecked,"onUpdate:checked":r[4]||(r[4]=u=>e(d).defaultSeedChangeChecked=u)},null,8,["checked"])]),_:1},8,["label"])):$("",!0),t(m,{label:e(i)("previewMaskBackgroundOpacity")},{default:o(()=>[t(R,{min:0,max:1,step:.05,modelValue:e(d).previewBgOpacity,"onUpdate:modelValue":r[5]||(r[5]=u=>e(d).previewBgOpacity=u)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),ce={class:"panel"},me={style:{"margin-top":"0"}},pe={class:"lang-select-wrap"},he={class:"col"},ge={class:"col"},fe={class:"col"},be={class:"col"},_e=A({__name:"globalSetting",setup(D){const a=B(),d=X(),k=K(!1),I=async()=>{window.location.reload()},r=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],m=(s,l)=>{const y=se(s);y&&(a.shortcut[l]=y)},g=async()=>{await J("shutdown_api_server_command"),await ee.removeFile(te),await le()},u=Y(()=>[{value:"empty",text:i("emptyStartPage")},{value:"last-workspace-state",text:i("restoreLastWorkspaceState")},...d.snapshots.map(l=>({value:`workspace_snapshot_${l.id}`,text:i("restoreWorkspaceSnapshot",[l.name])}))]);return(s,l)=>{const y=x,c=N,v=O,G=R,w=x,L=de,U=ae,E=oe;return f(),C("div",ce,[$("",!0),t(E,null,{default:o(()=>{var T;return[p("h2",me,h(e(i)("ImageBrowsingSettings")),1),t(re),p("h2",null,h(e(i)("imgSearch")),1),t(c,{label:s.$t("rebuildImageIndex")},{default:o(()=>[t(y,{onClick:e(ue)},{default:o(()=>[_(h(s.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),p("h2",null,h(e(i)("autoRefresh")),1),t(c,{label:s.$t("autoRefreshWalkMode")},{default:o(()=>[t(v,{checked:e(a).autoRefreshWalkMode,"onUpdate:checked":l[0]||(l[0]=n=>e(a).autoRefreshWalkMode=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("autoRefreshNormalFixedMode")},{default:o(()=>[t(v,{checked:e(a).autoRefreshNormalFixedMode,"onUpdate:checked":l[1]||(l[1]=n=>e(a).autoRefreshNormalFixedMode=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:e(i)("autoRefreshWalkModePosLimit")},{default:o(()=>[t(G,{min:0,max:1024,step:16,modelValue:e(a).autoRefreshWalkModePosLimit,"onUpdate:modelValue":l[2]||(l[2]=n=>e(a).autoRefreshWalkModePosLimit=n)},null,8,["modelValue"])]),_:1},8,["label"]),p("h2",null,h(e(i)("other")),1),t(c,{label:s.$t("lang")},{default:o(()=>[p("div",pe,[t(e(P),{options:r,value:e(a).lang,"onUpdate:value":l[3]||(l[3]=n=>e(a).lang=n),onChange:l[4]||(l[4]=n=>k.value=!0)},null,8,["value"])]),k.value?(f(),S(w,{key:0,type:"primary",onClick:I,ghost:""},{default:o(()=>[_(h(e(i)("langChangeReload")),1)]),_:1})):$("",!0)]),_:1},8,["label"]),t(c,{label:s.$t("onlyFoldersAndImages")},{default:o(()=>[t(v,{checked:e(a).onlyFoldersAndImages,"onUpdate:checked":l[5]||(l[5]=n=>e(a).onlyFoldersAndImages=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("showCommaInGenInfoPanel")},{default:o(()=>[t(v,{checked:e(a).showCommaInInfoPanel,"onUpdate:checked":l[6]||(l[6]=n=>e(a).showCommaInInfoPanel=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("defaultSortingMethod")},{default:o(()=>[t(e(P),{value:e(a).defaultSortingMethod,"onUpdate:value":l[7]||(l[7]=n=>e(a).defaultSortingMethod=n),conv:e(Z),options:e(j)},null,8,["value","conv","options"])]),_:1},8,["label"]),t(c,{label:s.$t("longPressOpenContextMenu")},{default:o(()=>[t(v,{checked:e(a).longPressOpenContextMenu,"onUpdate:checked":l[8]||(l[8]=n=>e(a).longPressOpenContextMenu=n)},null,8,["checked"])]),_:1},8,["label"]),t(c,{label:s.$t("openOnAppStart")},{default:o(()=>[t(e(P),{value:e(a).defaultInitinalPage,"onUpdate:value":l[9]||(l[9]=n=>e(a).defaultInitinalPage=n),options:u.value},null,8,["value","options"])]),_:1},8,["label"]),(f(!0),C(M,null,W(e(a).ignoredConfirmActions,(n,b)=>(f(),S(c,{label:s.$t(b+"SkipConfirm"),key:b},{default:o(()=>[t(L,{checked:e(a).ignoredConfirmActions[b],"onUpdate:checked":z=>e(a).ignoredConfirmActions[b]=z},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),p("h2",null,h(e(i)("shortcutKey")),1),t(c,{label:s.$t("download")},{default:o(()=>[p("div",he,[t(U,{value:e(a).shortcut.download,onKeydown:l[10]||(l[10]=V(n=>m(n,"download"),["stop","prevent"])),placeholder:s.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(w,{onClick:l[11]||(l[11]=n=>e(a).shortcut.download=""),class:"clear-btn"},{default:o(()=>[_(h(s.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),t(c,{label:s.$t("deleteSelected")},{default:o(()=>[p("div",ge,[t(U,{value:e(a).shortcut.delete,onKeydown:l[12]||(l[12]=V(n=>m(n,"delete"),["stop","prevent"])),placeholder:s.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),t(w,{onClick:l[13]||(l[13]=n=>e(a).shortcut.delete=""),class:"clear-btn"},{default:o(()=>[_(h(s.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(f(!0),C(M,null,W(((T=e(a).conf)==null?void 0:T.all_custom_tags)??[],n=>(f(),S(c,{label:s.$t("toggleTagSelection",{tag:n.name}),key:n.id},{default:o(()=>[p("div",fe,[t(U,{value:e(a).shortcut[`toggle_tag_${n.name}`],onKeydown:V(b=>m(b,`toggle_tag_${n.name}`),["stop","prevent"]),placeholder:s.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),t(w,{onClick:b=>e(a).shortcut[`toggle_tag_${n.name}`]="",class:"clear-btn"},{default:o(()=>[_(h(s.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(q)?(f(),C(M,{key:0},[p("h2",null,h(e(i)("clientSpecificSettings")),1),t(c,null,{default:o(()=>[p("div",be,[t(w,{onClick:g,class:"clear-btn"},{default:o(()=>[_(h(s.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):$("",!0)]}),_:1})])}}});const Re=ne(_e,[["__scopeId","data-v-e1be53da"]]);export{Re as default};
