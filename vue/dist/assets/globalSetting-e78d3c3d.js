import{d as x,r as B,v as F,s as z,ao as H,o as p,k as v,c as l,A as s,C as e,a7 as m,z as k,p as S,l as u,n as $,t as r,m as _,S as U,ap as L,N as O,H as V,B as I,J as q,aq as J,ar as X,as as Y,at as j,Y as A,X as Q,q as Z}from"./index-14d5747c.js";import{N as K,_ as D,a as N,F as ee}from"./numInput-9ad995b5.js";import"./index-5f152590.js";/* empty css              *//* empty css              */import{o as te,g as le,C as ne}from"./functionalCallableComp-3bea822e.js";const R="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",oe=["width","height","src"],ae=x({__name:"ImageSetting",setup(G){function o(C,i){return new Promise(h=>{const n=new Image;n.onload=()=>{const t=document.createElement("canvas");t.width=n.width*i,t.height=n.height*i,t.getContext("2d").drawImage(n,0,0,t.width,t.height),h(t.toDataURL())},n.src=C})}const d=B(),w=F("");return z(()=>[d.enableThumbnail,d.gridThumbnailResolution],H(async()=>{d.enableThumbnail&&(w.value=await o(R,d.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(C,i)=>{const h=D,n=N;return p(),v($,null,[l(h,{label:e(m)("defaultGridCellWidth")},{default:s(()=>[l(K,{min:64,max:1024,step:32,modelValue:e(d).defaultGridCellWidth,"onUpdate:modelValue":i[0]||(i[0]=t=>e(d).defaultGridCellWidth=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(h,{label:e(m)("useThumbnailPreview")},{default:s(()=>[l(n,{checked:e(d).enableThumbnail,"onUpdate:checked":i[1]||(i[1]=t=>e(d).enableThumbnail=t)},null,8,["checked"])]),_:1},8,["label"]),e(d).enableThumbnail?(p(),k(h,{key:0,label:e(m)("thumbnailResolution")},{default:s(()=>[l(K,{modelValue:e(d).gridThumbnailResolution,"onUpdate:modelValue":i[2]||(i[2]=t=>e(d).gridThumbnailResolution=t),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):S("",!0),l(h,{label:e(m)("livePreview")},{default:s(()=>[u("div",null,[u("img",{width:e(d).defaultGridCellWidth,height:e(d).defaultGridCellWidth,src:e(d).enableThumbnail?w.value:e(R)},null,8,oe)])]),_:1},8,["label"])],64)}}}),se={class:"panel"},de={style:{"margin-top":"0"}},ie={class:"lang-select-wrap"},ue={class:"col"},re={class:"col"},ce={class:"col"},me={class:"col"},pe=x({__name:"globalSetting",setup(G){const o=B(),d=F(!1),w=async()=>{window.location.reload()},C=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],i=(n,t)=>{const b=le(n);b&&(o.shortcut[t]=b)},h=async()=>{await J("shutdown_api_server_command"),await X.removeFile(Y),await j()};return(n,t)=>{const b=A,c=D,T=N,f=A,P=ne,y=Q,W=ee;return p(),v("div",se,[S("",!0),l(W,null,{default:s(()=>{var M;return[u("h2",de,r(e(m)("ImageBrowsingSettings")),1),l(ae),u("h2",null,r(e(m)("imgSearch")),1),l(c,{label:n.$t("rebuildImageIndex")},{default:s(()=>[l(b,{onClick:e(te)},{default:s(()=>[_(r(n.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),u("h2",null,r(e(m)("other")),1),l(c,{label:n.$t("onlyFoldersAndImages")},{default:s(()=>[l(T,{checked:e(o).onlyFoldersAndImages,"onUpdate:checked":t[0]||(t[0]=a=>e(o).onlyFoldersAndImages=a)},null,8,["checked"])]),_:1},8,["label"]),l(c,{label:n.$t("defaultSortingMethod")},{default:s(()=>[l(e(U),{value:e(o).defaultSortingMethod,"onUpdate:value":t[1]||(t[1]=a=>e(o).defaultSortingMethod=a),conv:e(L),options:e(O)},null,8,["value","conv","options"])]),_:1},8,["label"]),l(c,{label:n.$t("longPressOpenContextMenu")},{default:s(()=>[l(T,{checked:e(o).longPressOpenContextMenu,"onUpdate:checked":t[2]||(t[2]=a=>e(o).longPressOpenContextMenu=a)},null,8,["checked"])]),_:1},8,["label"]),l(c,{label:n.$t("lang")},{default:s(()=>[u("div",ie,[l(e(U),{options:C,value:e(o).lang,"onUpdate:value":t[3]||(t[3]=a=>e(o).lang=a),onChange:t[4]||(t[4]=a=>d.value=!0)},null,8,["value"])]),d.value?(p(),k(f,{key:0,type:"primary",onClick:w,ghost:""},{default:s(()=>[_(r(e(m)("langChangeReload")),1)]),_:1})):S("",!0)]),_:1},8,["label"]),(p(!0),v($,null,V(e(o).ignoredConfirmActions,(a,g)=>(p(),k(c,{label:n.$t(g+"SkipConfirm"),key:g},{default:s(()=>[l(P,{checked:e(o).ignoredConfirmActions[g],"onUpdate:checked":E=>e(o).ignoredConfirmActions[g]=E},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),u("h2",null,r(e(m)("shortcutKey")),1),l(c,{label:n.$t("download")},{default:s(()=>[u("div",ue,[l(y,{value:e(o).shortcut.download,onKeydown:t[5]||(t[5]=I(a=>i(a,"download"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(f,{onClick:t[6]||(t[6]=a=>e(o).shortcut.download=""),class:"clear-btn"},{default:s(()=>[_(r(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),l(c,{label:n.$t("deleteSelected")},{default:s(()=>[u("div",re,[l(y,{value:e(o).shortcut.delete,onKeydown:t[7]||(t[7]=I(a=>i(a,"delete"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(f,{onClick:t[8]||(t[8]=a=>e(o).shortcut.delete=""),class:"clear-btn"},{default:s(()=>[_(r(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(p(!0),v($,null,V(((M=e(o).conf)==null?void 0:M.all_custom_tags)??[],a=>(p(),k(c,{label:n.$t("toggleTagSelection",{tag:a.name}),key:a.id},{default:s(()=>[u("div",ce,[l(y,{value:e(o).shortcut[`toggle_tag_${a.name}`],onKeydown:I(g=>i(g,`toggle_tag_${a.name}`),["stop","prevent"]),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),l(f,{onClick:g=>e(o).shortcut[`toggle_tag_${a.name}`]="",class:"clear-btn"},{default:s(()=>[_(r(n.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(q)?(p(),v($,{key:0},[u("h2",null,r(e(m)("clientSpecificSettings")),1),l(c,null,{default:s(()=>[u("div",me,[l(f,{onClick:h,class:"clear-btn"},{default:s(()=>[_(r(n.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):S("",!0)]}),_:1})])}}});const we=Z(pe,[["__scopeId","data-v-e5d3d829"]]);export{we as default};
