var an=Object.defineProperty;var ln=(e,i,t)=>i in e?an(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var ze=(e,i,t)=>(ln(e,typeof i!="symbol"?i+"":i,t),t);import{d as be,u as Dt,ae as q,a1 as Mt,h as ce,c as A,c5 as on,c6 as cn,v as K,aQ as un,n as Z,bw as dn,P as at,bO as fn,a5 as ae,c7 as hn,aB as gn,c8 as pn,c9 as vn,av as zt,ah as Oe,bb as Ke,ca as mn,cb as yn,cc as bn,cd as kn,ce as Nt,cf as lt,cg as wn,ch as Sn,ci as Ft,cj as $t,r as qe,ad as An,ck as Bt,aa as ne,a7 as U,cl as Ge,s as he,am as De,as as In,a8 as Ne,cm as _n,cn as Qt,co as ot,ai as xt,bM as ct,bL as Cn,cp as _e,cq as En,an as Pn,cr as te,bK as Lt,cs as Tn,ct as On,G as xe,ab as ut,ag as ue,cu as dt,c3 as Dn,V as ge,Y as Fe,Q as oe,m as M,O as Mn,bX as ft,cv as zn,cw as Nn,bW as Fn,cx as $n,cy as Bn,ak as Rt,al as jt,a4 as Ht,o as h,z as W,cz as Qn,cA as xn,cB as Ln,cC as Rn,cD as jn,bF as Hn,k,ac as Se,p as E,A as B,H as re,cE as ht,bz as Vn,cF as Un,I as Wn,R as de,t as _,C as J,Z as Vt,cG as Jn,b_ as Kn,M as Ut,l as u,q as Wt,cH as qn,cI as Gn,cJ as Yn,bZ as Zn,cK as Xn,cL as ei}from"./index-30275493.js";import{t as $e,a as pe,l as fe,b as ti,M as Jt,C as ni,m as Kt,g as ii,c as si,d as ri,e as ai}from"./functionalCallableComp-3252666a.js";import{h as li,r as oi,a as ci,t as ui,i as di}from"./db-e91cba82.js";import{D as ve,a as Le}from"./index-effab3c0.js";import"./index-aeb747e4.js";var fi=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},hi=be({compatConfig:{MODE:3},name:"ACheckableTag",props:fi(),setup:function(i,t){var n=t.slots,s=t.emit,r=Dt("tag",i),d=r.prefixCls,c=function(o){var y=i.checked;s("update:checked",!y),s("change",!y),s("click",o)},p=q(function(){var b;return Mt(d.value,(b={},ce(b,"".concat(d.value,"-checkable"),!0),ce(b,"".concat(d.value,"-checkable-checked"),i.checked),b))});return function(){var b;return A("span",{class:p.value,onClick:c},[(b=n.default)===null||b===void 0?void 0:b.call(n)])}}});const Re=hi;var gi=new RegExp("^(".concat(on.join("|"),")(-inverse)?$")),pi=new RegExp("^(".concat(cn.join("|"),")$")),vi=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:at.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:at.any}},me=be({compatConfig:{MODE:3},name:"ATag",props:vi(),slots:["closeIcon","icon"],setup:function(i,t){var n=t.slots,s=t.emit,r=t.attrs,d=Dt("tag",i),c=d.prefixCls,p=d.direction,b=K(!0);un(function(){i.visible!==void 0&&(b.value=i.visible)});var o=function(a){a.stopPropagation(),s("update:visible",!1),s("close",a),!a.defaultPrevented&&i.visible===void 0&&(b.value=!1)},y=q(function(){var S=i.color;return S?gi.test(S)||pi.test(S):!1}),C=q(function(){var S;return Mt(c.value,(S={},ce(S,"".concat(c.value,"-").concat(i.color),y.value),ce(S,"".concat(c.value,"-has-color"),i.color&&!y.value),ce(S,"".concat(c.value,"-hidden"),!b.value),ce(S,"".concat(c.value,"-rtl"),p.value==="rtl"),S))});return function(){var S,a,l,g=i.icon,v=g===void 0?(S=n.icon)===null||S===void 0?void 0:S.call(n):g,I=i.color,w=i.closeIcon,f=w===void 0?(a=n.closeIcon)===null||a===void 0?void 0:a.call(n):w,z=i.closable,O=z===void 0?!1:z,T=function(){return O?f?A("span",{class:"".concat(c.value,"-close-icon"),onClick:o},[f]):A(fn,{class:"".concat(c.value,"-close-icon"),onClick:o},null):null},N={backgroundColor:I&&!y.value?I:void 0},Q=v||null,P=(l=n.default)===null||l===void 0?void 0:l.call(n),j=Q?A(Z,null,[Q,A("span",null,[P])]):P,H="onClick"in r,V=A("span",{class:C.value,style:N},[j,T()]);return H?A(dn,null,{default:function(){return[V]}}):V}}});me.CheckableTag=Re;me.install=function(e){return e.component(me.name,me),e.component(Re.name,Re),e};const mi=me;ve.Button=Le;ve.install=function(e){return e.component(ve.name,ve),e.component(Le.name,Le),e};var yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const bi=yi;function gt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){ki(e,s,t[s])})}return e}function ki(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var Ye=function(i,t){var n=gt({},i,t.attrs);return A(ae,gt({},n,{icon:bi}),null)};Ye.displayName="StarFilled";Ye.inheritAttrs=!1;const qt=Ye;var wi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const Si=wi;function pt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){Ai(e,s,t[s])})}return e}function Ai(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var Ze=function(i,t){var n=pt({},i,t.attrs);return A(ae,pt({},n,{icon:Si}),null)};Ze.displayName="FileOutlined";Ze.inheritAttrs=!1;const Ii=Ze;var _i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const Ci=_i;function vt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){Ei(e,s,t[s])})}return e}function Ei(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var Xe=function(i,t){var n=vt({},i,t.attrs);return A(ae,vt({},n,{icon:Ci}),null)};Xe.displayName="FolderOpenOutlined";Xe.inheritAttrs=!1;const Pi=Xe;function Ti(e,i,t){if(!hn(t))return!1;var n=typeof i;return(n=="number"?gn(t)&&pn(i,t.length):n=="string"&&i in t)?vn(t[i],e):!1}function Oi(e){return e&&e.length?e[0]:void 0}var Di=Math.ceil,Mi=Math.max;function zi(e,i,t,n){for(var s=-1,r=Mi(Di((i-e)/(t||1)),0),d=Array(r);r--;)d[n?r:++s]=e,e+=t;return d}function Ni(e){return function(i,t,n){return n&&typeof n!="number"&&Ti(i,t,n)&&(t=n=void 0),i=$e(i),t===void 0?(t=i,i=0):t=$e(t),n=n===void 0?i<t?1:-1:$e(n),zi(i,t,n,e)}}var Fi=Ni();const Gt=Fi,ye=(...e)=>{document.addEventListener(...e),zt(()=>document.removeEventListener(...e))},$i="data:image/png;base64,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",Ae=new WeakMap;function Bi(e,i){return{useHookShareState:n=>{const s=yn();Oe(s),Ae.has(s)||(Ae.set(s,Ke(e(s,n??(i==null?void 0:i())))),zt(()=>{Ae.delete(s)}));const r=Ae.get(s);return Oe(r),{state:r,toRefs(){return mn(r)}}}}}var Qi={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const xi=Qi;function mt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){Li(e,s,t[s])})}return e}function Li(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var et=function(i,t){var n=mt({},i,t.attrs);return A(ae,mt({},n,{icon:xi}),null)};et.displayName="CaretRightOutlined";et.inheritAttrs=!1;const yt=et;var Ri={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const ji=Ri;function bt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){Hi(e,s,t[s])})}return e}function Hi(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var tt=function(i,t){var n=bt({},i,t.attrs);return A(ae,bt({},n,{icon:ji}),null)};tt.displayName="DatabaseOutlined";tt.inheritAttrs=!1;const Vi=tt;var Ui={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};const Wi=Ui;function kt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){Ji(e,s,t[s])})}return e}function Ji(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var nt=function(i,t){var n=kt({},i,t.attrs);return A(ae,kt({},n,{icon:Wi}),null)};nt.displayName="HeartFilled";nt.inheritAttrs=!1;const Ki=nt;var qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};const Gi=qi;function wt(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){Yi(e,s,t[s])})}return e}function Yi(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var it=function(i,t){var n=wt({},i,t.attrs);return A(ae,wt({},n,{icon:Gi}),null)};it.displayName="HeartOutlined";it.inheritAttrs=!1;const Zi=it;var Xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm144.1 454.9L437.7 677.8a8.02 8.02 0 01-12.7-6.5V353.7a8 8 0 0112.7-6.5L656.1 506a7.9 7.9 0 010 12.9z"}}]},name:"play-circle",theme:"filled"};const es=Xi;function St(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){ts(e,s,t[s])})}return e}function ts(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var st=function(i,t){var n=St({},i,t.attrs);return A(ae,St({},n,{icon:es}),null)};st.displayName="PlayCircleFilled";st.inheritAttrs=!1;const ns=st;var is={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const ss=is;function At(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?Object(arguments[i]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),n.forEach(function(s){rs(e,s,t[s])})}return e}function rs(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var rt=function(i,t){var n=At({},i,t.attrs);return A(ae,At({},n,{icon:ss}),null)};rt.displayName="StarOutlined";rt.inheritAttrs=!1;const Yt=rt;var Zt={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,i){(function(t,n){e.exports=n})(bn,function(){var t={};t.version="0.3.5";var n=t.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};t.configure=function(a){var l,g;for(l in a)g=a[l],g!==void 0&&a.hasOwnProperty(l)&&(n[l]=g);return this},t.status=null,t.set=function(a){var l=t.isStarted();a=s(a,n.minimum,1),t.status=a===1?null:a;var g=t.render(!l),v=g.querySelector(n.barSelector),I=n.speed,w=n.easing;return g.offsetWidth,c(function(f){n.positionUsing===""&&(n.positionUsing=t.getPositioningCSS()),p(v,d(a,I,w)),a===1?(p(g,{transition:"none",opacity:1}),g.offsetWidth,setTimeout(function(){p(g,{transition:"all "+I+"ms linear",opacity:0}),setTimeout(function(){t.remove(),f()},I)},I)):setTimeout(f,I)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var a=function(){setTimeout(function(){t.status&&(t.trickle(),a())},n.trickleSpeed)};return n.trickle&&a(),this},t.done=function(a){return!a&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(a){var l=t.status;return l?l>1?void 0:(typeof a!="number"&&(l>=0&&l<.2?a=.1:l>=.2&&l<.5?a=.04:l>=.5&&l<.8?a=.02:l>=.8&&l<.99?a=.005:a=0),l=s(l+a,0,.994),t.set(l)):t.start()},t.trickle=function(){return t.inc()},function(){var a=0,l=0;t.promise=function(g){return!g||g.state()==="resolved"?this:(l===0&&t.start(),a++,l++,g.always(function(){l--,l===0?(a=0,t.done()):t.set((a-l)/a)}),this)}}(),t.getElement=function(){var a=t.getParent();if(a){var l=Array.prototype.slice.call(a.querySelectorAll(".nprogress")).filter(function(g){return g.parentElement===a});if(l.length>0)return l[0]}return null},t.getParent=function(){if(n.parent instanceof HTMLElement)return n.parent;if(typeof n.parent=="string")return document.querySelector(n.parent)},t.render=function(a){if(t.isRendered())return t.getElement();o(document.documentElement,"nprogress-busy");var l=document.createElement("div");l.id="nprogress",l.className="nprogress",l.innerHTML=n.template;var g=l.querySelector(n.barSelector),v=a?"-100":r(t.status||0),I=t.getParent(),w;return p(g,{transition:"all 0 linear",transform:"translate3d("+v+"%,0,0)"}),n.showSpinner||(w=l.querySelector(n.spinnerSelector),w&&S(w)),I!=document.body&&o(I,"nprogress-custom-parent"),I.appendChild(l),l},t.remove=function(){t.status=null,y(document.documentElement,"nprogress-busy"),y(t.getParent(),"nprogress-custom-parent");var a=t.getElement();a&&S(a)},t.isRendered=function(){return!!t.getElement()},t.getPositioningCSS=function(){var a=document.body.style,l="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return l+"Perspective"in a?"translate3d":l+"Transform"in a?"translate":"margin"};function s(a,l,g){return a<l?l:a>g?g:a}function r(a){return(-1+a)*100}function d(a,l,g){var v;return n.positionUsing==="translate3d"?v={transform:"translate3d("+r(a)+"%,0,0)"}:n.positionUsing==="translate"?v={transform:"translate("+r(a)+"%,0)"}:v={"margin-left":r(a)+"%"},v.transition="all "+l+"ms "+g,v}var c=function(){var a=[];function l(){var g=a.shift();g&&g(l)}return function(g){a.push(g),a.length==1&&l()}}(),p=function(){var a=["Webkit","O","Moz","ms"],l={};function g(f){return f.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(z,O){return O.toUpperCase()})}function v(f){var z=document.body.style;if(f in z)return f;for(var O=a.length,T=f.charAt(0).toUpperCase()+f.slice(1),N;O--;)if(N=a[O]+T,N in z)return N;return f}function I(f){return f=g(f),l[f]||(l[f]=v(f))}function w(f,z,O){z=I(z),f.style[z]=O}return function(f,z){var O=arguments,T,N;if(O.length==2)for(T in z)N=z[T],N!==void 0&&z.hasOwnProperty(T)&&w(f,T,N);else w(f,O[1],O[2])}}();function b(a,l){var g=typeof a=="string"?a:C(a);return g.indexOf(" "+l+" ")>=0}function o(a,l){var g=C(a),v=g+l;b(g,l)||(a.className=v.substring(1))}function y(a,l){var g=C(a),v;b(a,l)&&(v=g.replace(" "+l+" "," "),a.className=v.substring(1,v.length-1))}function C(a){return(" "+(a&&a.className||"")+" ").replace(/\s+/gi," ")}function S(a){a&&a.parentNode&&a.parentNode.removeChild(a)}return t})})(Zt);var as=Zt.exports;const ls=kn(as);function os(){const e=[];for(let s=0;s<72;s++){const d=`hsl(${s*7.2}, 90%, 35%)`;e.push(d)}return e}const It=os(),Xt=Nt("useTagStore",()=>{const e=Ke(new Map),i=async r=>{if(r=r.filter(d=>!e.has(d)),!!r.length)try{r.forEach(c=>e.set(c,[]));const d=await li(r);for(const c in d)e.set(c,d[c])}catch{r.forEach(d=>e.delete(d))}},t=new Map;return{tagMap:e,getColor:r=>{let d=t.get(r);if(!d){const c=lt.hash.sha256.hash(r),p=parseInt(lt.codec.hex.fromBits(c),16)%It.length;d=It[p],t.set(r,d)}return d},fetchImageTags:i,refreshTags:async r=>{r.forEach(d=>e.delete(d)),await i(r)}}}),cs=Nt("useBatchDownloadStore",()=>{const e=K([]);return{selectdFiles:e,addFiles:t=>{e.value=wn([...e.value,...t])}}});class _t{constructor(i,t=Sn.CREATED_TIME_DESC){ze(this,"root");ze(this,"execQueue",[]);this.sortMethod=t,this.root={children:[],info:{name:i,size:"-",bytes:0,created_time:"",is_under_scanned_path:!0,date:"",type:"dir",fullpath:i}},this.fetchChildren(this.root)}reset(){return this.root.children=[],this.fetchChildren(this.root)}get images(){const i=t=>t.children.map(n=>{if(n.info.type==="dir")return i(n);if($t(n.info.name))return n.info}).filter(n=>n).flat(1);return i(this.root)}get isCompleted(){return this.execQueue.length===0}async fetchChildren(i){const{files:t}=await pe(i.info.fullpath);return i.children=Ft(t,this.sortMethod).map(n=>({info:n,children:[]})),this.execQueue.shift(),this.execQueue.unshift(...i.children.filter(n=>n.info.type==="dir").map(n=>({fn:()=>this.fetchChildren(n),...n}))),i}async next(){const i=Oi(this.execQueue);if(!i)return null;const t=await i.fn();return this.execQueue=this.execQueue.slice(),this.root={...this.root},t}}function Be(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fn(e)}const Ce=new Map,L=qe(),us=cs(),je=Xt(),Ct=An(),Ie=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Ee,useEventListen:He}=Bt(),{useHookShareState:le}=Bi((e,{images:i})=>{const t=K({tabIdx:-1,paneIdx:-1}),n=q(()=>fe(s.value)),s=K([]),r=q(()=>{var I;return s.value.map(w=>w.curr).slice((I=L.conf)!=null&&I.is_win?1:0)}),d=q(()=>Qt(...r.value)),c=K(L.defaultSortingMethod),p=K(t.value.walkModePath?new _t(t.value.walkModePath,c.value):void 0);he([()=>t.value.walkModePath,c],()=>{p.value=t.value.walkModePath?new _t(t.value.walkModePath,c.value):void 0});const b=Ke(new Set);he(n,()=>b.clear());const o=q(()=>{var z;if(i.value)return i.value;if(p.value)return p.value.images.filter(O=>!b.has(O.fullpath));if(!n.value)return[];const I=((z=n.value)==null?void 0:z.files)??[],w=c.value;return Ft((O=>L.onlyFoldersAndImages?O.filter(T=>T.type==="dir"||$t(T.name)):O)(I),w).filter(O=>!b.has(O.fullpath))}),y=K([]),C=K(-1),S=q(()=>p.value?!p.value.isCompleted:!1),a=K(!1),l=K(!1),g=()=>{var I,w,f;return(f=(w=(I=L.tabList)==null?void 0:I[t.value.tabIdx])==null?void 0:w.panes)==null?void 0:f[t.value.paneIdx]},v=Bt();return v.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${o.value.length}`),y.value=Gt(0,o.value.length)}),{previewing:l,spinning:a,canLoadNext:S,multiSelectedIdxs:y,previewIdx:C,basePath:r,currLocation:d,currPage:n,stack:s,sortMethod:c,sortedFiles:o,scroller:K(),stackViewEl:K(),props:t,getPane:g,walker:p,deletedFiles:b,...v}},()=>({images:K()}));function Aa(){const{previewIdx:e,eventEmitter:i,canLoadNext:t,previewing:n,sortedFiles:s,scroller:r,props:d}=le().toRefs(),{state:c}=le();let p=null;const b=(S,a)=>{var l;n.value=S,p!=null&&!S&&a&&((l=r.value)==null||l.scrollToItem(p),p=null)},o=()=>{d.value.walkModePath&&!C("next")&&t&&(ne.info(U("loadingNextFolder")),i.value.emit("loadNextDir",!0))};ye("keydown",S=>{var a;if(n.value){let l=e.value;if(["ArrowDown","ArrowRight"].includes(S.key))for(l++;s.value[l]&&!te(s.value[l].name);)l++;else if(["ArrowUp","ArrowLeft"].includes(S.key))for(l--;s.value[l]&&!te(s.value[l].name);)l--;if(te((a=s.value[l])==null?void 0:a.name)??""){e.value=l;const g=r.value;g&&!(l>=g.$_startIndex&&l<=g.$_endIndex)&&(p=l)}o()}});const y=S=>{var l;let a=e.value;if(S==="next")for(a++;s.value[a]&&!te(s.value[a].name);)a++;else if(S==="prev")for(a--;s.value[a]&&!te(s.value[a].name);)a--;if(te((l=s.value[a])==null?void 0:l.name)??""){e.value=a;const g=r.value;g&&!(a>=g.$_startIndex&&a<=g.$_endIndex)&&(p=a)}o()},C=S=>{var l;let a=e.value;if(S==="next")for(a++;s.value[a]&&!te(s.value[a].name);)a++;else if(S==="prev")for(a--;s.value[a]&&!te(s.value[a].name);)a--;return te((l=s.value[a])==null?void 0:l.name)??""};return He("removeFiles",async()=>{var S;n.value&&!c.sortedFiles[e.value]&&(ne.info(U("manualExitFullScreen"),5),await Ge(500),(S=document.querySelector(".ant-image-preview-operations-operation .anticon-close"))==null||S.click(),e.value=-1)}),{previewIdx:e,onPreviewVisibleChange:b,previewing:n,previewImgMove:y,canPreview:C}}function Ia(){const e=K(),{scroller:i,stackViewEl:t,stack:n,currPage:s,currLocation:r,useEventListen:d,eventEmitter:c,getPane:p,props:b,deletedFiles:o,walker:y,sortedFiles:C}=le().toRefs();he(()=>n.value.length,De((m,F)=>{var x;m!==F&&((x=i.value)==null||x.scrollToItem(0))},300));const S=async m=>{var F;await I(m),b.value.walkModePath&&(await Ge(),await((F=y.value)==null?void 0:F.reset()),c.value.emit("loadNextDir"))};In(async()=>{var m;if(!n.value.length){const F=await pe("/");n.value.push({files:F.files,curr:"/"})}e.value=new ls,e.value.configure({parent:t.value}),b.value.path&&b.value.path!=="/"?await S(b.value.walkModePath??b.value.path):(m=L.conf)!=null&&m.home&&I(L.conf.home)}),he(r,De(m=>{const F=p.value();if(!F)return;F.path=m;const x=F.path.split("/").pop(),Y=(()=>{var se;if(!b.value.walkModePath){const ee=_e(m);for(const[ke,we]of Object.entries(L.pathAliasMap))if(ee.startsWith(we))return ee.replace(we,ke);return x}return"Walk: "+(((se=L.quickMovePaths.find(ee=>ee.dir===F.walkModePath))==null?void 0:se.zh)??x)})();F.name=Ne("div",{style:"display:flex;align-items:center"},[Ne(Vi),Ne("span",{class:"line-clamp-1",style:"max-width: 256px"},Y)]),F.nameFallbackStr=Y,L.recent=L.recent.filter(se=>se.key!==F.key),L.recent.unshift({path:m,key:F.key}),L.recent.length>20&&(L.recent=L.recent.slice(0,20))},300));const a=()=>xe(r.value),l=async m=>{var F,x;if(m.type==="dir")try{(F=e.value)==null||F.start();const{files:X}=await pe(m.fullpath);n.value.push({files:X,curr:m.name})}finally{(x=e.value)==null||x.done()}},g=m=>{for(;m<n.value.length-1;)n.value.pop()},v=(m,F)=>(Oe(L.conf,"global.conf load failed"),L.conf.is_win?m.toLowerCase()==F.toLowerCase():m==F),I=async m=>{var x,X;const F=n.value.slice();try{_n(m)||(m=Qt(((x=L.conf)==null?void 0:x.sd_cwd)??"/",m));const Y=ot(m),se=n.value.map(ee=>ee.curr);for(se.shift();se[0]&&Y[0]&&v(se[0],Y[0]);)se.shift(),Y.shift();for(let ee=0;ee<se.length;ee++)n.value.pop();if(!Y.length)return w();for(const ee of Y){const ke=(X=s.value)==null?void 0:X.files.find(we=>v(we.name,ee));if(!ke)throw console.error({frags:Y,frag:ee,stack:xt(n.value)}),new Error(`${ee} not found`);await l(ke)}}catch(Y){throw ne.error(U("moveFailedCheckPath")+(Y instanceof Error?Y.message:"")),console.error(m,ot(m),s.value),n.value=F,Y}},w=ct(async()=>{var m,F,x;try{if((m=e.value)==null||m.start(),y.value)await y.value.reset(),c.value.emit("loadNextDir");else{const{files:X}=await pe(n.value.length===1?"/":r.value);fe(n.value).files=X}o.value.clear(),(F=i.value)==null||F.scrollToItem(0),ne.success(U("refreshCompleted"))}finally{(x=e.value)==null||x.done()}});Cn("returnToIIB",ct(async()=>{var m,F;if(!b.value.walkModePath)try{(m=e.value)==null||m.start();const{files:x}=await pe(n.value.length===1?"/":r.value);fe(n.value).files.map(Y=>Y.date).join()!==x.map(Y=>Y.date).join()&&(fe(n.value).files=x,ne.success(U("autoUpdate")))}finally{(F=e.value)==null||F.done()}})),d.value("refresh",w);const f=m=>{b.value.walkModePath&&(p.value().walkModePath=m),S(m)},z=q(()=>L.quickMovePaths.map(m=>({...m,path:_e(m.dir)}))),O=q(()=>{const m=_e(r.value);return z.value.find(x=>x.path===m)}),T=async()=>{const m=O.value;if(m){if(!m.can_delete)return;await oi({path:r.value,type:"scanned"}),ne.success(U("removeCompleted"))}else await ci({path:r.value,type:"scanned"}),ne.success(U("addCompleted"));ut.emit("searchIndexExpired"),ut.emit("updateGlobalSetting")},N=K(!1),Q=K(r.value),P=()=>{N.value=!0,Q.value=r.value},j=async()=>{await I(Q.value),N.value=!1};ye("click",m=>{var F,x,X;(X=(x=(F=m.target)==null?void 0:F.className)==null?void 0:x.includes)!=null&&X.call(x,"ant-input")||(N.value=!1)});const H=()=>{const m=parent.location,F=m.href.substring(0,m.href.length-m.search.length),x=new URLSearchParams(m.search);x.set("action","open"),y.value&&x.set("walk","1"),x.set("path",r.value);const X=`${F}?${x.toString()}`;xe(X,U("copyLocationUrlSuccessMsg"))},V=(m="tag-search")=>{const F=L.tabList[b.value.tabIdx],x={type:m,key:ue(),searchScope:r.value,name:U(m==="tag-search"?"imgSearch":"fuzzy-search")};F.panes.push(x),F.key=x.key},ie=()=>c.value.emit("selectAll"),$=async()=>{await ti(r.value),await w()},D=()=>{const m=r.value;Ce.set(m,n.value);const F=L.tabList[b.value.tabIdx],x={type:"local",key:ue(),path:m,name:U("local"),stackKey:m,walkModePath:m};F.panes.push(x),F.key=x.key},G=q(()=>!y.value&&C.value.some(m=>m.type==="dir"));return{locInputValue:Q,isLocationEditing:N,onLocEditEnter:j,onEditBtnClick:P,addToSearchScanPathAndQuickMove:T,searchPathInfo:O,refresh:w,copyLocation:a,back:g,openNext:l,currPage:s,currLocation:r,to:I,stack:n,scroller:i,share:H,selectAll:ie,quickMoveTo:f,onCreateFloderBtnClick:$,onWalkBtnClick:D,showWalkButton:G,searchInCurrentDir:V}}function _a({fetchNext:e}={}){const{scroller:i,sortedFiles:t,sortMethod:n,currLocation:s,stackViewEl:r,canLoadNext:d,previewIdx:c,props:p,walker:b}=le().toRefs(),{state:o}=le(),y=K(!1),C=K(L.defaultGridCellWidth),S=q(()=>C.value+16),a=44,{width:l}=En(r),g=q(()=>~~(l.value/S.value)),v=q(()=>{const T=S.value;return{first:T+(C.value<=160?0:a),second:T}}),I=K(!1),w=async()=>{var T;if(!(I.value||!p.value.walkModePath||!d.value))try{I.value=!0,await((T=b.value)==null?void 0:T.next())}finally{I.value=!1}},f=async(T=!1)=>{const N=i.value,Q=()=>T?c.value:(N==null?void 0:N.$_endIndex)??0,P=()=>{const j=t.value.length,H=50;return j?e?Q()>j-H:Q()>j-H&&d.value:!0};for(;P();){await Ge(30);const j=await(e??w)();if(typeof j=="boolean"&&!j)return}};o.useEventListen("loadNextDir",f);const z=()=>{const T=i.value;if(T){const N=t.value.slice(Math.max(T.$_startIndex-10,0),T.$_endIndex+10).filter(Q=>Q.is_under_scanned_path&&te(Q.name)).map(Q=>Q.fullpath);je.fetchImageTags(N)}};he(s,De(z,150));const O=De(async()=>{await f(),z()},150);return{gridItems:g,sortedFiles:t,sortMethodConv:Pn,moreActionsDropdownShow:y,gridSize:S,sortMethod:n,onScroll:O,loadNextDir:w,loadNextDirLoading:I,canLoadNext:d,itemSize:v,cellWidth:C}}function Ca(){const{currLocation:e,sortedFiles:i,currPage:t,multiSelectedIdxs:n,eventEmitter:s,walker:r}=le().toRefs(),d=()=>{n.value=[]};return ye("click",d),ye("blur",d),he(t,d),{onFileDragStart:(o,y)=>{const C=xt(i.value[y]);Ct.fileDragging=!0,console.log("onFileDragStart set drag file ",o,y,C);const S=[C];let a=C.type==="dir";if(n.value.includes(y)){const g=n.value.map(v=>i.value[v]);S.push(...g),a=g.some(v=>v.type==="dir")}const l={includeDir:a,loc:e.value||"search-result",path:dt(S,"fullpath").map(g=>g.fullpath),nodes:dt(S,"fullpath"),__id:"FileTransferData"};o.dataTransfer.setData("text/plain",JSON.stringify(l))},onDrop:async o=>{if(r.value)return;const y=Dn(o);if(!y)return;const C=e.value;if(y.loc===C)return;const S=Lt(),a=async()=>S.pushAction(async()=>{await si(y.path,C),s.value.emit("refresh"),ge.destroyAll()}),l=()=>S.pushAction(async()=>{await Kt(y.path,C),Ee.emit("removeFiles",{paths:y.path,loc:y.loc}),s.value.emit("refresh"),ge.destroyAll()});ge.confirm({title:U("confirm")+"?",width:"60vw",content:()=>{let g,v,I;return A("div",null,[A("div",null,[`${U("moveSelectedFilesTo")} ${C}`,A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[y.path.map(w=>A("li",null,[w.split(/[/\\]/).pop()]))])]),A(Jt,null,null),A("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},class:"actions"},[A(Fe,{onClick:ge.destroyAll},Be(g=U("cancel"))?g:{default:()=>[g]}),A(Fe,{type:"primary",loading:!S.isIdle,onClick:a},Be(v=U("copy"))?v:{default:()=>[v]}),A(Fe,{type:"primary",loading:!S.isIdle,onClick:l},Be(I=U("move"))?I:{default:()=>[I]})])])},maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},multiSelectedIdxs:n,onFileDragEnd:()=>{Ct.fileDragging=!1}}}function Ea({openNext:e}){const i=K(!1),t=K(""),{sortedFiles:n,previewIdx:s,multiSelectedIdxs:r,stack:d,currLocation:c,spinning:p,previewing:b,stackViewEl:o,eventEmitter:y,props:C,deletedFiles:S}=le().toRefs(),a=_e;He("removeFiles",({paths:w,loc:f})=>{a(f)!==a(c.value)||!fe(d.value)||(w.forEach(O=>S.value.add(O)),w.filter(te).forEach(O=>S.value.add(O.replace(/\.\w+$/,".txt"))))}),He("addFiles",({files:w,loc:f})=>{if(a(f)!==a(c.value))return;const z=fe(d.value);z&&z.files.unshift(...w)});const l=Lt(),g=async(w,f,z)=>{s.value=z,L.fullscreenPreviewInitialUrl=oe(f);const O=r.value.indexOf(z);if(w.shiftKey){if(O!==-1)r.value.splice(O,1);else{r.value.push(z),r.value.sort((Q,P)=>Q-P);const T=r.value[0],N=r.value[r.value.length-1];r.value=Gt(T,N+1)}w.stopPropagation()}else w.ctrlKey||w.metaKey?(O!==-1?r.value.splice(O,1):r.value.push(z),w.stopPropagation()):await e(f)},v=async(w,f,z)=>{var H,V,ie;const O=oe(f),T=c.value,N={IIB_container_id:parent.IIB_container_id},Q=()=>{let $=[];return r.value.includes(z)?$=r.value.map(D=>n.value[D]):$.push(f),$},P=async $=>{if(!p.value)try{p.value=!0,await $n(f.fullpath),Ie.postMessage({...N,event:"click_hidden_button",btnEleId:"iib_hidden_img_update_trigger"}),await Bn(),Ie.postMessage({...N,event:"click_hidden_button",btnEleId:`iib_hidden_tab_${$}`})}catch(D){console.error(D),ne.error("发送图像失败，请携带console的错误消息找开发者")}finally{p.value=!1}},j=`${w.key}`;if(j.startsWith("toggle-tag-")){const $=+j.split("toggle-tag-")[1],{is_remove:D}=await ui({tag_id:$,img_path:f.fullpath}),G=(V=(H=L.conf)==null?void 0:H.all_custom_tags.find(m=>m.id===$))==null?void 0:V.name;await je.refreshTags([f.fullpath]),ne.success(U(D?"removedTagFromImage":"addedTagToImage",{tag:G}));return}else if(j.startsWith("batch-add-tag-")||j.startsWith("batch-remove-tag-")){const $=+j.split("-tag-")[1],D=j.includes("add")?"add":"remove",G=Q().map(m=>m.fullpath);await di({tag_id:$,img_paths:G,action:D}),await je.refreshTags(G),ne.success(U(D==="add"?"addCompleted":"removeCompleted"));return}switch(w.key){case"previewInNewWindow":return window.open(O);case"download":{const $=Q();Nn($.map(D=>oe(D,!0)));break}case"copyPreviewUrl":return xe(parent.document.location.origin+O);case"send2txt2img":return P("txt2img");case"send2img2img":return P("img2img");case"send2inpaint":return P("inpaint");case"send2extras":return P("extras");case"send2savedDir":{const $=L.quickMovePaths.find(m=>m.key==="outdir_save");if(!$)return ne.error(U("unknownSavedDir"));const D=zn($.dir,(ie=L.conf)==null?void 0:ie.sd_cwd),G=Q();await Kt(G.map(m=>m.fullpath),D,!0),Ee.emit("removeFiles",{paths:G.map(m=>m.fullpath),loc:c.value}),Ee.emit("addFiles",{files:G,loc:D});break}case"send2controlnet-img2img":case"send2controlnet-txt2img":{const $=w.key.split("-")[1];Ie.postMessage({...N,event:"send_to_control_net",type:$,url:oe(f)});break}case"send2outpaint":{t.value=await l.pushAction(()=>ft(f.fullpath)).res;const[$,D]=(t.value||"").split(`
`);Ie.postMessage({...N,event:"send_to_outpaint",url:oe(f),prompt:$,negPrompt:D.slice(17)});break}case"openWithWalkMode":{Ce.set(T,d.value);const $=L.tabList[C.value.tabIdx],D={type:"local",key:ue(),path:f.fullpath,name:U("local"),stackKey:T,walkModePath:f.fullpath};$.panes.push(D),$.key=D.key;break}case"openInNewTab":{Ce.set(T,d.value);const $=L.tabList[C.value.tabIdx],D={type:"local",key:ue(),path:f.fullpath,name:U("local"),stackKey:T};$.panes.push(D),$.key=D.key;break}case"openOnTheRight":{Ce.set(T,d.value);let $=L.tabList[C.value.tabIdx+1];$||($={panes:[],key:"",id:ue()},L.tabList[C.value.tabIdx+1]=$);const D={type:"local",key:ue(),path:f.fullpath,name:U("local"),stackKey:T};$.panes.push(D),$.key=D.key;break}case"send2BatchDownload":{us.addFiles(Q());break}case"viewGenInfo":{i.value=!0,t.value=await l.pushAction(()=>ft(f.fullpath)).res;break}case"openWithLocalFileBrowser":{await Mn(f.fullpath);break}case"deleteFiles":{const $=Q(),D=async()=>{const G=$.map(m=>m.fullpath);await ri(G),ne.success(U("deleteSuccess")),Ee.emit("removeFiles",{paths:G,loc:c.value})};if($.length===1&&L.ignoredConfirmActions.deleteOneOnly)return D();await new Promise(G=>{ge.confirm({title:U("confirmDelete"),maskClosable:!0,width:"60vw",content:()=>A("div",null,[A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[$.map(m=>A("li",null,[m.fullpath.split(/[/\\]/).pop()]))]),A(Jt,null,null),A(ni,{checked:L.ignoredConfirmActions.deleteOneOnly,"onUpdate:checked":m=>L.ignoredConfirmActions.deleteOneOnly=m},{default:()=>[U("deleteOneOnlySkipConfirm"),M(" ("),U("resetOnGlobalSettingsPage"),M(")")]})]),async onOk(){await D(),G()}})});break}}return{}},{isOutside:I}=Tn(o);return ye("keydown",w=>{var z,O,T;const f=ii(w);if(b.value){const N=(z=Object.entries(L.shortcut).find(Q=>Q[1]===f&&Q[1]))==null?void 0:z[0];if(N){w.stopPropagation(),w.preventDefault();const Q=s.value,P=n.value[Q];switch(N){case"delete":return oe(P)===L.fullscreenPreviewInitialUrl?ne.warn(U("fullscreenRestriction")):v({key:"deleteFiles"},P,Q);case"download":return v({key:"download"},P,Q);default:{const j=(O=/^toggle_tag_(.*)$/.exec(N))==null?void 0:O[1],H=(T=L.conf)==null?void 0:T.all_custom_tags.find(V=>V.name===j);return H?v({key:`toggle-tag-${H.id}`},P,Q):void 0}}}}else!I.value&&["Ctrl + KeyA","Cmd + KeyA"].includes(f)&&(w.preventDefault(),w.stopPropagation(),y.value.emit("selectAll"))}),{onFileItemClick:g,onContextMenuClick:v,showGenInfo:i,imageGenInfo:t,q:l}}const Pa=()=>{const{stackViewEl:e}=le().toRefs(),i=K(-1);return On(e,t=>{var s;let n=t.target;for(;n.parentElement;)if(n=n.parentElement,n.tagName.toLowerCase()==="li"&&n.classList.contains("file-item-trigger")){const r=(s=n.dataset)==null?void 0:s.idx;r&&Number.isSafeInteger(+r)&&(i.value=+r);return}}),{showMenuIdx:i}};function ds(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var t=e.indexOf("Trident/");if(t>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}let Pe;function Ve(){Ve.init||(Ve.init=!0,Pe=ds()!==-1)}var Me={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Ve(),Ht(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Pe&&this.$el.appendChild(e),e.data="about:blank",Pe||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Pe&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const fs=Qn();Rt("data-v-b329ee4c");const hs={class:"resize-observer",tabindex:"-1"};jt();const gs=fs((e,i,t,n,s,r)=>(h(),W("div",hs)));Me.render=gs;Me.__scopeId="data-v-b329ee4c";Me.__file="src/components/ResizeObserver.vue";function Te(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Te=function(i){return typeof i}:Te=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Te(e)}function ps(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function Et(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vs(e,i,t){return i&&Et(e.prototype,i),t&&Et(e,t),e}function Pt(e){return ms(e)||ys(e)||bs(e)||ks()}function ms(e){if(Array.isArray(e))return Ue(e)}function ys(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function bs(e,i){if(e){if(typeof e=="string")return Ue(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ue(e,i)}}function Ue(e,i){(i==null||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function ks(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function Ss(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,s,r,d=function(p){for(var b=arguments.length,o=new Array(b>1?b-1:0),y=1;y<b;y++)o[y-1]=arguments[y];if(r=o,!(n&&p===s)){var C=t.leading;typeof C=="function"&&(C=C(p,s)),(!n||p!==s)&&C&&e.apply(void 0,[p].concat(Pt(r))),s=p,clearTimeout(n),n=setTimeout(function(){e.apply(void 0,[p].concat(Pt(r))),n=0},i)}};return d._clear=function(){clearTimeout(n),n=null},d}function en(e,i){if(e===i)return!0;if(Te(e)==="object"){for(var t in e)if(!en(e[t],i[t]))return!1;return!0}return!1}var As=function(){function e(i,t,n){ps(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(t,n)}return vs(e,[{key:"createObserver",value:function(t,n){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ws(t),this.callback=function(c,p){s.options.callback(c,p),c&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},d=r.leading;this.callback=Ss(this.callback,this.options.throttle,{leading:function(p){return d==="both"||d==="visible"&&p||d==="hidden"&&!p}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(c){var p=c[0];if(c.length>1){var b=c.find(function(y){return y.isIntersecting});b&&(p=b)}if(s.callback){var o=p.isIntersecting&&p.intersectionRatio>=s.threshold;if(o===s.oldResult)return;s.oldResult=o,s.callback(o,p)}},this.options.intersection),Ht(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function tn(e,i,t){var n=i.value;if(n)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new As(e,n,t);e._vue_visibilityState=s}}function Is(e,i,t){var n=i.value,s=i.oldValue;if(!en(n,s)){var r=e._vue_visibilityState;if(!n){nn(e);return}r?r.createObserver(n,t):tn(e,{value:n},t)}}function nn(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var _s={beforeMount:tn,updated:Is,unmounted:nn},Cs={itemsLimit:1e3},Es=/(auto|scroll)/;function sn(e,i){return e.parentNode===null?i:sn(e.parentNode,i.concat([e]))}var Qe=function(i,t){return getComputedStyle(i,null).getPropertyValue(t)},Ps=function(i){return Qe(i,"overflow")+Qe(i,"overflow-y")+Qe(i,"overflow-x")},Ts=function(i){return Es.test(Ps(i))};function Tt(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=sn(e.parentNode,[]),t=0;t<i.length;t+=1)if(Ts(i[t]))return i[t];return document.scrollingElement||document.documentElement}}function We(e){"@babel/helpers - typeof";return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},We(e)}var Os={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Ds(){return this.items.length&&We(this.items[0])!=="object"}var Je=!1;if(typeof window<"u"){Je=!1;try{var Ms=Object.defineProperty({},"passive",{get:function(){Je=!0}});window.addEventListener("test",null,Ms)}catch{}}let zs=0;var rn={name:"RecycleScroller",components:{ResizeObserver:Me},directives:{ObserveVisibility:_s},props:{...Os,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,t=this.sizeField,n=this.minItemSize;let s=1e4,r=0,d;for(let c=0,p=i.length;c<p;c++)d=i[c][t]||n,d<s&&(s=d),r+=d,e[c]={accumulator:r,size:d};return this.$_computedMinItemSize=s,e}return[]},simpleArray:Ds,itemIndexByKey(){const{keyField:e,items:i}=this,t={};for(let n=0,s=i.length;n<s;n++)t[i[n][e]]=n;return t}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,t,n,s){const r=xn({id:zs++,index:i,used:!0,key:n,type:s}),d=Ln({item:t,position:0,nr:r});return e.push(d),d},unuseView(e,i=!1){const t=this.$_unusedViews,n=e.nr.type;let s=t.get(n);s||(s=[],t.set(n,s)),s.push(e),i||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const i=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:t}=this.updateVisibleItems(!1,!0);t||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});i(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&i()},this.updateInterval))}},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const t=this.itemSize,n=this.gridItems||1,s=this.itemSecondarySize||t,r=this.$_computedMinItemSize,d=this.typeField,c=this.simpleArray?null:this.keyField,p=this.items,b=p.length,o=this.sizes,y=this.$_views,C=this.$_unusedViews,S=this.pool,a=this.itemIndexByKey;let l,g,v,I,w;if(!b)l=g=I=w=v=0;else if(this.$_prerender)l=I=0,g=w=Math.min(this.prerender,p.length),v=null;else{const P=this.getScroll();if(i){let V=P.start-this.$_lastUpdateScrollPosition;if(V<0&&(V=-V),t===null&&V<r||V<t)return{continuous:!0}}this.$_lastUpdateScrollPosition=P.start;const j=this.buffer;P.start-=j,P.end+=j;let H=0;if(this.$refs.before&&(H=this.$refs.before.scrollHeight,P.start-=H),this.$refs.after){const V=this.$refs.after.scrollHeight;P.end+=V}if(t===null){let V,ie=0,$=b-1,D=~~(b/2),G;do G=D,V=o[D].accumulator,V<P.start?ie=D:D<b-1&&o[D+1].accumulator>P.start&&($=D),D=~~((ie+$)/2);while(D!==G);for(D<0&&(D=0),l=D,v=o[b-1].accumulator,g=D;g<b&&o[g].accumulator<P.end;g++);for(g===-1?g=p.length-1:(g++,g>b&&(g=b)),I=l;I<b&&H+o[I].accumulator<P.start;I++);for(w=I;w<b&&H+o[w].accumulator<P.end;w++);}else{l=~~(P.start/t*n);const V=l%n;l-=V,g=Math.ceil(P.end/t*n),I=Math.max(0,Math.floor((P.start-H)/t*n)),w=Math.floor((P.end-H)/t*n),l<0&&(l=0),g>b&&(g=b),I<0&&(I=0),w>b&&(w=b),v=Math.ceil(b/n)*t}}g-l>Cs.itemsLimit&&this.itemsLimitError(),this.totalSize=v;let f;const z=l<=this.$_endIndex&&g>=this.$_startIndex;if(z)for(let P=0,j=S.length;P<j;P++)f=S[P],f.nr.used&&(e&&(f.nr.index=a[f.item[c]]),(f.nr.index==null||f.nr.index<l||f.nr.index>=g)&&this.unuseView(f));const O=z?null:new Map;let T,N,Q;for(let P=l;P<g;P++){T=p[P];const j=c?T[c]:T;if(j==null)throw new Error(`Key is ${j} on item (keyField is '${c}')`);if(f=y.get(j),!t&&!o[P].size){f&&this.unuseView(f);continue}N=T[d];let H=C.get(N),V=!1;if(!f)z?H&&H.length?f=H.pop():f=this.addView(S,P,T,j,N):(Q=O.get(N)||0,(!H||Q>=H.length)&&(f=this.addView(S,P,T,j,N),this.unuseView(f,!0),H=C.get(N)),f=H[Q],O.set(N,Q+1)),y.delete(f.nr.key),f.nr.used=!0,f.nr.index=P,f.nr.key=j,f.nr.type=N,y.set(j,f),V=!0;else if(!f.nr.used&&(f.nr.used=!0,f.nr.index=P,V=!0,H)){const ie=H.indexOf(f);ie!==-1&&H.splice(ie,1)}f.item=T,V&&(P===p.length-1&&this.$emit("scroll-end"),P===0&&this.$emit("scroll-start")),t===null?(f.position=o[P-1].accumulator,f.offset=0):(f.position=Math.floor(P/n)*t,f.offset=P%n*s)}return this.$_startIndex=l,this.$_endIndex=g,this.emitUpdate&&this.$emit("update",l,g,I,w),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:z}},getListenerTarget(){let e=Tt(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,t=i==="vertical";let n;if(this.pageMode){const s=e.getBoundingClientRect(),r=t?s.height:s.width;let d=-(t?s.top:s.left),c=t?window.innerHeight:window.innerWidth;d<0&&(c+=d,d=0),d+c>r&&(c=r-d),n={start:d,end:d+c}}else t?n={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:n={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return n},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,Je?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;const t=this.gridItems||1;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=Math.floor(e/t)*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){const i=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let t,n,s;if(this.pageMode){const r=Tt(this.$el),d=r.tagName==="HTML"?0:r[i.scroll],c=r.getBoundingClientRect(),b=this.$el.getBoundingClientRect()[i.start]-c[i.start];t=r,n=i.scroll,s=e+d+b}else t=this.$el,n=i.scroll,s=e;t[n]=s},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.nr.index-i.nr.index)}}};const Ns={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Fs={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function $s(e,i,t,n,s,r){const d=Rn("ResizeObserver"),c=jn("observe-visibility");return Hn((h(),k("div",{class:de(["vue-recycle-scroller",{ready:s.ready,"page-mode":t.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:i[0]||(i[0]=(...p)=>r.handleScroll&&r.handleScroll(...p))},[e.$slots.before?(h(),k("div",Ns,[Se(e.$slots,"before")],512)):E("v-if",!0),(h(),W(ht(t.listTag),{ref:"wrapper",style:Wn({[e.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"}),class:de(["vue-recycle-scroller__item-wrapper",t.listClass])},{default:B(()=>[(h(!0),k(Z,null,re(s.pool,p=>(h(),W(ht(t.itemTag),Vn({key:p.nr.id,style:s.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${p.position}px) translate${e.direction==="vertical"?"X":"Y"}(${p.offset}px)`,width:t.gridItems?`${e.direction==="vertical"&&t.itemSecondarySize||t.itemSize}px`:void 0,height:t.gridItems?`${e.direction==="horizontal"&&t.itemSecondarySize||t.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[t.itemClass,{hover:!t.skipHover&&s.hoverKey===p.nr.key}]]},Un(t.skipHover?{}:{mouseenter:()=>{s.hoverKey=p.nr.key},mouseleave:()=>{s.hoverKey=null}})),{default:B(()=>[Se(e.$slots,"default",{item:p.item,index:p.nr.index,active:p.nr.used})]),_:2},1040,["style","class"]))),128)),Se(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(h(),k("div",Fs,[Se(e.$slots,"after")],512)):E("v-if",!0),A(d,{onNotify:r.handleResize},null,8,["onNotify"])],34)),[[c,r.handleVisibilityChange]])}rn.render=$s;rn.__file="src/components/RecycleScroller.vue";const Ot=be({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},disableDelete:{type:Boolean},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(e,{emit:i}){const t=e,n=qe(),s=q(()=>{var r;return(((r=n.conf)==null?void 0:r.all_custom_tags)??[]).reduce((d,c)=>[...d,{...c,selected:!!t.selectedTag.find(p=>p.id===c.id)}],[])});return(r,d)=>{const c=Vt,p=Jn,b=Kn,o=Ut;return h(),W(o,{onClick:d[0]||(d[0]=y=>i("contextMenuClick",y,r.file,r.idx))},{default:B(()=>{var y;return[A(c,{key:"deleteFiles",disabled:r.disableDelete},{default:B(()=>[M(_(r.$t("deleteSelected")),1)]),_:1},8,["disabled"]),r.file.type==="dir"?(h(),k(Z,{key:0},[A(c,{key:"openInNewTab"},{default:B(()=>[M(_(r.$t("openInNewTab")),1)]),_:1}),A(c,{key:"openOnTheRight"},{default:B(()=>[M(_(r.$t("openOnTheRight")),1)]),_:1}),A(c,{key:"openWithWalkMode"},{default:B(()=>[M(_(r.$t("openWithWalkMode")),1)]),_:1})],64)):E("",!0),r.file.type==="file"?(h(),k(Z,{key:1},[J(te)(r.file.name)?(h(),k(Z,{key:0},[A(c,{key:"viewGenInfo"},{default:B(()=>[M(_(r.$t("viewGenerationInfo")),1)]),_:1}),A(p),((y=J(n).conf)==null?void 0:y.launch_mode)!=="server"?(h(),k(Z,{key:0},[A(c,{key:"send2txt2img"},{default:B(()=>[M(_(r.$t("sendToTxt2img")),1)]),_:1}),A(c,{key:"send2img2img"},{default:B(()=>[M(_(r.$t("sendToImg2img")),1)]),_:1}),A(c,{key:"send2inpaint"},{default:B(()=>[M(_(r.$t("sendToInpaint")),1)]),_:1}),A(c,{key:"send2extras"},{default:B(()=>[M(_(r.$t("sendToExtraFeatures")),1)]),_:1}),A(b,{key:"sendToThirdPartyExtension",title:r.$t("sendToThirdPartyExtension")},{default:B(()=>[A(c,{key:"send2controlnet-txt2img"},{default:B(()=>[M("ControlNet - "+_(r.$t("t2i")),1)]),_:1}),A(c,{key:"send2controlnet-img2img"},{default:B(()=>[M("ControlNet - "+_(r.$t("i2i")),1)]),_:1}),A(c,{key:"send2outpaint"},{default:B(()=>[M("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):E("",!0),A(c,{key:"send2BatchDownload"},{default:B(()=>[M(_(r.$t("sendToBatchDownload")),1)]),_:1}),A(c,{key:"send2savedDir"},{default:B(()=>[M(_(r.$t("send2savedDir")),1)]),_:1}),A(p),r.isSelectedMutilFiles?(h(),k(Z,{key:1},[A(b,{key:"batch-add-tag",title:r.$t("batchAddTag")},{default:B(()=>[(h(!0),k(Z,null,re(s.value,C=>(h(),W(c,{key:`batch-add-tag-${C.id}`},{default:B(()=>[M(_(C.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),A(b,{key:"batch-remove-tag",title:r.$t("batchRemoveTag")},{default:B(()=>[(h(!0),k(Z,null,re(s.value,C=>(h(),W(c,{key:`batch-remove-tag-${C.id}`},{default:B(()=>[M(_(C.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(h(),W(b,{key:"toggle-tag",title:r.$t("toggleTag")},{default:B(()=>[(h(!0),k(Z,null,re(s.value,C=>(h(),W(c,{key:`toggle-tag-${C.id}`},{default:B(()=>[M(_(C.name)+" ",1),C.selected?(h(),W(J(qt),{key:0})):(h(),W(J(Yt),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),A(c,{key:"openWithLocalFileBrowser"},{default:B(()=>[M(_(r.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):E("",!0),A(c,{key:"previewInNewWindow"},{default:B(()=>[M(_(r.$t("previewInNewWindow")),1)]),_:1}),A(c,{key:"download"},{default:B(()=>[M(_(r.$t("download")),1)]),_:1}),A(c,{key:"copyPreviewUrl"},{default:B(()=>[M(_(r.$t("copySourceFilePreviewLink")),1)]),_:1})],64)):E("",!0)]}),_:1})}}}),R=e=>(Rt("data-v-611ecf47"),e=e(),jt(),e),Bs={class:"changeIndicatorWrapper"},Qs={key:0,class:"changeIndicatorsLeft changeIndicators"},xs={key:0,class:"promptChangeIndicator changeIndicator"},Ls={key:1,class:"negpromptChangeIndicator changeIndicator"},Rs={key:2,class:"seedChangeIndicator changeIndicator"},js={key:3,class:"stepsChangeIndicator changeIndicator"},Hs={key:4,class:"cfgChangeIndicator changeIndicator"},Vs={key:5,class:"sizeChangeIndicator changeIndicator"},Us={key:6,class:"modelChangeIndicator changeIndicator"},Ws={key:7,class:"samplerChangeIndicator changeIndicator"},Js={key:8,class:"otherChangeIndicator changeIndicator"},Ks={class:"hoverOverlay"},qs=R(()=>u("strong",null,"This file",-1)),Gs=R(()=>u("br",null,null,-1)),Ys=R(()=>u("br",null,null,-1)),Zs={key:0},Xs=R(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),er={key:1},tr=R(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),nr={key:2},ir=R(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),sr={key:3},rr=R(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),ar={key:4},lr=R(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),or={key:5},cr=R(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),ur={key:6},dr=R(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),fr=R(()=>u("br",null,null,-1)),hr={key:7},gr=R(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),pr=R(()=>u("br",null,null,-1)),vr=R(()=>u("br",null,null,-1)),mr={key:0},yr=R(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),br=R(()=>u("br",null,null,-1)),kr=R(()=>u("br",null,null,-1)),wr={key:1,class:"changeIndicatorsRight changeIndicators"},Sr={key:0,class:"promptChangeIndicator changeIndicator"},Ar={key:1,class:"negpromptChangeIndicator changeIndicator"},Ir={key:2,class:"seedChangeIndicator changeIndicator"},_r={key:3,class:"stepsChangeIndicator changeIndicator"},Cr={key:4,class:"cfgChangeIndicator changeIndicator"},Er={key:5,class:"sizeChangeIndicator changeIndicator"},Pr={key:6,class:"modelChangeIndicator changeIndicator"},Tr={key:7,class:"samplerChangeIndicator changeIndicator"},Or={key:8,class:"otherChangeIndicator changeIndicator"},Dr={class:"hoverOverlay"},Mr=R(()=>u("strong",null,"This file",-1)),zr=R(()=>u("br",null,null,-1)),Nr=R(()=>u("br",null,null,-1)),Fr={key:0},$r=R(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Br={key:1},Qr=R(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),xr={key:2},Lr=R(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),Rr={key:3},jr=R(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),Hr={key:4},Vr=R(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),Ur={key:5},Wr=R(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),Jr={key:6},Kr=R(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),qr=R(()=>u("br",null,null,-1)),Gr={key:7},Yr=R(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Zr=R(()=>u("br",null,null,-1)),Xr=R(()=>u("br",null,null,-1)),ea={key:0},ta=R(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),na=R(()=>u("br",null,null,-1)),ia=R(()=>u("br",null,null,-1)),sa=be({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(e){function i(n){const s=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],r=Object.keys(n).filter(d=>!s.includes(d));return Object.fromEntries(r.map(d=>[d,n[d]]))}function t(n){return Object.keys(i(n)).length>0}return(n,s)=>(h(),k("div",Bs,[n.genDiffToPrevious.empty?E("",!0):(h(),k("div",Qs,["prompt"in n.genDiffToPrevious.diff?(h(),k("div",xs,"P+")):E("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(h(),k("div",Ls,"P-")):E("",!0),"seed"in n.genDiffToPrevious.diff?(h(),k("div",Rs,"Se")):E("",!0),"steps"in n.genDiffToPrevious.diff?(h(),k("div",js,"St")):E("",!0),"cfgScale"in n.genDiffToPrevious.diff?(h(),k("div",Hs,"Cf")):E("",!0),"size"in n.genDiffToPrevious.diff?(h(),k("div",Vs,"Si")):E("",!0),"Model"in n.genDiffToPrevious.diff?(h(),k("div",Us,"Mo")):E("",!0),"Sampler"in n.genDiffToPrevious.diff?(h(),k("div",Ws,"Sa")):E("",!0),t(n.genDiffToPrevious.diff)?(h(),k("div",Js,"Ot")):E("",!0)])),u("div",Ks,[u("small",null,[A(J(yt)),qs,M(" vs "+_(n.genDiffToPrevious.otherFile)+" ",1),Gs,Ys,u("table",null,["prompt"in n.genDiffToPrevious.diff?(h(),k("tr",Zs,[Xs,u("td",null,_(n.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):E("",!0),"negativePrompt"in n.genDiffToPrevious.diff?(h(),k("tr",er,[tr,u("td",null,_(n.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):E("",!0),"seed"in n.genDiffToPrevious.diff?(h(),k("tr",nr,[ir,u("td",null,[u("strong",null,_(n.genDiffToPrevious.diff.seed[0]),1),M(" vs "+_(n.genDiffToPrevious.diff.seed[1]),1)])])):E("",!0),"steps"in n.genDiffToPrevious.diff?(h(),k("tr",sr,[rr,u("td",null,[u("strong",null,_(n.genDiffToPrevious.diff.steps[0]),1),M(" vs "+_(n.genDiffToPrevious.diff.steps[1]),1)])])):E("",!0),"cfgScale"in n.genDiffToPrevious.diff?(h(),k("tr",ar,[lr,u("td",null,[u("strong",null,_(n.genDiffToPrevious.diff.cfgScale[0]),1),M(" vs "+_(n.genDiffToPrevious.diff.cfgScale[1]),1)])])):E("",!0),"size"in n.genDiffToPrevious.diff?(h(),k("tr",or,[cr,u("td",null,[u("strong",null,_(n.genDiffToPrevious.diff.size[0]),1),M(" vs "+_(n.genDiffToPrevious.diff.size[1]),1)])])):E("",!0),"Model"in n.genDiffToPrevious.diff?(h(),k("tr",ur,[dr,u("td",null,[u("strong",null,_(n.genDiffToPrevious.diff.Model[0]),1),fr,M(" vs "+_(n.genDiffToPrevious.diff.Model[1]),1)])])):E("",!0),"Sampler"in n.genDiffToPrevious.diff?(h(),k("tr",hr,[gr,u("td",null,[u("strong",null,_(n.genDiffToPrevious.diff.Sampler[0]),1),pr,M(" vs "+_(n.genDiffToPrevious.diff.Sampler[1]),1)])])):E("",!0)]),vr,t(n.genDiffToPrevious.diff)?(h(),k("div",mr,[yr,M(" props that changed:"),br,kr,u("ul",null,[(h(!0),k(Z,null,re(i(n.genDiffToPrevious.diff),(r,d)=>(h(),k("li",null,_(d),1))),256))])])):E("",!0)])]),n.genDiffToNext.empty?E("",!0):(h(),k("div",wr,["prompt"in n.genDiffToNext.diff?(h(),k("div",Sr,"P+")):E("",!0),"negativePrompt"in n.genDiffToNext.diff?(h(),k("div",Ar,"P-")):E("",!0),"seed"in n.genDiffToNext.diff?(h(),k("div",Ir,"Se")):E("",!0),"steps"in n.genDiffToNext.diff?(h(),k("div",_r,"St")):E("",!0),"cfgScale"in n.genDiffToNext.diff?(h(),k("div",Cr,"Cf")):E("",!0),"size"in n.genDiffToNext.diff?(h(),k("div",Er,"Si")):E("",!0),"Model"in n.genDiffToNext.diff?(h(),k("div",Pr,"Mo")):E("",!0),"Sampler"in n.genDiffToNext.diff?(h(),k("div",Tr,"Sa")):E("",!0),t(n.genDiffToNext.diff)?(h(),k("div",Or,"Ot")):E("",!0)])),u("div",Dr,[u("small",null,[A(J(yt)),Mr,M(" vs "+_(n.genDiffToNext.otherFile)+" ",1),zr,Nr,u("table",null,["prompt"in n.genDiffToNext.diff?(h(),k("tr",Fr,[$r,u("td",null,_(n.genDiffToNext.diff.prompt)+" tokens changed",1)])):E("",!0),"negativePrompt"in n.genDiffToNext.diff?(h(),k("tr",Br,[Qr,u("td",null,_(n.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):E("",!0),"seed"in n.genDiffToNext.diff?(h(),k("tr",xr,[Lr,u("td",null,[u("strong",null,_(n.genDiffToNext.diff.seed[0]),1),M(" vs "+_(n.genDiffToNext.diff.seed[1]),1)])])):E("",!0),"steps"in n.genDiffToNext.diff?(h(),k("tr",Rr,[jr,u("td",null,[u("strong",null,_(n.genDiffToNext.diff.steps[0]),1),M(" vs "+_(n.genDiffToNext.diff.steps[1]),1)])])):E("",!0),"cfgScale"in n.genDiffToNext.diff?(h(),k("tr",Hr,[Vr,u("td",null,[u("strong",null,_(n.genDiffToNext.diff.cfgScale[0]),1),M(" vs "+_(n.genDiffToNext.diff.cfgScale[1]),1)])])):E("",!0),"size"in n.genDiffToNext.diff?(h(),k("tr",Ur,[Wr,u("td",null,[u("strong",null,_(n.genDiffToNext.diff.size[0]),1),M(" vs "+_(n.genDiffToNext.diff.size[1]),1)])])):E("",!0),"Model"in n.genDiffToNext.diff?(h(),k("tr",Jr,[Kr,u("td",null,[u("strong",null,_(n.genDiffToNext.diff.Model[0]),1),qr,M(" vs "+_(n.genDiffToNext.diff.Model[1]),1)])])):E("",!0),"Sampler"in n.genDiffToNext.diff?(h(),k("tr",Gr,[Yr,u("td",null,[u("strong",null,_(n.genDiffToNext.diff.Sampler[0]),1),Zr,M(" vs "+_(n.genDiffToNext.diff.Sampler[1]),1)])])):E("",!0)]),Xr,t(n.genDiffToNext.diff)?(h(),k("div",ea,[ta,M(" props that changed:"),na,ia,u("ul",null,[(h(!0),k(Z,null,re(i(n.genDiffToNext.diff),(r,d)=>(h(),k("li",null,_(d),1))),256))])])):E("",!0)])])]))}});const ra=Wt(sa,[["__scopeId","data-v-611ecf47"]]),aa=["data-idx"],la={key:1,class:"more"},oa={class:"float-btn-wrap"},ca={key:1,class:"tags-container"},ua={class:"play-icon"},da={key:0,class:"tags-container"},fa={key:4,class:"preview-icon-wrap"},ha={key:5,class:"profile"},ga={class:"name line-clamp-1"},pa={class:"basic-info"},va=be({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genDiffToPrevious:{default:()=>({empty:!0,ownFile:"",otherFile:"",diff:""})},genDiffToNext:{default:()=>({empty:!0,ownFile:"",otherFile:"",diff:""})},genInfo:{},enableChangeIndicator:{type:Boolean}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(e,{emit:i}){const t=e;qn(o=>({"7459779e":o.$props.cellWidth+"px"}));const n=qe(),s=Xt(),r=q(()=>s.tagMap.get(t.file.fullpath)??[]),d=q(()=>{const o=n.gridThumbnailResolution;return n.enableThumbnail?Gn(t.file,[o,o].join("x")):oe(t.file)}),c=q(()=>{var o;return(((o=n.conf)==null?void 0:o.all_custom_tags)??[]).reduce((y,C)=>[...y,{...C,selected:!!r.value.find(S=>S.id===C.id)}],[])}),p=q(()=>c.value.find(o=>o.type==="custom"&&o.name==="like")),b=()=>{Oe(p.value),i("contextMenuClick",{key:`toggle-tag-${p.value.id}`},t.file,t.idx)};return(o,y)=>{const C=ve,S=Vt,a=Ut,l=ei,g=mi;return h(),W(C,{trigger:["contextmenu"],visible:J(n).longPressOpenContextMenu?typeof o.idx=="number"&&o.showMenuIdx===o.idx:void 0,"onUpdate:visible":y[8]||(y[8]=v=>typeof o.idx=="number"&&i("update:showMenuIdx",v?o.idx:-1))},{overlay:B(()=>[o.enableRightClickMenu?(h(),W(Ot,{key:0,file:o.file,idx:o.idx,"selected-tag":r.value,onContextMenuClick:y[7]||(y[7]=(v,I,w)=>i("contextMenuClick",v,I,w)),"is-selected-mutil-files":o.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):E("",!0)]),default:B(()=>[(h(),k("li",{class:de(["file file-item-trigger grid",{clickable:o.file.type==="dir",selected:o.selected}]),"data-idx":o.idx,key:o.file.name,draggable:"true",onDragstart:y[4]||(y[4]=v=>i("dragstart",v,o.idx)),onDragend:y[5]||(y[5]=v=>i("dragend",v,o.idx)),onClickCapture:y[6]||(y[6]=v=>i("fileItemClick",v,o.file,o.idx))},[u("div",null,[o.enableCloseIcon?(h(),k("div",{key:0,class:"close-icon",onClick:y[0]||(y[0]=v=>i("close-icon-click"))},[A(J(Yn))])):E("",!0),o.enableRightClickMenu?(h(),k("div",la,[A(C,null,{overlay:B(()=>[A(Ot,{file:o.file,idx:o.idx,"selected-tag":r.value,onContextMenuClick:y[1]||(y[1]=(v,I,w)=>i("contextMenuClick",v,I,w)),"is-selected-mutil-files":o.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:B(()=>[u("div",oa,[A(J(Zn))])]),_:1}),o.file.type==="file"?(h(),W(C,{key:0},{overlay:B(()=>[c.value.length>1?(h(),W(a,{key:0,onClick:y[2]||(y[2]=v=>i("contextMenuClick",v,o.file,o.idx))},{default:B(()=>[(h(!0),k(Z,null,re(c.value,v=>(h(),W(S,{key:`toggle-tag-${v.id}`},{default:B(()=>[M(_(v.name)+" ",1),v.selected?(h(),W(J(qt),{key:0})):(h(),W(J(Yt),{key:1}))]),_:2},1024))),128))]),_:1})):E("",!0)]),default:B(()=>{var v,I;return[u("div",{class:de(["float-btn-wrap",{"like-selected":(v=p.value)==null?void 0:v.selected}]),onClick:b},[(I=p.value)!=null&&I.selected?(h(),W(J(Ki),{key:0})):(h(),W(J(Zi),{key:1}))],2)]}),_:1})):E("",!0)])):E("",!0),J(te)(o.file.name)?(h(),k("div",{key:o.file.fullpath,class:de(`idx-${o.idx} item-content`)},[o.enableChangeIndicator?(h(),W(ra,{key:0,"gen-diff-to-next":o.genDiffToNext,"gen-diff-to-previous":o.genDiffToPrevious},null,8,["gen-diff-to-next","gen-diff-to-previous"])):E("",!0),A(l,{src:d.value,fallback:J($i),preview:{src:o.fullScreenPreviewImageUrl,onVisibleChange:(v,I)=>i("previewVisibleChange",v,I)}},null,8,["src","fallback","preview"]),r.value&&o.cellWidth>128?(h(),k("div",ca,[(h(!0),k(Z,null,re(r.value,v=>(h(),W(g,{key:v.id,color:J(s).getColor(v.name)},{default:B(()=>[M(_(v.name),1)]),_:2},1032,["color"]))),128))])):E("",!0)],2)):J(Xn)(o.file.name)?(h(),k("div",{key:3,class:de(`idx-${o.idx} item-content video`),onClick:y[3]||(y[3]=v=>J(ai)(o.file))},[u("div",ua,[A(J(ns))]),r.value&&o.cellWidth>128?(h(),k("div",da,[(h(!0),k(Z,null,re(r.value,v=>(h(),W(g,{key:v.id,color:J(s).getColor(v.name)},{default:B(()=>[M(_(v.name),1)]),_:2},1032,["color"]))),128))])):E("",!0)],2)):(h(),k("div",fa,[o.file.type==="file"?(h(),W(J(Ii),{key:0,class:"icon center"})):(h(),W(J(Pi),{key:1,class:"icon center"}))])),o.cellWidth>128?(h(),k("div",ha,[u("div",ga,_(o.file.name),1),u("div",pa,[u("div",null,_(o.file.size),1),u("div",null,_(o.file.date),1)])])):E("",!0)])],42,aa))]),_:1},8,["visible"])}}});const Ta=Wt(va,[["__scopeId","data-v-b969c89a"]]);export{Ta as F,Ot as _,Ia as a,_a as b,Ca as c,Ea as d,Aa as e,Pa as f,rn as g,He as h,Xt as i,ye as j,cs as k,Ce as s,le as u};
