import{$ as T,bR as q,c1 as D,bf as P,aE as R}from"./index-12a25d1f.js";import{u as $,b as z,f as G,c as Q,d as V,e as _,h as A}from"./FileItem-42c7fbe7.js";const N=()=>{const e=T(),c=q(),l=D(),{stackViewEl:u,multiSelectedIdxs:r,stack:m,scroller:n}=$({images:e}).toRefs(),{itemSize:v,gridItems:f,cellWidth:g}=z(),{showMenuIdx:d}=G(),{onFileDragStart:I,onFileDragEnd:p}=Q(),{showGenInfo:h,imageGenInfo:w,q:x,onContextMenuClick:o,onFileItemClick:S}=V({openNext:P}),{previewIdx:F,previewing:b,onPreviewVisibleChange:k,previewImgMove:C,canPreview:M}=_(),y=async(s,t,a)=>{m.value=[{curr:"",files:e.value}],await o(s,t,a)};A("removeFiles",async({paths:s})=>{var t;e.value=(t=e.value)==null?void 0:t.filter(a=>!s.includes(a.fullpath))});const i=()=>{const s=n.value;if(s&&e.value){const t=e.value.slice(Math.max(s.$_startIndex-10,0),s.$_endIndex+10).map(a=>a.fullpath);l.fetchImageTags(t)}},E=R(i,300);return{scroller:n,queue:c,images:e,onContextMenuClickU:y,stackViewEl:u,previewIdx:F,previewing:b,onPreviewVisibleChange:k,previewImgMove:C,canPreview:M,itemSize:v,gridItems:f,showGenInfo:h,imageGenInfo:w,q:x,onContextMenuClick:o,onFileItemClick:S,showMenuIdx:d,multiSelectedIdxs:r,onFileDragStart:I,onFileDragEnd:p,cellWidth:g,onScroll:E,updateImageTag:i}};export{N as u};
