import{d3 as ne,d4 as re,a as C,P as oe,d as L,j as Q,u as Y,Z as le,aS as ue,ax as ie,au as se,w as ce,v as w,f as de,_ as W,a0 as H,h as I,c,s as K,ag as D,a1 as fe,i as ve,a4 as pe,ch as P,c4 as me,r as he,V as B,d5 as be,d6 as ge,X as ye,cK as xe,Q as Ce,a6 as O,d7 as ke,ab as we,a9 as Se,W as Z,cy as Ie,m as Oe,d8 as Me}from"./index-a5621346.js";import{V as Ve}from"./index-fb918e0c.js";function _e(e,a){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ne(e))||a&&e&&typeof e.length=="number"){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(d){throw d},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,b;return{s:function(){t=t.call(e)},n:function(){var d=t.next();return u=d.done,d},e:function(d){h=!0,b=d},f:function(){try{!u&&t.return!=null&&t.return()}finally{if(h)throw b}}}}var z=1/0,Fe=17976931348623157e292;function He(e){if(!e)return e===0?e:0;if(e=re(e),e===z||e===-z){var a=e<0?-1:1;return a*Fe}return e===e?e:0}function Ke(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}var Pe=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},Ge=function(){return C(C({},Pe()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},Ae=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:oe.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},je=function(){return C(C({},Ae()),{},{indeterminate:{type:Boolean,default:!1}})},q=Symbol("CheckboxGroupContext"),Be=["indeterminate","skipGroup","id"],Ne=["onMouseenter","onMouseleave","onInput","class","style"];const F=L({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:je(),setup:function(a,t){var r=t.emit,o=t.attrs,u=t.slots,h=t.expose,b=Q(),f=Y("checkbox",a),d=f.prefixCls,g=f.direction,i=le(q,void 0),S=Symbol("checkboxUniId");ue(function(){!a.skipGroup&&i&&i.registerValue(S,a.value)}),ie(function(){i&&i.cancelValue(S)}),se(function(){ce(a.checked!==void 0||i||a.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var M=function(n){var l=n.target.checked;r("update:checked",l),r("change",n)},V=w(),N=function(){var n;(n=V.value)===null||n===void 0||n.focus()},G=function(){var n;(n=V.value)===null||n===void 0||n.blur()};return h({focus:N,blur:G}),function(){var x,n,l=de((x=u.default)===null||x===void 0?void 0:x.call(u)),v=a.indeterminate,p=a.skipGroup,m=a.id,s=m===void 0?b.id.value:m,k=W(a,Be),A=o.onMouseenter,E=o.onMouseleave;o.onInput;var _=o.class,J=o.style,ee=W(o,Ne),y=C(C({},k),{},{id:s,prefixCls:d.value},ee);i&&!p?(y.onChange=function(){for(var U=arguments.length,R=new Array(U),j=0;j<U;j++)R[j]=arguments[j];r.apply(void 0,["change"].concat(R)),i.toggleOption({label:l,value:a.value})},y.name=i.name.value,y.checked=i.mergedValue.value.indexOf(a.value)!==-1,y.disabled=a.disabled||i.disabled.value,y.indeterminate=v):y.onChange=M;var ae=H((n={},I(n,"".concat(d.value,"-wrapper"),!0),I(n,"".concat(d.value,"-rtl"),g.value==="rtl"),I(n,"".concat(d.value,"-wrapper-checked"),y.checked),I(n,"".concat(d.value,"-wrapper-disabled"),y.disabled),n),_),te=H(I({},"".concat(d.value,"-indeterminate"),v));return c("label",{class:ae,style:J,onMouseenter:A,onMouseleave:E},[c(Ve,C(C({},y),{},{class:te,ref:V}),null),l.length?c("span",null,[l]):null])}}}),$=L({compatConfig:{MODE:3},name:"ACheckboxGroup",props:Ge(),setup:function(a,t){var r=t.slots,o=t.emit,u=t.expose,h=Q(),b=Y("checkbox",a),f=b.prefixCls,d=b.direction,g=w((a.value===void 0?a.defaultValue:a.value)||[]);K(function(){return a.value},function(){g.value=a.value||[]});var i=D(function(){return a.options.map(function(n){return typeof n=="string"||typeof n=="number"?{label:n,value:n}:n})}),S=w(Symbol()),M=w(new Map),V=function(l){M.value.delete(l),S.value=Symbol()},N=function(l,v){M.value.set(l,v),S.value=Symbol()},G=w(new Map);K(S,function(){var n=new Map,l=_e(M.value.values()),v;try{for(l.s();!(v=l.n()).done;){var p=v.value;n.set(p,!0)}}catch(m){l.e(m)}finally{l.f()}G.value=n});var x=function(l){var v=g.value.indexOf(l.value),p=ve(g.value);v===-1?p.push(l.value):p.splice(v,1),a.value===void 0&&(g.value=p);var m=p.filter(function(s){return G.value.has(s)}).sort(function(s,k){var A=i.value.findIndex(function(_){return _.value===s}),E=i.value.findIndex(function(_){return _.value===k});return A-E});o("update:value",m),o("change",m),h.onFieldChange()};return fe(q,{cancelValue:V,registerValue:N,toggleOption:x,mergedValue:g,name:D(function(){return a.name}),disabled:D(function(){return a.disabled})}),u({mergedValue:g}),function(){var n,l=a.id,v=l===void 0?h.id.value:l,p=null,m="".concat(f.value,"-group");return i.value&&i.value.length>0&&(p=i.value.map(function(s){var k;return c(F,{prefixCls:f.value,key:s.value.toString(),disabled:"disabled"in s?s.disabled:a.disabled,indeterminate:s.indeterminate,value:s.value,checked:g.value.indexOf(s.value)!==-1,onChange:s.onChange,class:"".concat(m,"-item")},{default:function(){return[s.label===void 0?(k=r.label)===null||k===void 0?void 0:k.call(r,s):s.label]}})})),c("div",{class:[m,I({},"".concat(m,"-rtl"),d.value==="rtl")],id:v},[p||((n=r.default)===null||n===void 0?void 0:n.call(r))])}}});F.Group=$;F.install=function(e){return e.component(F.name,F),e.component($.name,$),e};var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const De=Ee;function X(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){$e(e,o,t[o])})}return e}function $e(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var T=function(a,t){var r=X({},a,t.attrs);return c(pe,X({},r,{icon:De}),null)};T.displayName="DownloadOutlined";T.inheritAttrs=!1;const Te=T,ze=async e=>(await P.value.get("/files",{params:{folder_path:e}})).data,Xe=async e=>(await P.value.post("/delete_files",{file_paths:e})).data,Le=async(e,a,t)=>(await P.value.post("/move_files",{file_paths:e,dest:a,create_dest_folder:t})).data,Qe=async(e,a,t)=>(await P.value.post("/copy_files",{file_paths:e,dest:a,create_dest_folder:t})).data,Ue=async e=>{await P.value.post("/mkdirs",{dest_folder:e})},Ye=e=>{const a=[];return e.shiftKey&&a.push("Shift"),e.ctrlKey&&a.push("Ctrl"),e.metaKey&&a.push("Cmd"),(e.code.startsWith("Key")||e.code.startsWith("Digit"))&&a.push(e.code),a.join(" + ")},Ze=e=>{const a=w("");return new Promise(t=>{B.confirm({title:O("inputFolderName"),content:()=>c(Z,{value:a.value,"onUpdate:value":r=>a.value=r},null),async onOk(){if(!a.value)return;const r=Ie(e,a.value);await Ue(r),t()}})})},qe=()=>c("p",{style:{background:"var(--zp-secondary-background)",padding:"8px",borderLeft:"4px solid var(--primary-color)"}},[Oe("Tips: "),O("multiSelectTips")]),Je=(e,a)=>{const t=me(),r=he(),o=u=>{var h;return!!((h=t.tagMap.get(e.fullpath))!=null&&h.some(b=>b.id===u))};B.confirm({width:"80vw",title:e.name,icon:null,content:()=>c("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},[c("video",{style:{maxHeight:be?"80vh":"60vh",maxWidth:"100%",minWidth:"70%"},src:ge(e),controls:!0,autoplay:!0},null),c("div",{style:{marginTop:"4px"}},[r.conf.all_custom_tags.map(u=>c("div",{key:u.id,onClick:()=>a==null?void 0:a(u.id),style:{background:o(u.id)?t.getColor(u.name):"var(--zp-primary-background)",color:o(u.id)?"white":t.getColor(u.name),margin:"2px",padding:"2px 16px","border-radius":"4px",display:"inline-block",cursor:"pointer","font-weight":"bold",transition:".5s all ease",border:`2px solid ${t.getColor(u.name)}`,"user-select":"none"}},[u.name]))]),c("div",{class:"actions",style:{marginTop:"16px"}},[c(ye,{onClick:()=>xe([Ce(e,!0)])},{icon:c(Te,null,null),default:O("download")})])]),maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},ea=()=>{B.confirm({title:O("confirmRebuildImageIndex"),onOk:async()=>{await ke(),we.emit("searchIndexExpired"),Se.success(O("rebuildComplete"))}})},aa=e=>{const a=w(e.split(/[\\/]/).pop()??"");return new Promise(t=>{B.confirm({title:O("rename"),content:()=>c(Z,{value:a.value,"onUpdate:value":r=>a.value=r},null),async onOk(){if(!a.value)return;const r=await Me({path:e,name:a.value});t(r.new_path)}})})};export{F as C,qe as M,ze as a,Ze as b,aa as c,Qe as d,Xe as e,Je as f,Ye as g,Ke as l,Le as m,ea as o,He as t};
