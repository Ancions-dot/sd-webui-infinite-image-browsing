var sn=Object.defineProperty;var an=(e,i,n)=>i in e?sn(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var Fe=(e,i,n)=>(an(e,typeof i!="symbol"?i+"":i,n),n);import{d as ke,u as Ot,ag as q,a0 as Dt,h as ce,c as A,cj as rn,ck as ln,v as K,aS as on,n as Z,bz as cn,P as lt,bP as un,a4 as le,cl as dn,aD as fn,cm as hn,cn as pn,ax as Mt,aj as De,bd as Ye,co as gn,cp as vn,cq as mn,cr as yn,cs as bn,ci as kn,ct as Sn,cu as Nt,cv as Ne,r as Ge,c4 as zt,af as wn,cw as Ft,a9 as ne,a6 as W,bS as Ze,s as he,ao as Me,au as An,a7 as $e,cx as In,cy as $t,cz as ot,ak as Qt,bU as ct,bT as _n,cA as ve,cB as Cn,ap as En,cC as ie,bQ as Bt,cD as Pn,cE as Tn,G as je,ac as On,aa as Dn,ab as ut,ai as ue,cF as Mn,cG as dt,cg as Nn,V as pe,X as Qe,Q as oe,cH as zn,cI as Fn,m as N,O as $n,c5 as ft,cJ as Qn,cK as Bn,cL as xn,c3 as Ln,cd as Rn,cM as jn,cN as Hn,am as xt,an as Lt,a3 as Rt,o as f,z as J,cO as Vn,cP as Un,cQ as Wn,cR as Jn,cS as Kn,bJ as qn,k as S,ae as Ae,p as P,A as Q,I as ae,cT as ht,bC as Yn,cU as Gn,H as jt,R as de,t as I,B as U,Y as Ht,cV as Zn,c8 as Xn,M as Vt,l as u,q as Ut,cW as ei,cX as pt,cY as ti,c7 as ni,cZ as ii,c_ as Be,c$ as si}from"./index-f08bcee4.js";import{t as xe,a as ge,l as fe,b as ai,M as Wt,C as ri,m as Jt,c as li,g as oi,d as ci,e as ui,f as di}from"./functionalCallableComp-05bdb498.js";import{D as me,a as He}from"./index-846c776c.js";import"./index-23966e66.js";var fi=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}},hi=ke({compatConfig:{MODE:3},name:"ACheckableTag",props:fi(),setup:function(i,n){var t=n.slots,s=n.emit,a=Ot("tag",i),g=a.prefixCls,d=function(o){var y=i.checked;s("update:checked",!y),s("change",!y),s("click",o)},v=q(function(){var k;return Dt(g.value,(k={},ce(k,"".concat(g.value,"-checkable"),!0),ce(k,"".concat(g.value,"-checkable-checked"),i.checked),k))});return function(){var k;return A("span",{class:v.value,onClick:d},[(k=t.default)===null||k===void 0?void 0:k.call(t)])}}});const Ve=hi;var pi=new RegExp("^(".concat(rn.join("|"),")(-inverse)?$")),gi=new RegExp("^(".concat(ln.join("|"),")$")),vi=function(){return{prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:lt.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},"onUpdate:visible":Function,icon:lt.any}},ye=ke({compatConfig:{MODE:3},name:"ATag",props:vi(),slots:["closeIcon","icon"],setup:function(i,n){var t=n.slots,s=n.emit,a=n.attrs,g=Ot("tag",i),d=g.prefixCls,v=g.direction,k=K(!0);on(function(){i.visible!==void 0&&(k.value=i.visible)});var o=function(r){r.stopPropagation(),s("update:visible",!1),s("close",r),!r.defaultPrevented&&i.visible===void 0&&(k.value=!1)},y=q(function(){var w=i.color;return w?pi.test(w)||gi.test(w):!1}),_=q(function(){var w;return Dt(d.value,(w={},ce(w,"".concat(d.value,"-").concat(i.color),y.value),ce(w,"".concat(d.value,"-has-color"),i.color&&!y.value),ce(w,"".concat(d.value,"-hidden"),!k.value),ce(w,"".concat(d.value,"-rtl"),v.value==="rtl"),w))});return function(){var w,r,l,h=i.icon,C=h===void 0?(w=t.icon)===null||w===void 0?void 0:w.call(t):h,p=i.color,b=i.closeIcon,c=b===void 0?(r=t.closeIcon)===null||r===void 0?void 0:r.call(t):b,F=i.closable,z=F===void 0?!1:F,L=function(){return z?c?A("span",{class:"".concat(d.value,"-close-icon"),onClick:o},[c]):A(un,{class:"".concat(d.value,"-close-icon"),onClick:o},null):null},O={backgroundColor:p&&!y.value?p:void 0},x=C||null,E=(l=t.default)===null||l===void 0?void 0:l.call(t),V=x?A(Z,null,[x,A("span",null,[E])]):E,T="onClick"in a,H=A("span",{class:_.value,style:O},[V,L()]);return T?A(cn,null,{default:function(){return[H]}}):H}}});ye.CheckableTag=Ve;ye.install=function(e){return e.component(ye.name,ye),e.component(Ve.name,Ve),e};const mi=ye;me.Button=He;me.install=function(e){return e.component(me.name,me),e.component(He.name,He),e};var yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"};const bi=yi;function gt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){ki(e,s,n[s])})}return e}function ki(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var Xe=function(i,n){var t=gt({},i,n.attrs);return A(le,gt({},t,{icon:bi}),null)};Xe.displayName="StarFilled";Xe.inheritAttrs=!1;const Kt=Xe;var Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const wi=Si;function vt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Ai(e,s,n[s])})}return e}function Ai(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var et=function(i,n){var t=vt({},i,n.attrs);return A(le,vt({},t,{icon:wi}),null)};et.displayName="FileOutlined";et.inheritAttrs=!1;const Ii=et;var _i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const Ci=_i;function mt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Ei(e,s,n[s])})}return e}function Ei(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var tt=function(i,n){var t=mt({},i,n.attrs);return A(le,mt({},t,{icon:Ci}),null)};tt.displayName="FolderOpenOutlined";tt.inheritAttrs=!1;const Pi=tt;function Ti(e,i,n){if(!dn(n))return!1;var t=typeof i;return(t=="number"?fn(n)&&hn(i,n.length):t=="string"&&i in n)?pn(n[i],e):!1}function Oi(e){return e&&e.length?e[0]:void 0}var Di=Math.ceil,Mi=Math.max;function Ni(e,i,n,t){for(var s=-1,a=Mi(Di((i-e)/(n||1)),0),g=Array(a);a--;)g[t?a:++s]=e,e+=n;return g}function zi(e){return function(i,n,t){return t&&typeof t!="number"&&Ti(i,n,t)&&(n=t=void 0),i=xe(i),n===void 0?(n=i,i=0):n=xe(n),t=t===void 0?i<n?1:-1:xe(t),Ni(i,n,t,e)}}var Fi=zi();const qt=Fi,be=(...e)=>{document.addEventListener(...e),Mt(()=>document.removeEventListener(...e))},$i="data:image/png;base64,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",Ie=new WeakMap;function Qi(e,i){return{useHookShareState:t=>{const s=vn();De(s),Ie.has(s)||(Ie.set(s,Ye(e(s,t??(i==null?void 0:i())))),Mt(()=>{Ie.delete(s)}));const a=Ie.get(s);return De(a),{state:a,toRefs(){return gn(a)}}}}}var Bi={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const xi=Bi;function yt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Li(e,s,n[s])})}return e}function Li(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var nt=function(i,n){var t=yt({},i,n.attrs);return A(le,yt({},t,{icon:xi}),null)};nt.displayName="CaretRightOutlined";nt.inheritAttrs=!1;const bt=nt;var Ri={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const ji=Ri;function kt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Hi(e,s,n[s])})}return e}function Hi(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var it=function(i,n){var t=kt({},i,n.attrs);return A(le,kt({},t,{icon:ji}),null)};it.displayName="DatabaseOutlined";it.inheritAttrs=!1;const Vi=it;var Ui={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"}}]},name:"heart",theme:"filled"};const Wi=Ui;function St(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Ji(e,s,n[s])})}return e}function Ji(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var st=function(i,n){var t=St({},i,n.attrs);return A(le,St({},t,{icon:Wi}),null)};st.displayName="HeartFilled";st.inheritAttrs=!1;const Ki=st;var qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"};const Yi=qi;function wt(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){Gi(e,s,n[s])})}return e}function Gi(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var at=function(i,n){var t=wt({},i,n.attrs);return A(le,wt({},t,{icon:Yi}),null)};at.displayName="HeartOutlined";at.inheritAttrs=!1;const Zi=at;var Xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const es=Xi;function At(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},t=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),t.forEach(function(s){ts(e,s,n[s])})}return e}function ts(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}var rt=function(i,n){var t=At({},i,n.attrs);return A(le,At({},t,{icon:es}),null)};rt.displayName="StarOutlined";rt.inheritAttrs=!1;const Yt=rt,ns="/infinite_image_browsing/fe-static/assets/play-68f5544d.svg";var Gt={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,i){(function(n,t){e.exports=t})(mn,function(){var n={};n.version="0.3.5";var t=n.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};n.configure=function(r){var l,h;for(l in r)h=r[l],h!==void 0&&r.hasOwnProperty(l)&&(t[l]=h);return this},n.status=null,n.set=function(r){var l=n.isStarted();r=s(r,t.minimum,1),n.status=r===1?null:r;var h=n.render(!l),C=h.querySelector(t.barSelector),p=t.speed,b=t.easing;return h.offsetWidth,d(function(c){t.positionUsing===""&&(t.positionUsing=n.getPositioningCSS()),v(C,g(r,p,b)),r===1?(v(h,{transition:"none",opacity:1}),h.offsetWidth,setTimeout(function(){v(h,{transition:"all "+p+"ms linear",opacity:0}),setTimeout(function(){n.remove(),c()},p)},p)):setTimeout(c,p)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var r=function(){setTimeout(function(){n.status&&(n.trickle(),r())},t.trickleSpeed)};return t.trickle&&r(),this},n.done=function(r){return!r&&!n.status?this:n.inc(.3+.5*Math.random()).set(1)},n.inc=function(r){var l=n.status;return l?l>1?void 0:(typeof r!="number"&&(l>=0&&l<.2?r=.1:l>=.2&&l<.5?r=.04:l>=.5&&l<.8?r=.02:l>=.8&&l<.99?r=.005:r=0),l=s(l+r,0,.994),n.set(l)):n.start()},n.trickle=function(){return n.inc()},function(){var r=0,l=0;n.promise=function(h){return!h||h.state()==="resolved"?this:(l===0&&n.start(),r++,l++,h.always(function(){l--,l===0?(r=0,n.done()):n.set((r-l)/r)}),this)}}(),n.getElement=function(){var r=n.getParent();if(r){var l=Array.prototype.slice.call(r.querySelectorAll(".nprogress")).filter(function(h){return h.parentElement===r});if(l.length>0)return l[0]}return null},n.getParent=function(){if(t.parent instanceof HTMLElement)return t.parent;if(typeof t.parent=="string")return document.querySelector(t.parent)},n.render=function(r){if(n.isRendered())return n.getElement();o(document.documentElement,"nprogress-busy");var l=document.createElement("div");l.id="nprogress",l.className="nprogress",l.innerHTML=t.template;var h=l.querySelector(t.barSelector),C=r?"-100":a(n.status||0),p=n.getParent(),b;return v(h,{transition:"all 0 linear",transform:"translate3d("+C+"%,0,0)"}),t.showSpinner||(b=l.querySelector(t.spinnerSelector),b&&w(b)),p!=document.body&&o(p,"nprogress-custom-parent"),p.appendChild(l),l},n.remove=function(){n.status=null,y(document.documentElement,"nprogress-busy"),y(n.getParent(),"nprogress-custom-parent");var r=n.getElement();r&&w(r)},n.isRendered=function(){return!!n.getElement()},n.getPositioningCSS=function(){var r=document.body.style,l="WebkitTransform"in r?"Webkit":"MozTransform"in r?"Moz":"msTransform"in r?"ms":"OTransform"in r?"O":"";return l+"Perspective"in r?"translate3d":l+"Transform"in r?"translate":"margin"};function s(r,l,h){return r<l?l:r>h?h:r}function a(r){return(-1+r)*100}function g(r,l,h){var C;return t.positionUsing==="translate3d"?C={transform:"translate3d("+a(r)+"%,0,0)"}:t.positionUsing==="translate"?C={transform:"translate("+a(r)+"%,0)"}:C={"margin-left":a(r)+"%"},C.transition="all "+l+"ms "+h,C}var d=function(){var r=[];function l(){var h=r.shift();h&&h(l)}return function(h){r.push(h),r.length==1&&l()}}(),v=function(){var r=["Webkit","O","Moz","ms"],l={};function h(c){return c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(F,z){return z.toUpperCase()})}function C(c){var F=document.body.style;if(c in F)return c;for(var z=r.length,L=c.charAt(0).toUpperCase()+c.slice(1),O;z--;)if(O=r[z]+L,O in F)return O;return c}function p(c){return c=h(c),l[c]||(l[c]=C(c))}function b(c,F,z){F=p(F),c.style[F]=z}return function(c,F){var z=arguments,L,O;if(z.length==2)for(L in F)O=F[L],O!==void 0&&F.hasOwnProperty(L)&&b(c,L,O);else b(c,z[1],z[2])}}();function k(r,l){var h=typeof r=="string"?r:_(r);return h.indexOf(" "+l+" ")>=0}function o(r,l){var h=_(r),C=h+l;k(h,l)||(r.className=C.substring(1))}function y(r,l){var h=_(r),C;k(r,l)&&(C=h.replace(" "+l+" "," "),r.className=C.substring(1,C.length-1))}function _(r){return(" "+(r&&r.className||"")+" ").replace(/\s+/gi," ")}function w(r){r&&r.parentNode&&r.parentNode.removeChild(r)}return n})})(Gt);var is=Gt.exports;const ss=yn(is),as=bn("useBatchDownloadStore",()=>{const e=K([]);return{selectdFiles:e,addFiles:n=>{e.value=kn([...e.value,...n])}}});class It{constructor(i,n=Sn.CREATED_TIME_DESC){Fe(this,"root");Fe(this,"execQueue",[]);this.sortMethod=n,this.root={children:[],info:{name:i,size:"-",bytes:0,created_time:"",is_under_scanned_path:!0,date:"",type:"dir",fullpath:i}},this.fetchChildren(this.root)}reset(){return this.root.children=[],this.fetchChildren(this.root)}get images(){const i=n=>n.children.map(t=>{if(t.info.type==="dir")return i(t);if(Ne(t.info.name))return t.info}).filter(t=>t).flat(1);return i(this.root)}get isCompleted(){return this.execQueue.length===0}async fetchChildren(i){const{files:n}=await ge(i.info.fullpath);return i.children=Nt(n,this.sortMethod).map(t=>({info:t,children:[]})),this.execQueue.shift(),this.execQueue.unshift(...i.children.filter(t=>t.info.type==="dir").map(t=>({fn:()=>this.fetchChildren(t),...t}))),i}async next(){const i=Oi(this.execQueue);if(!i)return null;const n=await i.fn();return this.execQueue=this.execQueue.slice(),this.root={...this.root},n}}function Le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Rn(e)}const Ce=new Map,B=Ge(),rs=as(),Ee=zt(),_t=wn(),_e=new BroadcastChannel("iib-image-transfer-bus"),{eventEmitter:Pe,useEventListen:Ue}=Ft(),{useHookShareState:re}=Qi((e,{images:i})=>{const n=K({tabIdx:-1,paneIdx:-1}),t=q(()=>fe(s.value)),s=K([]),a=q(()=>{var p;return s.value.map(b=>b.curr).slice((p=B.conf)!=null&&p.is_win?1:0)}),g=q(()=>$t(...a.value)),d=K(B.defaultSortingMethod),v=K(n.value.walkModePath?new It(n.value.walkModePath,d.value):void 0);he([()=>n.value.walkModePath,d],()=>{v.value=n.value.walkModePath?new It(n.value.walkModePath,d.value):void 0});const k=Ye(new Set);he(t,()=>k.clear());const o=q(()=>{var F;if(i.value)return i.value;if(v.value)return v.value.images.filter(z=>!k.has(z.fullpath));if(!t.value)return[];const p=((F=t.value)==null?void 0:F.files)??[],b=d.value;return Nt((z=>B.onlyFoldersAndImages?z.filter(L=>L.type==="dir"||Ne(L.name)):z)(p),b).filter(z=>!k.has(z.fullpath))}),y=K([]),_=K(-1),w=q(()=>v.value?!v.value.isCompleted:!1),r=K(!1),l=K(!1),h=()=>{var p,b,c;return(c=(b=(p=B.tabList)==null?void 0:p[n.value.tabIdx])==null?void 0:b.panes)==null?void 0:c[n.value.paneIdx]},C=Ft();return C.useEventListen("selectAll",()=>{console.log(`select all 0 -> ${o.value.length}`),y.value=qt(0,o.value.length)}),{previewing:l,spinning:r,canLoadNext:w,multiSelectedIdxs:y,previewIdx:_,basePath:a,currLocation:g,currPage:t,stack:s,sortMethod:d,sortedFiles:o,scroller:K(),stackViewEl:K(),props:n,getPane:h,walker:v,deletedFiles:k,...C}},()=>({images:K()}));function wr(){const{previewIdx:e,eventEmitter:i,canLoadNext:n,previewing:t,sortedFiles:s,scroller:a,props:g}=re().toRefs(),{state:d}=re();let v=null;const k=(w,r)=>{var l;t.value=w,v!=null&&!w&&r&&((l=a.value)==null||l.scrollToItem(v),v=null)},o=()=>{g.value.walkModePath&&!_("next")&&n&&(ne.info(W("loadingNextFolder")),i.value.emit("loadNextDir",!0))};be("keydown",w=>{var r;if(t.value){let l=e.value;if(["ArrowDown","ArrowRight"].includes(w.key))for(l++;s.value[l]&&!ie(s.value[l].name);)l++;else if(["ArrowUp","ArrowLeft"].includes(w.key))for(l--;s.value[l]&&!ie(s.value[l].name);)l--;if(ie((r=s.value[l])==null?void 0:r.name)??""){e.value=l;const h=a.value;h&&!(l>=h.$_startIndex&&l<=h.$_endIndex)&&(v=l)}o()}});const y=w=>{var l;let r=e.value;if(w==="next")for(r++;s.value[r]&&!ie(s.value[r].name);)r++;else if(w==="prev")for(r--;s.value[r]&&!ie(s.value[r].name);)r--;if(ie((l=s.value[r])==null?void 0:l.name)??""){e.value=r;const h=a.value;h&&!(r>=h.$_startIndex&&r<=h.$_endIndex)&&(v=r)}o()},_=w=>{var l;let r=e.value;if(w==="next")for(r++;s.value[r]&&!ie(s.value[r].name);)r++;else if(w==="prev")for(r--;s.value[r]&&!ie(s.value[r].name);)r--;return ie((l=s.value[r])==null?void 0:l.name)??""};return Ue("removeFiles",async()=>{var w;t.value&&!d.sortedFiles[e.value]&&(ne.info(W("manualExitFullScreen"),5),await Ze(500),(w=document.querySelector(".ant-image-preview-operations-operation .anticon-close"))==null||w.click(),e.value=-1)}),{previewIdx:e,onPreviewVisibleChange:k,previewing:t,previewImgMove:y,canPreview:_}}function Ar(){const{eventEmitter:e,multiSelectedIdxs:i,sortedFiles:n}=re().toRefs();return{onSelectAll:()=>e.value.emit("selectAll"),onReverseSelect:()=>{i.value=n.value.map((g,d)=>d).filter(g=>!i.value.includes(g))},onClearAllSelected:()=>{i.value=[]}}}function Ir(){const e=K(),{scroller:i,stackViewEl:n,stack:t,currPage:s,currLocation:a,useEventListen:g,eventEmitter:d,getPane:v,props:k,deletedFiles:o,walker:y,sortedFiles:_}=re().toRefs();he(()=>t.value.length,Me((m,$)=>{var R;m!==$&&((R=i.value)==null||R.scrollToItem(0))},300));const w=async m=>{var $;await p(m),k.value.walkModePath&&(await Ze(),await(($=y.value)==null?void 0:$.reset()),d.value.emit("loadNextDir"))};An(async()=>{var m;if(!t.value.length){const $=await ge("/");t.value.push({files:$.files,curr:"/"})}e.value=new ss,e.value.configure({parent:n.value}),k.value.path&&k.value.path!=="/"?await w(k.value.walkModePath??k.value.path):(m=B.conf)!=null&&m.home&&p(B.conf.home)}),he(a,Me(m=>{const $=v.value();if(!$)return;$.path=m;const R=$.path.split("/").pop(),G=(()=>{var se;if(!k.value.walkModePath){const te=ve(m);for(const[Se,we]of Object.entries(B.pathAliasMap))if(te.startsWith(we))return te.replace(we,Se);return R}return"Walk: "+(((se=B.quickMovePaths.find(te=>te.dir===$.walkModePath))==null?void 0:se.zh)??R)})();$.name=$e("div",{style:"display:flex;align-items:center"},[$e(Vi),$e("span",{class:"line-clamp-1",style:"max-width: 256px"},G)]),$.nameFallbackStr=G,B.recent=B.recent.filter(se=>se.key!==$.key),B.recent.unshift({path:m,key:$.key}),B.recent.length>20&&(B.recent=B.recent.slice(0,20))},300));const r=()=>je(a.value),l=async m=>{var $,R;if(m.type==="dir")try{($=e.value)==null||$.start();const{files:ee}=await ge(m.fullpath);t.value.push({files:ee,curr:m.name})}finally{(R=e.value)==null||R.done()}},h=m=>{for(;m<t.value.length-1;)t.value.pop()},C=(m,$)=>(De(B.conf,"global.conf load failed"),B.conf.is_win?m.toLowerCase()==$.toLowerCase():m==$),p=async m=>{var R,ee;const $=t.value.slice();try{In(m)||(m=$t(((R=B.conf)==null?void 0:R.sd_cwd)??"/",m));const G=ot(m),se=t.value.map(te=>te.curr);for(se.shift();se[0]&&G[0]&&C(se[0],G[0]);)se.shift(),G.shift();for(let te=0;te<se.length;te++)t.value.pop();if(!G.length)return b();for(const te of G){const Se=(ee=s.value)==null?void 0:ee.files.find(we=>C(we.name,te));if(!Se)throw console.error({frags:G,frag:te,stack:Qt(t.value)}),new Error(`${te} not found`);await l(Se)}}catch(G){throw ne.error(W("moveFailedCheckPath")+(G instanceof Error?G.message:"")),console.error(m,ot(m),s.value),t.value=$,G}},b=ct(async()=>{var m,$,R;try{if((m=e.value)==null||m.start(),y.value)await y.value.reset(),d.value.emit("loadNextDir");else{const{files:ee}=await ge(t.value.length===1?"/":a.value);fe(t.value).files=ee}o.value.clear(),($=i.value)==null||$.scrollToItem(0),ne.success(W("refreshCompleted"))}finally{(R=e.value)==null||R.done()}});_n("returnToIIB",ct(async()=>{var m,$;if(!k.value.walkModePath)try{(m=e.value)==null||m.start();const{files:R}=await ge(t.value.length===1?"/":a.value);fe(t.value).files.map(G=>G.date).join()!==R.map(G=>G.date).join()&&(fe(t.value).files=R,ne.success(W("autoUpdate")))}finally{($=e.value)==null||$.done()}})),g.value("refresh",b);const c=m=>{k.value.walkModePath&&(v.value().walkModePath=m),w(m)},F=q(()=>B.quickMovePaths.map(m=>({...m,path:ve(m.dir)}))),z=q(()=>{const m=ve(a.value);return F.value.find(R=>R.path===m)}),L=async()=>{const m=z.value;if(m){if(!m.can_delete)return;await On({path:a.value,types:["scanned"]}),ne.success(W("removeCompleted"))}else await Dn({path:a.value,types:["scanned"]}),ne.success(W("addCompleted"));ut.emit("searchIndexExpired"),ut.emit("updateGlobalSetting")},O=K(!1),x=K(a.value),E=()=>{O.value=!0,x.value=a.value},V=async()=>{await p(x.value),O.value=!1};be("click",m=>{var $,R,ee;(ee=(R=($=m.target)==null?void 0:$.className)==null?void 0:R.includes)!=null&&ee.call(R,"ant-input")||(O.value=!1)});const T=()=>{const m=parent.location,$=m.href.substring(0,m.href.length-m.search.length),R=new URLSearchParams(m.search);R.set("action","open"),y.value&&R.set("walk","1"),R.set("path",a.value);const ee=`${$}?${R.toString()}`;je(ee,W("copyLocationUrlSuccessMsg"))},H=(m="tag-search")=>{const $=B.tabList[k.value.tabIdx],R={type:m,key:ue(),searchScope:a.value,name:W(m==="tag-search"?"imgSearch":"fuzzy-search")};$.panes.push(R),$.key=R.key},X=()=>d.value.emit("selectAll"),D=async()=>{await ai(a.value),await b()},M=()=>{const m=a.value;Ce.set(m,t.value);const $=B.tabList[k.value.tabIdx],R={type:"local",key:ue(),path:m,name:W("local"),stackKey:m,walkModePath:m};$.panes.push(R),$.key=R.key},Y=q(()=>!y.value&&_.value.some(m=>m.type==="dir"));return{locInputValue:x,isLocationEditing:O,onLocEditEnter:V,onEditBtnClick:E,addToSearchScanPathAndQuickMove:L,searchPathInfo:z,refresh:b,copyLocation:r,back:h,openNext:l,currPage:s,currLocation:a,to:p,stack:t,scroller:i,share:T,selectAll:X,quickMoveTo:c,onCreateFloderBtnClick:D,onWalkBtnClick:M,showWalkButton:Y,searchInCurrentDir:H}}function _r({fetchNext:e}={}){const{scroller:i,sortedFiles:n,sortMethod:t,currLocation:s,stackViewEl:a,canLoadNext:g,previewIdx:d,props:v,walker:k}=re().toRefs(),{state:o}=re(),y=K(!1),_=K(B.defaultGridCellWidth),w=q(()=>_.value+16),r=44,{width:l}=Cn(a),h=q(()=>~~(l.value/w.value)),C=Ye(new Map),p=q(()=>{const O=w.value;return{first:O+(_.value<=160?0:r),second:O}}),b=K(!1),c=async()=>{var O;if(!(b.value||!v.value.walkModePath||!g.value))try{b.value=!0,await((O=k.value)==null?void 0:O.next())}finally{b.value=!1}},F=async(O=!1)=>{const x=i.value,E=()=>O?d.value:(x==null?void 0:x.$_endIndex)??0,V=()=>{const T=n.value.length,H=50;return T?e?E()>T-H:E()>T-H&&g.value:!0};for(;V();){await Ze(30);const T=await(e??c)();if(typeof T=="boolean"&&!T)return}};o.useEventListen("loadNextDir",F);const z=()=>{const O=i.value;if(O){const x=n.value.slice(Math.max(O.$_startIndex-10,0),O.$_endIndex+10),E=x.filter(T=>T.is_under_scanned_path&&Ne(T.name)).map(T=>T.fullpath);Ee.fetchImageTags(E);const V=x.filter(T=>T.is_under_scanned_path&&T.type==="dir"&&!C.has(T.fullpath)).map(T=>T.fullpath);V.length&&Mn(V).then(T=>{for(const H in T)if(Object.prototype.hasOwnProperty.call(T,H)){const X=T[H];C.set(H,X)}})}};he(s,Me(z,150));const L=Me(async()=>{await F(),z()},150);return{gridItems:h,sortedFiles:n,sortMethodConv:En,moreActionsDropdownShow:y,gridSize:w,sortMethod:t,onScroll:L,loadNextDir:c,loadNextDirLoading:b,canLoadNext:g,itemSize:p,cellWidth:_,dirCoverCache:C}}function Cr(){const{currLocation:e,sortedFiles:i,currPage:n,multiSelectedIdxs:t,eventEmitter:s,walker:a}=re().toRefs(),g=()=>{t.value=[]};return be("click",()=>{B.keepMultiSelect||g()}),be("blur",()=>{B.keepMultiSelect||g()}),he(n,g),{onFileDragStart:(o,y)=>{const _=Qt(i.value[y]);_t.fileDragging=!0,console.log("onFileDragStart set drag file ",o,y,_);const w=[_];let r=_.type==="dir";if(t.value.includes(y)){const h=t.value.map(C=>i.value[C]);w.push(...h),r=h.some(C=>C.type==="dir")}const l={includeDir:r,loc:e.value||"search-result",path:dt(w,"fullpath").map(h=>h.fullpath),nodes:dt(w,"fullpath"),__id:"FileTransferData"};o.dataTransfer.setData("text/plain",JSON.stringify(l))},onDrop:async o=>{if(a.value)return;const y=Nn(o);if(!y)return;const _=e.value;if(y.loc===_)return;const w=Bt(),r=async()=>w.pushAction(async()=>{await ci(y.path,_),s.value.emit("refresh"),pe.destroyAll()}),l=()=>w.pushAction(async()=>{await Jt(y.path,_),Pe.emit("removeFiles",{paths:y.path,loc:y.loc}),s.value.emit("refresh"),pe.destroyAll()});pe.confirm({title:W("confirm")+"?",width:"60vw",content:()=>{let h,C,p;return A("div",null,[A("div",null,[`${W("moveSelectedFilesTo")} ${_}`,A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[y.path.map(b=>A("li",null,[b.split(/[/\\]/).pop()]))])]),A(Wt,null,null),A("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},class:"actions"},[A(Qe,{onClick:pe.destroyAll},Le(h=W("cancel"))?h:{default:()=>[h]}),A(Qe,{type:"primary",loading:!w.isIdle,onClick:r},Le(C=W("copy"))?C:{default:()=>[C]}),A(Qe,{type:"primary",loading:!w.isIdle,onClick:l},Le(p=W("move"))?p:{default:()=>[p]})])])},maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},multiSelectedIdxs:t,onFileDragEnd:()=>{_t.fileDragging=!1}}}function Er({openNext:e}){const i=K(!1),n=K(""),{sortedFiles:t,previewIdx:s,multiSelectedIdxs:a,stack:g,currLocation:d,spinning:v,previewing:k,stackViewEl:o,eventEmitter:y,props:_,deletedFiles:w}=re().toRefs(),r=ve;Ue("removeFiles",({paths:b,loc:c})=>{r(c)!==r(d.value)||!fe(g.value)||(b.forEach(z=>w.value.add(z)),b.filter(ie).forEach(z=>w.value.add(z.replace(/\.\w+$/,".txt"))))}),Ue("addFiles",({files:b,loc:c})=>{if(r(c)!==r(d.value))return;const F=fe(g.value);F&&F.files.unshift(...b)});const l=Bt(),h=async(b,c,F)=>{s.value=F,B.fullscreenPreviewInitialUrl=oe(c);const z=a.value.indexOf(F);if(b.shiftKey){if(z!==-1)a.value.splice(z,1);else{a.value.push(F),a.value.sort((x,E)=>x-E);const L=a.value[0],O=a.value[a.value.length-1];a.value=qt(L,O+1)}b.stopPropagation()}else b.ctrlKey||b.metaKey?(z!==-1?a.value.splice(z,1):a.value.push(F),b.stopPropagation()):await e(c)},C=async(b,c,F)=>{var T,H,X;const z=oe(c),L=d.value,O={IIB_container_id:parent.IIB_container_id},x=()=>{let D=[];return a.value.includes(F)?D=a.value.map(M=>t.value[M]):D.push(c),D},E=async D=>{if(!v.value)try{v.value=!0,await jn(c.fullpath),_e.postMessage({...O,event:"click_hidden_button",btnEleId:"iib_hidden_img_update_trigger"}),await Hn(),_e.postMessage({...O,event:"click_hidden_button",btnEleId:`iib_hidden_tab_${D}`})}catch(M){console.error(M),ne.error("发送图像失败，请携带console的错误消息找开发者")}finally{v.value=!1}},V=`${b.key}`;if(V.startsWith("toggle-tag-")){const D=+V.split("toggle-tag-")[1],{is_remove:M}=await zn({tag_id:D,img_path:c.fullpath}),Y=(H=(T=B.conf)==null?void 0:T.all_custom_tags.find(m=>m.id===D))==null?void 0:H.name;await Ee.refreshTags([c.fullpath]),ne.success(W(M?"removedTagFromImage":"addedTagToImage",{tag:Y}));return}else if(V.startsWith("batch-add-tag-")||V.startsWith("batch-remove-tag-")){const D=+V.split("-tag-")[1],M=V.includes("add")?"add":"remove",Y=x().map(m=>m.fullpath);await Fn({tag_id:D,img_paths:Y,action:M}),await Ee.refreshTags(Y),ne.success(W(M==="add"?"addCompleted":"removeCompleted"));return}switch(b.key){case"previewInNewWindow":return window.open(z);case"saveSelectedAsJson":return Ln(x());case"openWithDefaultApp":return xn(c.fullpath);case"download":{const D=x();Bn(D.map(M=>oe(M,!0)));break}case"copyPreviewUrl":return je(parent.document.location.origin+z);case"rename":{let D=await li(c.fullpath);D=ve(D);const M=Ee.tagMap;M.set(D,M.get(c.fullpath)??[]),M.delete(c.fullpath),c.fullpath=D,c.name=D.split(/[\\/]/).pop()??"";return}case"send2txt2img":return E("txt2img");case"send2img2img":return E("img2img");case"send2inpaint":return E("inpaint");case"send2extras":return E("extras");case"send2savedDir":{const D=B.quickMovePaths.find(m=>m.key==="outdir_save");if(!D)return ne.error(W("unknownSavedDir"));const M=Qn(D.dir,(X=B.conf)==null?void 0:X.sd_cwd),Y=x();await Jt(Y.map(m=>m.fullpath),M,!0),Pe.emit("removeFiles",{paths:Y.map(m=>m.fullpath),loc:d.value}),Pe.emit("addFiles",{files:Y,loc:M});break}case"send2controlnet-img2img":case"send2controlnet-txt2img":{const D=b.key.split("-")[1];_e.postMessage({...O,event:"send_to_control_net",type:D,url:oe(c)});break}case"send2outpaint":{n.value=await l.pushAction(()=>ft(c.fullpath)).res;const[D,M]=(n.value||"").split(`
`);_e.postMessage({...O,event:"send_to_outpaint",url:oe(c),prompt:D,negPrompt:M.slice(17)});break}case"openWithWalkMode":{Ce.set(L,g.value);const D=B.tabList[_.value.tabIdx],M={type:"local",key:ue(),path:c.fullpath,name:W("local"),stackKey:L,walkModePath:c.fullpath};D.panes.push(M),D.key=M.key;break}case"openInNewTab":{Ce.set(L,g.value);const D=B.tabList[_.value.tabIdx],M={type:"local",key:ue(),path:c.fullpath,name:W("local"),stackKey:L};D.panes.push(M),D.key=M.key;break}case"openOnTheRight":{Ce.set(L,g.value);let D=B.tabList[_.value.tabIdx+1];D||(D={panes:[],key:"",id:ue()},B.tabList[_.value.tabIdx+1]=D);const M={type:"local",key:ue(),path:c.fullpath,name:W("local"),stackKey:L};D.panes.push(M),D.key=M.key;break}case"send2BatchDownload":{rs.addFiles(x());break}case"viewGenInfo":{i.value=!0,n.value=await l.pushAction(()=>ft(c.fullpath)).res;break}case"openWithLocalFileBrowser":{await $n(c.fullpath);break}case"deleteFiles":{const D=x(),M=async()=>{const Y=D.map(m=>m.fullpath);await ui(Y),ne.success(W("deleteSuccess")),Pe.emit("removeFiles",{paths:Y,loc:d.value})};if(D.length===1&&B.ignoredConfirmActions.deleteOneOnly)return M();await new Promise(Y=>{pe.confirm({title:W("confirmDelete"),maskClosable:!0,width:"60vw",content:()=>A("div",null,[A("ol",{style:{maxHeight:"50vh",overflow:"auto"}},[D.map(m=>A("li",null,[m.fullpath.split(/[/\\]/).pop()]))]),A(Wt,null,null),A(ri,{checked:B.ignoredConfirmActions.deleteOneOnly,"onUpdate:checked":m=>B.ignoredConfirmActions.deleteOneOnly=m},{default:()=>[W("deleteOneOnlySkipConfirm"),N(" ("),W("resetOnGlobalSettingsPage"),N(")")]})]),async onOk(){await M(),Y()}})});break}}return{}},{isOutside:p}=Pn(o);return be("keydown",b=>{var F,z,L;const c=oi(b);if(k.value){const O=(F=Object.entries(B.shortcut).find(x=>x[1]===c&&x[1]))==null?void 0:F[0];if(O){b.stopPropagation(),b.preventDefault();const x=s.value,E=t.value[x];switch(O){case"delete":return oe(E)===B.fullscreenPreviewInitialUrl?ne.warn(W("fullscreenRestriction")):C({key:"deleteFiles"},E,x);case"download":return C({key:"download"},E,x);default:{const V=(z=/^toggle_tag_(.*)$/.exec(O))==null?void 0:z[1],T=(L=B.conf)==null?void 0:L.all_custom_tags.find(H=>H.name===V);return T?C({key:`toggle-tag-${T.id}`},E,x):void 0}}}}else!p.value&&["Ctrl + KeyA","Cmd + KeyA"].includes(c)&&(b.preventDefault(),b.stopPropagation(),y.value.emit("selectAll"))}),{onFileItemClick:h,onContextMenuClick:C,showGenInfo:i,imageGenInfo:n,q:l}}const Pr=()=>{const{stackViewEl:e}=re().toRefs(),i=K(-1);return Tn(e,n=>{var s;let t=n.target;for(;t.parentElement;)if(t=t.parentElement,t.tagName.toLowerCase()==="li"&&t.classList.contains("file-item-trigger")){const a=(s=t.dataset)==null?void 0:s.idx;a&&Number.isSafeInteger(+a)&&(i.value=+a);return}}),{showMenuIdx:i}};function ls(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var n=e.indexOf("Trident/");if(n>0){var t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}let Te;function We(){We.init||(We.init=!0,Te=ls()!==-1)}var ze={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){We(),Rt(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",Te&&this.$el.appendChild(e),e.data="about:blank",Te||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Te&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const os=Vn();xt("data-v-b329ee4c");const cs={class:"resize-observer",tabindex:"-1"};Lt();const us=os((e,i,n,t,s,a)=>(f(),J("div",cs)));ze.render=us;ze.__scopeId="data-v-b329ee4c";ze.__file="src/components/ResizeObserver.vue";function Oe(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oe=function(i){return typeof i}:Oe=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Oe(e)}function ds(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function Ct(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function fs(e,i,n){return i&&Ct(e.prototype,i),n&&Ct(e,n),e}function Et(e){return hs(e)||ps(e)||gs(e)||vs()}function hs(e){if(Array.isArray(e))return Je(e)}function ps(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function gs(e,i){if(e){if(typeof e=="string")return Je(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,i)}}function Je(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,t=new Array(i);n<i;n++)t[n]=e[n];return t}function vs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function ys(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t,s,a,g=function(v){for(var k=arguments.length,o=new Array(k>1?k-1:0),y=1;y<k;y++)o[y-1]=arguments[y];if(a=o,!(t&&v===s)){var _=n.leading;typeof _=="function"&&(_=_(v,s)),(!t||v!==s)&&_&&e.apply(void 0,[v].concat(Et(a))),s=v,clearTimeout(t),t=setTimeout(function(){e.apply(void 0,[v].concat(Et(a))),t=0},i)}};return g._clear=function(){clearTimeout(t),t=null},g}function Zt(e,i){if(e===i)return!0;if(Oe(e)==="object"){for(var n in e)if(!Zt(e[n],i[n]))return!1;return!0}return!1}var bs=function(){function e(i,n,t){ds(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(n,t)}return fs(e,[{key:"createObserver",value:function(n,t){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ms(n),this.callback=function(d,v){s.options.callback(d,v),d&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var a=this.options.throttleOptions||{},g=a.leading;this.callback=ys(this.callback,this.options.throttle,{leading:function(v){return g==="both"||g==="visible"&&v||g==="hidden"&&!v}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(d){var v=d[0];if(d.length>1){var k=d.find(function(y){return y.isIntersecting});k&&(v=k)}if(s.callback){var o=v.isIntersecting&&v.intersectionRatio>=s.threshold;if(o===s.oldResult)return;s.oldResult=o,s.callback(o,v)}},this.options.intersection),Rt(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function Xt(e,i,n){var t=i.value;if(t)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new bs(e,t,n);e._vue_visibilityState=s}}function ks(e,i,n){var t=i.value,s=i.oldValue;if(!Zt(t,s)){var a=e._vue_visibilityState;if(!t){en(e);return}a?a.createObserver(t,n):Xt(e,{value:t},n)}}function en(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var Ss={beforeMount:Xt,updated:ks,unmounted:en},ws={itemsLimit:1e3},As=/(auto|scroll)/;function tn(e,i){return e.parentNode===null?i:tn(e.parentNode,i.concat([e]))}var Re=function(i,n){return getComputedStyle(i,null).getPropertyValue(n)},Is=function(i){return Re(i,"overflow")+Re(i,"overflow-y")+Re(i,"overflow-x")},_s=function(i){return As.test(Is(i))};function Pt(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=tn(e.parentNode,[]),n=0;n<i.length;n+=1)if(_s(i[n]))return i[n];return document.scrollingElement||document.documentElement}}function Ke(e){"@babel/helpers - typeof";return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ke(e)}var Cs={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function Es(){return this.items.length&&Ke(this.items[0])!=="object"}var qe=!1;if(typeof window<"u"){qe=!1;try{var Ps=Object.defineProperty({},"passive",{get:function(){qe=!0}});window.addEventListener("test",null,Ps)}catch{}}let Ts=0;var nn={name:"RecycleScroller",components:{ResizeObserver:ze},directives:{ObserveVisibility:Ss},props:{...Cs,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,n=this.sizeField,t=this.minItemSize;let s=1e4,a=0,g;for(let d=0,v=i.length;d<v;d++)g=i[d][n]||t,g<s&&(s=g),a+=g,e[d]={accumulator:a,size:g};return this.$_computedMinItemSize=s,e}return[]},simpleArray:Es,itemIndexByKey(){const{keyField:e,items:i}=this,n={};for(let t=0,s=i.length;t<s;t++)n[i[t][e]]=t;return n}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;typeof e=="number"&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,n,t,s){const a=Un({id:Ts++,index:i,used:!0,key:t,type:s}),g=Wn({item:n,position:0,nr:a});return e.push(g),g},unuseView(e,i=!1){const n=this.$_unusedViews,t=e.nr.type;let s=n.get(t);s||(s=[],n.set(t,s)),s.push(e),i||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const i=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:n}=this.updateVisibleItems(!1,!0);n||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});i(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&i()},this.updateInterval))}},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const n=this.itemSize,t=this.gridItems||1,s=this.itemSecondarySize||n,a=this.$_computedMinItemSize,g=this.typeField,d=this.simpleArray?null:this.keyField,v=this.items,k=v.length,o=this.sizes,y=this.$_views,_=this.$_unusedViews,w=this.pool,r=this.itemIndexByKey;let l,h,C,p,b;if(!k)l=h=p=b=C=0;else if(this.$_prerender)l=p=0,h=b=Math.min(this.prerender,v.length),C=null;else{const E=this.getScroll();if(i){let H=E.start-this.$_lastUpdateScrollPosition;if(H<0&&(H=-H),n===null&&H<a||H<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=E.start;const V=this.buffer;E.start-=V,E.end+=V;let T=0;if(this.$refs.before&&(T=this.$refs.before.scrollHeight,E.start-=T),this.$refs.after){const H=this.$refs.after.scrollHeight;E.end+=H}if(n===null){let H,X=0,D=k-1,M=~~(k/2),Y;do Y=M,H=o[M].accumulator,H<E.start?X=M:M<k-1&&o[M+1].accumulator>E.start&&(D=M),M=~~((X+D)/2);while(M!==Y);for(M<0&&(M=0),l=M,C=o[k-1].accumulator,h=M;h<k&&o[h].accumulator<E.end;h++);for(h===-1?h=v.length-1:(h++,h>k&&(h=k)),p=l;p<k&&T+o[p].accumulator<E.start;p++);for(b=p;b<k&&T+o[b].accumulator<E.end;b++);}else{l=~~(E.start/n*t);const H=l%t;l-=H,h=Math.ceil(E.end/n*t),p=Math.max(0,Math.floor((E.start-T)/n*t)),b=Math.floor((E.end-T)/n*t),l<0&&(l=0),h>k&&(h=k),p<0&&(p=0),b>k&&(b=k),C=Math.ceil(k/t)*n}}h-l>ws.itemsLimit&&this.itemsLimitError(),this.totalSize=C;let c;const F=l<=this.$_endIndex&&h>=this.$_startIndex;if(F)for(let E=0,V=w.length;E<V;E++)c=w[E],c.nr.used&&(e&&(c.nr.index=r[c.item[d]]),(c.nr.index==null||c.nr.index<l||c.nr.index>=h)&&this.unuseView(c));const z=F?null:new Map;let L,O,x;for(let E=l;E<h;E++){L=v[E];const V=d?L[d]:L;if(V==null)throw new Error(`Key is ${V} on item (keyField is '${d}')`);if(c=y.get(V),!n&&!o[E].size){c&&this.unuseView(c);continue}O=L[g];let T=_.get(O),H=!1;if(!c)F?T&&T.length?c=T.pop():c=this.addView(w,E,L,V,O):(x=z.get(O)||0,(!T||x>=T.length)&&(c=this.addView(w,E,L,V,O),this.unuseView(c,!0),T=_.get(O)),c=T[x],z.set(O,x+1)),y.delete(c.nr.key),c.nr.used=!0,c.nr.index=E,c.nr.key=V,c.nr.type=O,y.set(V,c),H=!0;else if(!c.nr.used&&(c.nr.used=!0,c.nr.index=E,H=!0,T)){const X=T.indexOf(c);X!==-1&&T.splice(X,1)}c.item=L,H&&(E===v.length-1&&this.$emit("scroll-end"),E===0&&this.$emit("scroll-start")),n===null?(c.position=o[E-1].accumulator,c.offset=0):(c.position=Math.floor(E/t)*n,c.offset=E%t*s)}return this.$_startIndex=l,this.$_endIndex=h,this.emitUpdate&&this.$emit("update",l,h,p,b),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:F}},getListenerTarget(){let e=Pt(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,n=i==="vertical";let t;if(this.pageMode){const s=e.getBoundingClientRect(),a=n?s.height:s.width;let g=-(n?s.top:s.left),d=n?window.innerHeight:window.innerWidth;g<0&&(d+=g,g=0),g+d>a&&(d=a-g),t={start:g,end:g+d}}else n?t={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:t={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return t},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,qe?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;const n=this.gridItems||1;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=Math.floor(e/n)*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){const i=this.direction==="vertical"?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let n,t,s;if(this.pageMode){const a=Pt(this.$el),g=a.tagName==="HTML"?0:a[i.scroll],d=a.getBoundingClientRect(),k=this.$el.getBoundingClientRect()[i.start]-d[i.start];n=a,t=i.scroll,s=e+g+k}else n=this.$el,t=i.scroll,s=e;n[t]=s},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.nr.index-i.nr.index)}}};const Os={key:0,ref:"before",class:"vue-recycle-scroller__slot"},Ds={key:1,ref:"after",class:"vue-recycle-scroller__slot"};function Ms(e,i,n,t,s,a){const g=Jn("ResizeObserver"),d=Kn("observe-visibility");return qn((f(),S("div",{class:de(["vue-recycle-scroller",{ready:s.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:i[0]||(i[0]=(...v)=>a.handleScroll&&a.handleScroll(...v))},[e.$slots.before?(f(),S("div",Os,[Ae(e.$slots,"before")],512)):P("v-if",!0),(f(),J(ht(n.listTag),{ref:"wrapper",style:jt({[e.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"}),class:de(["vue-recycle-scroller__item-wrapper",n.listClass])},{default:Q(()=>[(f(!0),S(Z,null,ae(s.pool,v=>(f(),J(ht(n.itemTag),Yn({key:v.nr.id,style:s.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${v.position}px) translate${e.direction==="vertical"?"X":"Y"}(${v.offset}px)`,width:n.gridItems?`${e.direction==="vertical"&&n.itemSecondarySize||n.itemSize}px`:void 0,height:n.gridItems?`${e.direction==="horizontal"&&n.itemSecondarySize||n.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[n.itemClass,{hover:!n.skipHover&&s.hoverKey===v.nr.key}]]},Gn(n.skipHover?{}:{mouseenter:()=>{s.hoverKey=v.nr.key},mouseleave:()=>{s.hoverKey=null}})),{default:Q(()=>[Ae(e.$slots,"default",{item:v.item,index:v.nr.index,active:v.nr.used})]),_:2},1040,["style","class"]))),128)),Ae(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(f(),S("div",Ds,[Ae(e.$slots,"after")],512)):P("v-if",!0),A(g,{onNotify:a.handleResize},null,8,["onNotify"])],34)),[[d,a.handleVisibilityChange]])}nn.render=Ms;nn.__file="src/components/RecycleScroller.vue";const Tt=ke({__name:"ContextMenu",props:{file:{},idx:{},selectedTag:{},disableDelete:{type:Boolean},isSelectedMutilFiles:{type:Boolean}},emits:["contextMenuClick"],setup(e,{emit:i}){const n=e,t=Ge(),s=q(()=>{var a;return(((a=t.conf)==null?void 0:a.all_custom_tags)??[]).reduce((g,d)=>[...g,{...d,selected:!!n.selectedTag.find(v=>v.id===d.id)}],[])});return(a,g)=>{const d=Ht,v=Zn,k=Xn,o=Vt;return f(),J(o,{onClick:g[0]||(g[0]=y=>i("contextMenuClick",y,a.file,a.idx))},{default:Q(()=>{var y;return[A(d,{key:"deleteFiles",disabled:a.disableDelete},{default:Q(()=>[N(I(a.$t("deleteSelected")),1)]),_:1},8,["disabled"]),A(d,{key:"openWithDefaultApp"},{default:Q(()=>[N(I(a.$t("openWithDefaultApp")),1)]),_:1}),A(d,{key:"saveSelectedAsJson"},{default:Q(()=>[N(I(a.$t("saveSelectedAsJson")),1)]),_:1}),a.file.type==="dir"?(f(),S(Z,{key:0},[A(d,{key:"openInNewTab"},{default:Q(()=>[N(I(a.$t("openInNewTab")),1)]),_:1}),A(d,{key:"openOnTheRight"},{default:Q(()=>[N(I(a.$t("openOnTheRight")),1)]),_:1}),A(d,{key:"openWithWalkMode"},{default:Q(()=>[N(I(a.$t("openWithWalkMode")),1)]),_:1})],64)):P("",!0),a.file.type==="file"?(f(),S(Z,{key:1},[U(Ne)(a.file.name)?(f(),S(Z,{key:0},[A(d,{key:"viewGenInfo"},{default:Q(()=>[N(I(a.$t("viewGenerationInfo")),1)]),_:1}),A(v),((y=U(t).conf)==null?void 0:y.launch_mode)!=="server"?(f(),S(Z,{key:0},[A(d,{key:"send2txt2img"},{default:Q(()=>[N(I(a.$t("sendToTxt2img")),1)]),_:1}),A(d,{key:"send2img2img"},{default:Q(()=>[N(I(a.$t("sendToImg2img")),1)]),_:1}),A(d,{key:"send2inpaint"},{default:Q(()=>[N(I(a.$t("sendToInpaint")),1)]),_:1}),A(d,{key:"send2extras"},{default:Q(()=>[N(I(a.$t("sendToExtraFeatures")),1)]),_:1}),A(k,{key:"sendToThirdPartyExtension",title:a.$t("sendToThirdPartyExtension")},{default:Q(()=>[A(d,{key:"send2controlnet-txt2img"},{default:Q(()=>[N("ControlNet - "+I(a.$t("t2i")),1)]),_:1}),A(d,{key:"send2controlnet-img2img"},{default:Q(()=>[N("ControlNet - "+I(a.$t("i2i")),1)]),_:1}),A(d,{key:"send2outpaint"},{default:Q(()=>[N("openOutpaint")]),_:1})]),_:1},8,["title"])],64)):P("",!0),A(d,{key:"rename"},{default:Q(()=>[N(I(a.$t("rename")),1)]),_:1}),A(d,{key:"send2BatchDownload"},{default:Q(()=>[N(I(a.$t("sendToBatchDownload")),1)]),_:1}),A(d,{key:"send2savedDir"},{default:Q(()=>[N(I(a.$t("send2savedDir")),1)]),_:1}),A(v),a.isSelectedMutilFiles?(f(),S(Z,{key:1},[A(k,{key:"batch-add-tag",title:a.$t("batchAddTag")},{default:Q(()=>[(f(!0),S(Z,null,ae(s.value,_=>(f(),J(d,{key:`batch-add-tag-${_.id}`},{default:Q(()=>[N(I(_.name),1)]),_:2},1024))),128))]),_:1},8,["title"]),A(k,{key:"batch-remove-tag",title:a.$t("batchRemoveTag")},{default:Q(()=>[(f(!0),S(Z,null,ae(s.value,_=>(f(),J(d,{key:`batch-remove-tag-${_.id}`},{default:Q(()=>[N(I(_.name),1)]),_:2},1024))),128))]),_:1},8,["title"])],64)):(f(),J(k,{key:"toggle-tag",title:a.$t("toggleTag")},{default:Q(()=>[(f(!0),S(Z,null,ae(s.value,_=>(f(),J(d,{key:`toggle-tag-${_.id}`},{default:Q(()=>[N(I(_.name)+" ",1),_.selected?(f(),J(U(Kt),{key:0})):(f(),J(U(Yt),{key:1}))]),_:2},1024))),128))]),_:1},8,["title"])),A(d,{key:"openWithLocalFileBrowser"},{default:Q(()=>[N(I(a.$t("openWithLocalFileBrowser")),1)]),_:1})],64)):P("",!0),A(d,{key:"previewInNewWindow"},{default:Q(()=>[N(I(a.$t("previewInNewWindow")),1)]),_:1}),A(d,{key:"download"},{default:Q(()=>[N(I(a.$t("download")),1)]),_:1}),A(d,{key:"copyPreviewUrl"},{default:Q(()=>[N(I(a.$t("copySourceFilePreviewLink")),1)]),_:1})],64)):P("",!0)]}),_:1})}}}),j=e=>(xt("data-v-78cd67a3"),e=e(),Lt(),e),Ns={class:"changeIndicatorWrapper"},zs={key:0,class:"changeIndicatorsLeft changeIndicators"},Fs={key:0,class:"promptChangeIndicator changeIndicator"},$s={key:1,class:"negpromptChangeIndicator changeIndicator"},Qs={key:2,class:"seedChangeIndicator changeIndicator"},Bs={key:3,class:"stepsChangeIndicator changeIndicator"},xs={key:4,class:"cfgChangeIndicator changeIndicator"},Ls={key:5,class:"sizeChangeIndicator changeIndicator"},Rs={key:6,class:"modelChangeIndicator changeIndicator"},js={key:7,class:"samplerChangeIndicator changeIndicator"},Hs={key:8,class:"otherChangeIndicator changeIndicator"},Vs={class:"hoverOverlay"},Us=j(()=>u("strong",null,"This file",-1)),Ws=j(()=>u("br",null,null,-1)),Js=j(()=>u("br",null,null,-1)),Ks={key:0},qs=j(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Ys={key:1},Gs=j(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),Zs={key:2},Xs=j(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),ea={key:3},ta=j(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),na={key:4},ia=j(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),sa={key:5},aa=j(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),ra={key:6},la=j(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),oa=j(()=>u("br",null,null,-1)),ca={key:7},ua=j(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),da=j(()=>u("br",null,null,-1)),fa=j(()=>u("br",null,null,-1)),ha={key:0},pa=j(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),ga=j(()=>u("br",null,null,-1)),va=j(()=>u("br",null,null,-1)),ma={key:1,class:"changeIndicatorsRight changeIndicators"},ya={key:0,class:"promptChangeIndicator changeIndicator"},ba={key:1,class:"negpromptChangeIndicator changeIndicator"},ka={key:2,class:"seedChangeIndicator changeIndicator"},Sa={key:3,class:"stepsChangeIndicator changeIndicator"},wa={key:4,class:"cfgChangeIndicator changeIndicator"},Aa={key:5,class:"sizeChangeIndicator changeIndicator"},Ia={key:6,class:"modelChangeIndicator changeIndicator"},_a={key:7,class:"samplerChangeIndicator changeIndicator"},Ca={key:8,class:"otherChangeIndicator changeIndicator"},Ea={class:"hoverOverlay"},Pa=j(()=>u("strong",null,"This file",-1)),Ta=j(()=>u("br",null,null,-1)),Oa=j(()=>u("br",null,null,-1)),Da={key:0},Ma=j(()=>u("td",null,[u("span",{class:"promptChangeIndicator"},"+ Prompt")],-1)),Na={key:1},za=j(()=>u("td",null,[u("span",{class:"negpromptChangeIndicator"},"- Prompt")],-1)),Fa={key:2},$a=j(()=>u("td",null,[u("span",{class:"seedChangeIndicator"},"Seed")],-1)),Qa={key:3},Ba=j(()=>u("td",null,[u("span",{class:"stepsChangeIndicator"},"Steps")],-1)),xa={key:4},La=j(()=>u("td",null,[u("span",{class:"cfgChangeIndicator"},"Cfg Scale")],-1)),Ra={key:5},ja=j(()=>u("td",null,[u("span",{class:"sizeChangeIndicator"},"Size")],-1)),Ha={key:6},Va=j(()=>u("td",null,[u("span",{class:"modelChangeIndicator"},"Model")],-1)),Ua=j(()=>u("br",null,null,-1)),Wa={key:7},Ja=j(()=>u("td",null,[u("span",{class:"samplerChangeIndicator"},"Sampler")],-1)),Ka=j(()=>u("br",null,null,-1)),qa=j(()=>u("br",null,null,-1)),Ya={key:0},Ga=j(()=>u("span",{class:"otherChangeIndicator"},"Other",-1)),Za=j(()=>u("br",null,null,-1)),Xa=j(()=>u("br",null,null,-1)),er=ke({__name:"ChangeIndicator",props:{genDiffToPrevious:{},genDiffToNext:{},genInfo:{}},setup(e){function i(t){const s=["prompt","negativePrompt","seed","steps","cfgScale","size","Model","others"],a=Object.keys(t).filter(g=>!s.includes(g));return Object.fromEntries(a.map(g=>[g,t[g]]))}function n(t){return Object.keys(i(t)).length>0}return(t,s)=>(f(),S("div",Ns,[t.genDiffToPrevious.empty?P("",!0):(f(),S("div",zs,["prompt"in t.genDiffToPrevious.diff?(f(),S("div",Fs,"P+")):P("",!0),"negativePrompt"in t.genDiffToPrevious.diff?(f(),S("div",$s,"P-")):P("",!0),"seed"in t.genDiffToPrevious.diff?(f(),S("div",Qs,"Se")):P("",!0),"steps"in t.genDiffToPrevious.diff?(f(),S("div",Bs,"St")):P("",!0),"cfgScale"in t.genDiffToPrevious.diff?(f(),S("div",xs,"Cf")):P("",!0),"size"in t.genDiffToPrevious.diff?(f(),S("div",Ls,"Si")):P("",!0),"Model"in t.genDiffToPrevious.diff?(f(),S("div",Rs,"Mo")):P("",!0),"Sampler"in t.genDiffToPrevious.diff?(f(),S("div",js,"Sa")):P("",!0),n(t.genDiffToPrevious.diff)?(f(),S("div",Hs,"Ot")):P("",!0)])),u("div",Vs,[u("small",null,[A(U(bt)),Us,N(" vs "+I(t.genDiffToPrevious.otherFile)+" ",1),Ws,Js,u("table",null,["prompt"in t.genDiffToPrevious.diff?(f(),S("tr",Ks,[qs,u("td",null,I(t.genDiffToPrevious.diff.prompt)+" tokens changed",1)])):P("",!0),"negativePrompt"in t.genDiffToPrevious.diff?(f(),S("tr",Ys,[Gs,u("td",null,I(t.genDiffToPrevious.diff.negativePrompt)+" tokens changed",1)])):P("",!0),"seed"in t.genDiffToPrevious.diff?(f(),S("tr",Zs,[Xs,u("td",null,[u("strong",null,I(t.genDiffToPrevious.diff.seed[0]),1),N(" vs "+I(t.genDiffToPrevious.diff.seed[1]),1)])])):P("",!0),"steps"in t.genDiffToPrevious.diff?(f(),S("tr",ea,[ta,u("td",null,[u("strong",null,I(t.genDiffToPrevious.diff.steps[0]),1),N(" vs "+I(t.genDiffToPrevious.diff.steps[1]),1)])])):P("",!0),"cfgScale"in t.genDiffToPrevious.diff?(f(),S("tr",na,[ia,u("td",null,[u("strong",null,I(t.genDiffToPrevious.diff.cfgScale[0]),1),N(" vs "+I(t.genDiffToPrevious.diff.cfgScale[1]),1)])])):P("",!0),"size"in t.genDiffToPrevious.diff?(f(),S("tr",sa,[aa,u("td",null,[u("strong",null,I(t.genDiffToPrevious.diff.size[0]),1),N(" vs "+I(t.genDiffToPrevious.diff.size[1]),1)])])):P("",!0),"Model"in t.genDiffToPrevious.diff?(f(),S("tr",ra,[la,u("td",null,[u("strong",null,I(t.genDiffToPrevious.diff.Model[0]),1),oa,N(" vs "+I(t.genDiffToPrevious.diff.Model[1]),1)])])):P("",!0),"Sampler"in t.genDiffToPrevious.diff?(f(),S("tr",ca,[ua,u("td",null,[u("strong",null,I(t.genDiffToPrevious.diff.Sampler[0]),1),da,N(" vs "+I(t.genDiffToPrevious.diff.Sampler[1]),1)])])):P("",!0)]),fa,n(t.genDiffToPrevious.diff)?(f(),S("div",ha,[pa,N(" props that changed:"),ga,va,u("ul",null,[(f(!0),S(Z,null,ae(i(t.genDiffToPrevious.diff),(a,g)=>(f(),S("li",null,I(g),1))),256))])])):P("",!0)])]),t.genDiffToNext.empty?P("",!0):(f(),S("div",ma,["prompt"in t.genDiffToNext.diff?(f(),S("div",ya,"P+")):P("",!0),"negativePrompt"in t.genDiffToNext.diff?(f(),S("div",ba,"P-")):P("",!0),"seed"in t.genDiffToNext.diff?(f(),S("div",ka,"Se")):P("",!0),"steps"in t.genDiffToNext.diff?(f(),S("div",Sa,"St")):P("",!0),"cfgScale"in t.genDiffToNext.diff?(f(),S("div",wa,"Cf")):P("",!0),"size"in t.genDiffToNext.diff?(f(),S("div",Aa,"Si")):P("",!0),"Model"in t.genDiffToNext.diff?(f(),S("div",Ia,"Mo")):P("",!0),"Sampler"in t.genDiffToNext.diff?(f(),S("div",_a,"Sa")):P("",!0),n(t.genDiffToNext.diff)?(f(),S("div",Ca,"Ot")):P("",!0)])),u("div",Ea,[u("small",null,[A(U(bt)),Pa,N(" vs "+I(t.genDiffToNext.otherFile)+" ",1),Ta,Oa,u("table",null,["prompt"in t.genDiffToNext.diff?(f(),S("tr",Da,[Ma,u("td",null,I(t.genDiffToNext.diff.prompt)+" tokens changed",1)])):P("",!0),"negativePrompt"in t.genDiffToNext.diff?(f(),S("tr",Na,[za,u("td",null,I(t.genDiffToNext.diff.negativePrompt)+" tokens changed",1)])):P("",!0),"seed"in t.genDiffToNext.diff?(f(),S("tr",Fa,[$a,u("td",null,[u("strong",null,I(t.genDiffToNext.diff.seed[0]),1),N(" vs "+I(t.genDiffToNext.diff.seed[1]),1)])])):P("",!0),"steps"in t.genDiffToNext.diff?(f(),S("tr",Qa,[Ba,u("td",null,[u("strong",null,I(t.genDiffToNext.diff.steps[0]),1),N(" vs "+I(t.genDiffToNext.diff.steps[1]),1)])])):P("",!0),"cfgScale"in t.genDiffToNext.diff?(f(),S("tr",xa,[La,u("td",null,[u("strong",null,I(t.genDiffToNext.diff.cfgScale[0]),1),N(" vs "+I(t.genDiffToNext.diff.cfgScale[1]),1)])])):P("",!0),"size"in t.genDiffToNext.diff?(f(),S("tr",Ra,[ja,u("td",null,[u("strong",null,I(t.genDiffToNext.diff.size[0]),1),N(" vs "+I(t.genDiffToNext.diff.size[1]),1)])])):P("",!0),"Model"in t.genDiffToNext.diff?(f(),S("tr",Ha,[Va,u("td",null,[u("strong",null,I(t.genDiffToNext.diff.Model[0]),1),Ua,N(" vs "+I(t.genDiffToNext.diff.Model[1]),1)])])):P("",!0),"Sampler"in t.genDiffToNext.diff?(f(),S("tr",Wa,[Ja,u("td",null,[u("strong",null,I(t.genDiffToNext.diff.Sampler[0]),1),Ka,N(" vs "+I(t.genDiffToNext.diff.Sampler[1]),1)])])):P("",!0)]),qa,n(t.genDiffToNext.diff)?(f(),S("div",Ya,[Ga,N(" props that changed:"),Za,Xa,u("ul",null,[(f(!0),S(Z,null,ae(i(t.genDiffToNext.diff),(a,g)=>(f(),S("li",null,I(g),1))),256))])])):P("",!0)])])]))}});const tr=Ut(er,[["__scopeId","data-v-78cd67a3"]]),nr=["data-idx"],ir={key:1,class:"more"},sr={class:"float-btn-wrap"},ar={key:1,class:"tags-container"},rr=["urld"],lr={class:"play-icon"},or=["src"],cr={key:0,class:"tags-container"},ur={key:4,class:"preview-icon-wrap"},dr={key:1,class:"dir-cover-container"},fr=["src"],hr={key:5,class:"profile"},pr={class:"name line-clamp-1"},gr={class:"basic-info"},vr=ke({__name:"FileItem",props:{file:{},idx:{},selected:{type:Boolean,default:!1},showMenuIdx:{},cellWidth:{},fullScreenPreviewImageUrl:{},enableRightClickMenu:{type:Boolean,default:!0},enableCloseIcon:{type:Boolean,default:!1},isSelectedMutilFiles:{type:Boolean},genDiffToPrevious:{default:()=>({empty:!0,ownFile:"",otherFile:"",diff:""})},genDiffToNext:{default:()=>({empty:!0,ownFile:"",otherFile:"",diff:""})},genInfo:{},enableChangeIndicator:{type:Boolean},extraTags:{},coverFiles:{}},emits:["update:showMenuIdx","fileItemClick","dragstart","dragend","previewVisibleChange","contextMenuClick","close-icon-click"],setup(e,{emit:i}){const n=e;ei(o=>({"625cbca1":o.$props.cellWidth+"px"}));const t=Ge(),s=zt(),a=q(()=>s.tagMap.get(n.file.fullpath)??[]),g=q(()=>{const o=t.gridThumbnailResolution;return t.enableThumbnail?pt(n.file,[o,o].join("x")):oe(n.file)}),d=q(()=>{var o;return(((o=t.conf)==null?void 0:o.all_custom_tags)??[]).reduce((y,_)=>[...y,{..._,selected:!!a.value.find(w=>w.id===_.id)}],[])}),v=q(()=>d.value.find(o=>o.type==="custom"&&o.name==="like")),k=()=>{De(v.value),i("contextMenuClick",{key:`toggle-tag-${v.value.id}`},n.file,n.idx)};return(o,y)=>{const _=me,w=Ht,r=Vt,l=si,h=mi;return f(),J(_,{trigger:["contextmenu"],visible:U(t).longPressOpenContextMenu?typeof o.idx=="number"&&o.showMenuIdx===o.idx:void 0,"onUpdate:visible":y[8]||(y[8]=C=>typeof o.idx=="number"&&i("update:showMenuIdx",C?o.idx:-1))},{overlay:Q(()=>[o.enableRightClickMenu?(f(),J(Tt,{key:0,file:o.file,idx:o.idx,"selected-tag":a.value,onContextMenuClick:y[7]||(y[7]=(C,p,b)=>i("contextMenuClick",C,p,b)),"is-selected-mutil-files":o.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])):P("",!0)]),default:Q(()=>{var C;return[(f(),S("li",{class:de(["file file-item-trigger grid",{clickable:o.file.type==="dir",selected:o.selected}]),"data-idx":o.idx,key:o.file.name,draggable:"true",onDragstart:y[4]||(y[4]=p=>i("dragstart",p,o.idx)),onDragend:y[5]||(y[5]=p=>i("dragend",p,o.idx)),onClickCapture:y[6]||(y[6]=p=>i("fileItemClick",p,o.file,o.idx))},[u("div",null,[o.enableCloseIcon?(f(),S("div",{key:0,class:"close-icon",onClick:y[0]||(y[0]=p=>i("close-icon-click"))},[A(U(ti))])):P("",!0),o.enableRightClickMenu?(f(),S("div",ir,[A(_,null,{overlay:Q(()=>[A(Tt,{file:o.file,idx:o.idx,"selected-tag":a.value,onContextMenuClick:y[1]||(y[1]=(p,b,c)=>i("contextMenuClick",p,b,c)),"is-selected-mutil-files":o.isSelectedMutilFiles},null,8,["file","idx","selected-tag","is-selected-mutil-files"])]),default:Q(()=>[u("div",sr,[A(U(ni))])]),_:1}),o.file.type==="file"?(f(),J(_,{key:0},{overlay:Q(()=>[d.value.length>1?(f(),J(r,{key:0,onClick:y[2]||(y[2]=p=>i("contextMenuClick",p,o.file,o.idx))},{default:Q(()=>[(f(!0),S(Z,null,ae(d.value,p=>(f(),J(w,{key:`toggle-tag-${p.id}`},{default:Q(()=>[N(I(p.name)+" ",1),p.selected?(f(),J(U(Kt),{key:0})):(f(),J(U(Yt),{key:1}))]),_:2},1024))),128))]),_:1})):P("",!0)]),default:Q(()=>{var p,b;return[u("div",{class:de(["float-btn-wrap",{"like-selected":(p=v.value)==null?void 0:p.selected}]),onClick:k},[(b=v.value)!=null&&b.selected?(f(),J(U(Ki),{key:0})):(f(),J(U(Zi),{key:1}))],2)]}),_:1})):P("",!0)])):P("",!0),U(ie)(o.file.name)?(f(),S("div",{key:o.file.fullpath,class:de(`idx-${o.idx} item-content`)},[o.enableChangeIndicator?(f(),J(tr,{key:0,"gen-diff-to-next":o.genDiffToNext,"gen-diff-to-previous":o.genDiffToPrevious},null,8,["gen-diff-to-next","gen-diff-to-previous"])):P("",!0),A(l,{src:g.value,fallback:U($i),preview:{src:o.fullScreenPreviewImageUrl,onVisibleChange:(p,b)=>i("previewVisibleChange",p,b)}},null,8,["src","fallback","preview"]),a.value&&o.cellWidth>128?(f(),S("div",ar,[(f(!0),S(Z,null,ae(o.extraTags??a.value,p=>(f(),J(h,{key:p.id,color:U(s).getColor(p.name)},{default:Q(()=>[N(I(p.name),1)]),_:2},1032,["color"]))),128))])):P("",!0)],2)):U(ii)(o.file.name)?(f(),S("div",{key:3,class:de(`idx-${o.idx} item-content video`),urld:U(Be)(o.file),style:jt({"background-image":`url('${U(Be)(o.file)}')`}),onClick:y[3]||(y[3]=p=>U(di)(o.file,b=>i("contextMenuClick",{key:`toggle-tag-${b}`},o.file,o.idx)))},[u("div",lr,[u("img",{src:U(ns),style:{width:"40px",height:"40px"}},null,8,or)]),a.value&&o.cellWidth>128?(f(),S("div",cr,[(f(!0),S(Z,null,ae(a.value,p=>(f(),J(h,{key:p.id,color:U(s).getColor(p.name)},{default:Q(()=>[N(I(p.name),1)]),_:2},1032,["color"]))),128))])):P("",!0)],14,rr)):(f(),S("div",ur,[o.file.type==="file"?(f(),J(U(Ii),{key:0,class:"icon center"})):(C=o.coverFiles)!=null&&C.length&&o.cellWidth>160?(f(),S("div",dr,[(f(!0),S(Z,null,ae(o.coverFiles,p=>(f(),S("img",{class:"dir-cover-item",src:p.media_type==="image"?U(pt)(p):U(Be)(p),key:p.fullpath},null,8,fr))),128))])):(f(),J(U(Pi),{key:2,class:"icon center"}))])),o.cellWidth>128?(f(),S("div",hr,[u("div",pr,I(o.file.name),1),u("div",gr,[u("div",null,I(o.file.type)+" "+I(o.file.size),1),u("div",null,I(o.file.date),1)])])):P("",!0)])],42,nr))]}),_:1},8,["visible"])}}});const Tr=Ut(vr,[["__scopeId","data-v-e211d6b7"]]);export{Tr as F,Tt as _,Ir as a,_r as b,Cr as c,Er as d,wr as e,Pr as f,Ar as g,nn as h,Ue as i,be as j,as as k,Ce as s,re as u};
