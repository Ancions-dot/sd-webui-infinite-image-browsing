import{d as Y,u as ie,g as L,_ as xe,c as a,a as oe,P as X,D as Se,f as Pe,w as We,b as He,e as Je,h as ye,M as re,i as Xe,j as Ye,F as se,k as Ze,l as et,o as p,m as N,n as i,p as u,q as k,r as e,s as z,t as tt,v as m,x as T,y as P,z as ne,A as ae,B as nt,C as at,E as ot,S as we,G as rt,H as J,I as st,J as lt,K as it,L as he,N as ut,O as dt,Q as ct,R as pt,T as mt,U as vt,V as ft,W as kt}from"./index-c2119b6f.js";import{D as Me,S as U,s as bt,a as gt,f as Ct,L as _t,R as yt,b as wt}from"./fullScreenContextMenu-b1b1d8fe.js";import{F as E,_ as ht}from"./index-77f42ce2.js";import{u as It,a as xt,b as St,c as Pt,d as Mt,e as $t,f as At,s as Rt,v as Bt}from"./hook-539b1760.js";/* empty css              *//* empty css              */import"./db-245df301.js";import"./_baseIteratee-69afb4b5.js";var Dt=["class","style"],Nt=function(){return{prefixCls:String,href:String,separator:X.any,overlay:X.any,onClick:Function}};const q=Y({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Nt(),slots:["separator","overlay"],setup:function(o,_){var v=_.slots,b=_.attrs,w=ie("breadcrumb",o),y=w.prefixCls,x=function(h,d){var s=L(v,o,"overlay");return s?a(Me,{overlay:s,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(d,"-overlay-link")},[h,a(Se,null,null)])]}}):h};return function(){var S,h=(S=L(v,o,"separator"))!==null&&S!==void 0?S:"/",d=L(v,o),s=b.class,g=b.style,f=xe(b,Dt),c;return o.href!==void 0?c=a("a",oe({class:"".concat(y.value,"-link"),onClick:o.onClick},f),[d]):c=a("span",oe({class:"".concat(y.value,"-link"),onClick:o.onClick},f),[d]),c=x(c,y.value),d?a("span",{class:s,style:g},[c,h&&a("span",{class:"".concat(y.value,"-separator")},[h])]):null}}});var Et=function(){return{prefixCls:String,routes:{type:Array},params:X.any,separator:X.any,itemRender:{type:Function}}};function Ft(r,o){if(!r.breadcrumbName)return null;var _=Object.keys(o).join("|"),v=r.breadcrumbName.replace(new RegExp(":(".concat(_,")"),"g"),function(b,w){return o[w]||b});return v}function Ie(r){var o=r.route,_=r.params,v=r.routes,b=r.paths,w=v.indexOf(o)===v.length-1,y=Ft(o,_);return w?a("span",null,[y]):a("a",{href:"#/".concat(b.join("/"))},[y])}const O=Y({compatConfig:{MODE:3},name:"ABreadcrumb",props:Et(),slots:["separator","itemRender"],setup:function(o,_){var v=_.slots,b=ie("breadcrumb",o),w=b.prefixCls,y=b.direction,x=function(s,g){return s=(s||"").replace(/^\//,""),Object.keys(g).forEach(function(f){s=s.replace(":".concat(f),g[f])}),s},S=function(s,g,f){var c=Xe(s),I=x(g||"",f);return I&&c.push(I),c},h=function(s){var g=s.routes,f=g===void 0?[]:g,c=s.params,I=c===void 0?{}:c,M=s.separator,$=s.itemRender,A=$===void 0?Ie:$,R=[];return f.map(function(C){var B=x(C.path,I);B&&R.push(B);var V=[].concat(R),j=null;return C.children&&C.children.length&&(j=a(re,null,{default:function(){return[C.children.map(function(F){return a(re.Item,{key:F.path||F.breadcrumbName},{default:function(){return[A({route:F,params:I,routes:f,paths:S(V,F.path,I)})]}})})]}})),a(q,{overlay:j,separator:M,key:B||C.breadcrumbName},{default:function(){return[A({route:C,params:I,routes:f,paths:V})]}})})};return function(){var d,s,g,f=o.routes,c=o.params,I=c===void 0?{}:c,M=Pe(L(v,o)),$=(d=L(v,o,"separator"))!==null&&d!==void 0?d:"/",A=o.itemRender||v.itemRender||Ie;f&&f.length>0?g=h({routes:f,params:I,separator:$,itemRender:A}):M.length&&(g=M.map(function(C,B){return We(He(C.type)==="object"&&(C.type.__ANT_BREADCRUMB_ITEM||C.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Je(C,{separator:$,key:B})}));var R=(s={},ye(s,w.value,!0),ye(s,"".concat(w.value,"-rtl"),y.value==="rtl"),s);return a("div",{class:R},[g])}}});var zt=["separator","class"],Tt=function(){return{prefixCls:String}};const le=Y({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Tt(),setup:function(o,_){var v=_.slots,b=_.attrs,w=ie("breadcrumb",o),y=w.prefixCls;return function(){var x;b.separator;var S=b.class,h=xe(b,zt),d=Pe((x=v.default)===null||x===void 0?void 0:x.call(v));return a("span",oe({class:["".concat(y.value,"-separator"),S]},h),[d.length>0?d:"/"])}}});O.Item=q;O.Separator=le;O.install=function(r){return r.component(O.name,O),r.component(q.name,q),r.component(le.name,le),r};E.useInjectFormItemContext=Ye;E.ItemRest=se;E.install=function(r){return r.component(E.name,E),r.component(E.Item.name,E.Item),r.component(se.name,se),r};U.setDefaultIndicator=bt;U.install=function(r){return r.component(U.name,U),r};const Ot={class:"hint"},Vt={class:"location-bar"},jt={key:0},Lt=["onClick"],Ut={key:3,style:{"margin-left":"8px"}},qt={class:"actions"},Gt=["onClick"],Kt={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Qt={style:{padding:"4px"}},Wt={style:{padding:"4px"}},Ht={key:0,class:"view"},Jt={style:{padding:"16px 0 32px"}},Xt={key:0,class:"preview-switch"},Yt=Y({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(r){const o=r,_=Ze(),{scroller:v,stackViewEl:b,props:w,multiSelectedIdxs:y,spinning:x}=It().toRefs(),{currLocation:S,currPage:h,refresh:d,copyLocation:s,back:g,openNext:f,stack:c,quickMoveTo:I,addToSearchScanPathAndQuickMove:M,searchPathInfo:$,locInputValue:A,isLocationEditing:R,onLocEditEnter:C,onEditBtnClick:B,share:V,selectAll:j}=xt(o),{gridItems:Z,sortMethodConv:F,moreActionsDropdownShow:G,sortedFiles:K,sortMethod:ee,viewMode:Q,itemSize:ue,loadNextDir:$e,loadNextDirLoading:Ae,canLoadNext:Re,onScroll:Be}=St(o),{onDrop:De,onFileDragStart:Ne,onFileDragEnd:Ee}=Pt(),{onFileItemClick:Fe,onContextMenuClick:de,showGenInfo:W,imageGenInfo:ce,q:ze}=Mt(o,{openNext:f}),{previewIdx:H,onPreviewVisibleChange:Te,previewing:pe,previewImgMove:me,canPreview:ve}=$t(o),{showMenuIdx:te}=At();return et(()=>o,()=>{w.value=o;const l=Rt.get(o.stackKey??"");l&&(c.value=l.slice())},{immediate:!0}),(l,t)=>{const Oe=ut,Ve=dt,je=ct,fe=q,ke=O,Le=pt,Ue=mt,be=vt,qe=ft,Ge=re,ge=Me,Ce=ht,Ke=E,Qe=U;return p(),N(Qe,{spinning:e(x),size:"large"},{default:i(()=>[a(Oe,{style:{display:"none"}}),u("div",{ref_key:"stackViewEl",ref:b,onDragover:t[23]||(t[23]=k(()=>{},["prevent"])),onDrop:t[24]||(t[24]=k(n=>e(De)(n),["prevent"])),class:"container"},[a(je,{visible:e(W),"onUpdate:visible":t[1]||(t[1]=n=>z(W)?W.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>W.value=!1)},{cancelText:i(()=>[]),default:i(()=>[a(Ve,{active:"",loading:!e(ze).isIdle},{default:i(()=>[u("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(tt)(e(ce)))},[u("div",Ot,m(l.$t("doubleClickToCopy")),1),T(" "+m(e(ce)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),u("div",Vt,[o.walkModePath?(p(),P("div",jt,[a(Le,null,{title:i(()=>[T(m(l.$t("walk-mode-move-message")),1)]),default:i(()=>[a(ke,{style:{flex:"1"}},{default:i(()=>[(p(!0),P(ne,null,ae(e(c),(n,D)=>(p(),N(fe,{key:D},{default:i(()=>[u("span",null,m(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})])):(p(),P("div",{key:1,class:"breadcrumb",style:nt({flex:e(R)?1:""})},[e(R)?(p(),N(Ue,{key:0,style:{flex:"1"},value:e(A),"onUpdate:value":t[3]||(t[3]=n=>z(A)?A.value=n:null),onClick:t[4]||(t[4]=k(()=>{},["stop"])),onPressEnter:e(C)},null,8,["value","onPressEnter"])):(p(),N(ke,{key:1,style:{flex:"1"}},{default:i(()=>[(p(!0),P(ne,null,ae(e(c),(n,D)=>(p(),N(fe,{key:D},{default:i(()=>[u("a",{onClick:k(_e=>e(g)(D),["prevent"])},m(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,Lt)]),_:2},1024))),128))]),_:1})),e(R)?(p(),N(be,{key:2,size:"small",onClick:e(C),type:"primary"},{default:i(()=>[T(m(l.$t("go")),1)]),_:1},8,["onClick"])):(p(),P("div",Ut,[u("a",{onClick:t[5]||(t[5]=k((...n)=>e(s)&&e(s)(...n),["prevent"])),style:{"margin-right":"4px"}},m(l.$t("copy")),1),T(),u("a",{onClick:t[6]||(t[6]=k((...n)=>e(B)&&e(B)(...n),["prevent","stop"]))},m(l.$t("edit")),1)]))],4)),u("div",qt,[u("a",{class:"opt",onClick:t[7]||(t[7]=k((...n)=>e(d)&&e(d)(...n),["prevent"]))},m(l.$t("refresh")),1),u("a",{class:"opt",onClick:t[8]||(t[8]=k((...n)=>e(j)&&e(j)(...n),["prevent","stop"]))},m(l.$t("selectAll")),1),u("a",{class:"opt",onClick:t[9]||(t[9]=k((...n)=>e(V)&&e(V)(...n),["prevent"]))},m(l.$t("share")),1),a(ge,null,{overlay:i(()=>[a(Ge,null,{default:i(()=>[(p(!0),P(ne,null,ae(e(_).quickMovePaths,n=>(p(),N(qe,{key:n.dir},{default:i(()=>[u("a",{onClick:k(D=>e(I)(n.dir),["prevent"])},m(n.zh),9,Gt)]),_:2},1024))),128))]),_:1})]),default:i(()=>[u("a",{class:"opt",onClick:t[10]||(t[10]=k(()=>{},["prevent"]))},[T(m(l.$t("quickMove"))+" ",1),a(e(Se))])]),_:1}),a(ge,{trigger:["click"],visible:e(G),"onUpdate:visible":t[19]||(t[19]=n=>z(G)?G.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[u("div",Kt,[a(Ke,at(ot({labelCol:{span:6},wrapperCol:{span:18}})),{default:i(()=>[a(Ce,{label:l.$t("viewMode")},{default:i(()=>[a(e(we),{value:e(Q),"onUpdate:value":t[12]||(t[12]=n=>z(Q)?Q.value=n:null),onClick:t[13]||(t[13]=k(()=>{},["stop"])),conv:{value:n=>n,text:n=>l.$t(n)},options:e(Bt)},null,8,["value","conv","options"])]),_:1},8,["label"]),a(Ce,{label:l.$t("sortingMethod")},{default:i(()=>[a(e(we),{value:e(ee),"onUpdate:value":t[14]||(t[14]=n=>z(ee)?ee.value=n:null),onClick:t[15]||(t[15]=k(()=>{},["stop"])),conv:e(F),options:e(rt)},null,8,["value","conv","options"])]),_:1},8,["label"]),u("div",Qt,[e($)?e($).can_delete?(p(),P("a",{key:1,onClick:t[17]||(t[17]=k((...n)=>e(M)&&e(M)(...n),["prevent"]))},m(l.$t("removeFromSearchScanPathAndQuickMove")),1)):J("",!0):(p(),P("a",{key:0,onClick:t[16]||(t[16]=k((...n)=>e(M)&&e(M)(...n),["prevent"]))},m(l.$t("addToSearchScanPathAndQuickMove")),1))]),u("div",Wt,[u("a",{onClick:t[18]||(t[18]=k(n=>e(st)(e(S)+"/"),["prevent"]))},m(l.$t("openWithLocalFileBrowser")),1)])]),_:1},16)])]),default:i(()=>[u("a",{class:"opt",onClick:t[11]||(t[11]=k(()=>{},["prevent"]))},m(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(h)?(p(),P("div",Ht,[a(e(gt),{class:"file-list",items:e(K),ref_key:"scroller",ref:v,onScroll:e(Be),"item-size":e(ue).first,"key-field":"fullpath","item-secondary-size":e(ue).second,gridItems:e(Z)},lt({default:i(({item:n,index:D})=>[a(Ct,{idx:D,file:n,"full-screen-preview-image-url":e(K)[e(H)]?e(it)(e(K)[e(H)]):"","show-menu-idx":e(te),"onUpdate:showMenuIdx":t[20]||(t[20]=_e=>z(te)?te.value=_e:null),selected:e(y).includes(D),"view-mode":e(Q),onFileItemClick:e(Fe),onDragstart:e(Ne),onDragend:e(Ee),onPreviewVisibleChange:e(Te),onContextMenuClick:e(de)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","view-mode","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick"])]),_:2},[o.walkModePath?{name:"after",fn:i(()=>[u("div",Jt,[a(be,{onClick:e($e),loading:e(Ae),block:"",type:"primary",disabled:!e(Re),ghost:""},{default:i(()=>[T(m(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(pe)?(p(),P("div",Xt,[a(e(_t),{onClick:t[21]||(t[21]=n=>e(me)("prev")),class:he({disable:!e(ve)("prev")})},null,8,["class"]),a(e(yt),{onClick:t[22]||(t[22]=n=>e(me)("next")),class:he({disable:!e(ve)("next")})},null,8,["class"])])):J("",!0)])):J("",!0)],544),e(pe)?(p(),N(wt,{key:0,file:e(K)[e(H)],idx:e(H),onContextMenuClick:e(de)},null,8,["file","idx","onContextMenuClick"])):J("",!0)]),_:1},8,["spinning"])}}});const ln=kt(Yt,[["__scopeId","data-v-893d9b97"]]);export{ln as default};
