import{d as de,u as je,g as le,_ as it,c as i,a as Oe,P as be,D as Be,f as ut,w as Dt,b as Mt,e as Ot,h as Ze,M as Le,i as Bt,j as Lt,F as Re,A as ct,r as ie,k as Ne,l as et,o as Rt,m as Pe,n as Nt,p as Et,s as tt,q as zt,t as Ae,v as Y,x as at,y as Tt,z as $e,B as Fe,C as Ee,E as jt,G as Vt,H as xe,I as Ut,J as Wt,K as Gt,L as qt,N as D,O as j,Q as _,R as Z,S as P,T as ze,U as G,V as dt,W as Ht,X as U,Y as C,Z as e,$ as S,a0 as W,a1 as Kt,a2 as nt,a3 as Qt,a4 as Jt,a5 as Xt,a6 as Yt,a7 as Zt,a8 as ea,a9 as ta,aa as st,ab as aa,ac as na,ad as sa,ae as oa,af as ra,ag as la}from"./index-57f41ee4.js";import{S as ue,s as ia}from"./index-df4cf781.js";import{F as q,N as ua,_ as ca,a as da}from"./numInput-fe8d8362.js";/* empty css              */import{D as pt}from"./index-5edbc9b5.js";/* empty css              *//* empty css              */import{u as Ve,N as pa,g as M,s as ft,a as fa,b as va,c as ma,d as ga,F as ha}from"./FileItem-42b0d949.js";import{u as ka,a as ba,b as ya,c as Ca,M as _a,L as wa,R as Ia,f as Sa}from"./MultiSelectKeep-60d25bb3.js";import{g as ke,l as De,o as Pa}from"./functionalCallableComp-12a5737a.js";import"./shortcut-de2401c4.js";import"./Checkbox-ca856433.js";var Aa=["class","style"],$a=function(){return{prefixCls:String,href:String,separator:be.any,overlay:be.any,onClick:Function}};const ce=de({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:$a(),slots:["separator","overlay"],setup:function(t,d){var o=d.slots,f=d.attrs,v=je("breadcrumb",t),A=v.prefixCls,h=function(l,k){var c=le(o,t,"overlay");return c?i(pt,{overlay:c,placement:"bottom"},{default:function(){return[i("span",{class:"".concat(k,"-overlay-link")},[l,i(Be,null,null)])]}}):l};return function(){var g,l=(g=le(o,t,"separator"))!==null&&g!==void 0?g:"/",k=le(o,t),c=f.class,w=f.style,b=it(f,Aa),I;return t.href!==void 0?I=i("a",Oe({class:"".concat(A.value,"-link"),onClick:t.onClick},b),[k]):I=i("span",Oe({class:"".concat(A.value,"-link"),onClick:t.onClick},b),[k]),I=h(I,A.value),k?i("span",{class:c,style:w},[I,l&&i("span",{class:"".concat(A.value,"-separator")},[l])]):null}}});var Fa=function(){return{prefixCls:String,routes:{type:Array},params:be.any,separator:be.any,itemRender:{type:Function}}};function xa(s,t){if(!s.breadcrumbName)return null;var d=Object.keys(t).join("|"),o=s.breadcrumbName.replace(new RegExp(":(".concat(d,")"),"g"),function(f,v){return t[v]||f});return o}function ot(s){var t=s.route,d=s.params,o=s.routes,f=s.paths,v=o.indexOf(t)===o.length-1,A=xa(t,d);return v?i("span",null,[A]):i("a",{href:"#/".concat(f.join("/"))},[A])}const ae=de({compatConfig:{MODE:3},name:"ABreadcrumb",props:Fa(),slots:["separator","itemRender"],setup:function(t,d){var o=d.slots,f=je("breadcrumb",t),v=f.prefixCls,A=f.direction,h=function(c,w){return c=(c||"").replace(/^\//,""),Object.keys(w).forEach(function(b){c=c.replace(":".concat(b),w[b])}),c},g=function(c,w,b){var I=Bt(c),m=h(w||"",b);return m&&I.push(m),I},l=function(c){var w=c.routes,b=w===void 0?[]:w,I=c.params,m=I===void 0?{}:I,R=c.separator,B=c.itemRender,O=B===void 0?ot:B,N=[];return b.map(function($){var T=h($.path,m);T&&N.push(T);var H=[].concat(N),K=null;return $.children&&$.children.length&&(K=i(Le,null,{default:function(){return[$.children.map(function(z){return i(Le.Item,{key:z.path||z.breadcrumbName},{default:function(){return[O({route:z,params:m,routes:b,paths:g(H,z.path,m)})]}})})]}})),i(ce,{overlay:K,separator:R,key:T||$.breadcrumbName},{default:function(){return[O({route:$,params:m,routes:b,paths:H})]}})})};return function(){var k,c,w,b=t.routes,I=t.params,m=I===void 0?{}:I,R=ut(le(o,t)),B=(k=le(o,t,"separator"))!==null&&k!==void 0?k:"/",O=t.itemRender||o.itemRender||ot;b&&b.length>0?w=l({routes:b,params:m,separator:B,itemRender:O}):R.length&&(w=R.map(function($,T){return Dt(Mt($.type)==="object"&&($.type.__ANT_BREADCRUMB_ITEM||$.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Ot($,{separator:B,key:T})}));var N=(c={},Ze(c,v.value,!0),Ze(c,"".concat(v.value,"-rtl"),A.value==="rtl"),c);return i("div",{class:N},[w])}}});var Da=["separator","class"],Ma=function(){return{prefixCls:String}};const Te=de({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Ma(),setup:function(t,d){var o=d.slots,f=d.attrs,v=je("breadcrumb",t),A=v.prefixCls;return function(){var h;f.separator;var g=f.class,l=it(f,Da),k=ut((h=o.default)===null||h===void 0?void 0:h.call(o));return i("span",Oe({class:["".concat(A.value,"-separator"),g]},l),[k.length>0?k:"/"])}}});ae.Item=ce;ae.Separator=Te;ae.install=function(s){return s.component(ae.name,ae),s.component(ce.name,ce),s.component(Te.name,Te),s};q.useInjectFormItemContext=Lt;q.ItemRest=Re;q.install=function(s){return s.component(q.name,q),s.component(q.Item.name,q.Item),s.component(Re.name,Re),s};ue.setDefaultIndicator=ia;ue.install=function(s){return s.component(ue.name,ue),s};var Oa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const Ba=Oa;function rt(s){for(var t=1;t<arguments.length;t++){var d=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(d).filter(function(f){return Object.getOwnPropertyDescriptor(d,f).enumerable}))),o.forEach(function(f){La(s,f,d[f])})}return s}function La(s,t,d){return t in s?Object.defineProperty(s,t,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[t]=d,s}var Ue=function(t,d){var o=rt({},t,d.attrs);return i(ct,rt({},o,{icon:Ba}),null)};Ue.displayName="ArrowLeftOutlined";Ue.inheritAttrs=!1;const Ra=Ue;var Na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Ea=Na;function lt(s){for(var t=1;t<arguments.length;t++){var d=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(d);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(d).filter(function(f){return Object.getOwnPropertyDescriptor(d,f).enumerable}))),o.forEach(function(f){za(s,f,d[f])})}return s}function za(s,t,d){return t in s?Object.defineProperty(s,t,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[t]=d,s}var We=function(t,d){var o=lt({},t,d.attrs);return i(ct,lt({},o,{icon:Ea}),null)};We.displayName="DatabaseOutlined";We.inheritAttrs=!1;const Ta=We;function ja(){const s=ie(),{scroller:t,stackViewEl:d,stack:o,currPage:f,currLocation:v,useEventListen:A,eventEmitter:h,getPane:g,props:l,deletedFiles:k,walker:c,sortedFiles:w}=Ve().toRefs();Ne(()=>o.value.length,et((a,u)=>{var p;a!==u&&((p=t.value)==null||p.scrollToItem(0))},300)),Rt(async()=>{var a;if(!o.value.length)if(l.value.mode==="scanned-fixed"||l.value.mode==="walk")o.value=[{files:[],curr:l.value.path??""}];else{const u=await ke("/");o.value.push({files:u.files,curr:"/"})}s.value=new pa,s.value.configure({parent:d.value}),l.value.path&&l.value.path!=="/"?await O(l.value.path):(a=M.conf)!=null&&a.home&&O(M.conf.home)}),Ne(v,et(a=>{const u=g.value();if(!u)return;u.path=a;const p=u.path.split("/").pop()??"",x=(()=>{const E={walk:"Walk","scanned-fixed":"Fixed",scanned:null}[l.value.mode??"scanned"],L=V=>E?`${E}: ${V}`:V,X=Fe(a);for(const[V,oe]of Object.entries(M.pathAliasMap))if(X.startsWith(oe))return L(X.replace(oe,V));return L(p)})();u.name=Pe("div",{style:"display:flex;align-items:center"},[Pe(Ta),Pe("span",{class:"line-clamp-1",style:"max-width: 256px"},x)]),u.nameFallbackStr=x,M.recent=M.recent.filter(E=>E.key!==u.key),M.recent.unshift({path:a,key:u.key}),M.recent.length>20&&(M.recent=M.recent.slice(0,20))},300));const b=()=>Ee(v.value),I=async a=>{var u,p;if(a.type==="dir")try{(u=s.value)==null||u.start();const{files:F}=await ke(a.fullpath);l.value.mode=="scanned-fixed"?o.value=[{files:F,curr:a.fullpath}]:o.value.push({files:F,curr:a.name})}finally{(p=s.value)==null||p.done()}},m=a=>{if(l.value.mode!="walk")for(;a<o.value.length-1;)o.value.pop()},R=()=>{O(jt(v.value))},B=(a,u)=>(Vt(M.conf,"global.conf load failed"),M.conf.is_win?a.toLowerCase()==u.toLowerCase():a==u),O=async a=>{l.value.mode==="walk"?g.value().path=a:l.value.mode==="scanned-fixed"?await I({fullpath:a,name:a,type:"dir"}):await N(a)},N=async a=>{var p,F;const u=o.value.slice();try{Nt(a)||(a=Et(((p=M.conf)==null?void 0:p.sd_cwd)??"/",a));const x=tt(a),E=o.value.map(L=>L.curr);for(E.shift();E[0]&&x[0]&&B(E[0],x[0]);)E.shift(),x.shift();for(let L=0;L<E.length;L++)o.value.pop();if(!x.length)return $();for(const L of x){const X=(F=f.value)==null?void 0:F.files.find(V=>B(V.name,L));if(!X)throw console.error({frags:x,frag:L,stack:zt(o.value)}),new Error(`${L} not found`);await I(X)}}catch(x){throw Ae.error(Y("moveFailedCheckPath")+(x instanceof Error?x.message:"")),console.error(a,tt(a),f.value),o.value=u,x}},$=at(async()=>{var a,u,p;try{if((a=s.value)==null||a.start(),c.value)await c.value.reset(),h.value.emit("loadNextDir");else{const{files:F}=await ke(v.value);De(o.value).files=F}k.value.clear(),(u=t.value)==null||u.scrollToItem(0),Ae.success(Y("refreshCompleted"))}finally{(p=s.value)==null||p.done()}});Tt("returnToIIB",at(async()=>{var a,u;if(l.value.mode!=="walk")try{(a=s.value)==null||a.start();const{files:p}=await ke(v.value);De(o.value).files.map(x=>x.date).join()!==p.map(x=>x.date).join()&&(De(o.value).files=p,Ae.success(Y("autoUpdate")))}finally{(u=s.value)==null||u.done()}})),A.value("refresh",$);const T=a=>{O(a)},H=$e(()=>M.quickMovePaths.map(a=>({...a,path:Fe(a.dir)}))),K=$e(()=>{const a=Fe(v.value);return H.value.find(p=>p.path===a)}),ee=async()=>{const a=M.tabList[l.value.tabIdx],u={type:"empty",name:Y("emptyStartPage"),key:Date.now()+xe(),popAddPathModal:{path:v.value,type:"scanned"}};a.panes.push(u),a.key=u.key},z=ie(!1),Q=ie(v.value),pe=()=>{z.value=!0,Q.value=v.value},ye=async()=>{await O(Q.value),z.value=!1};ka("click",a=>{var u,p,F;(F=(p=(u=a.target)==null?void 0:u.className)==null?void 0:p.includes)!=null&&F.call(p,"ant-input")||(z.value=!1)});const Ce=()=>{const a=parent.location,u=a.href.substring(0,a.href.length-a.search.length),p=new URLSearchParams(a.search);p.set("action","open"),p.set("path",v.value),p.set("mode",l.value.mode??"scanned");const F=`${u}?${p.toString()}`;Ee(F,Y("copyLocationUrlSuccessMsg"))},ne=(a="tag-search")=>{const u=M.tabList[l.value.tabIdx],p={type:a,key:xe(),searchScope:v.value,name:Y(a==="tag-search"?"imgSearch":"fuzzy-search")};u.panes.push(p),u.key=p.key},J=()=>h.value.emit("selectAll"),se=async()=>{await Pa(v.value),await $()},fe=()=>{const a=v.value;ft.set(a,o.value);const u=M.tabList[l.value.tabIdx],p={type:"local",key:xe(),path:a,name:Y("local"),stackKey:a,mode:"walk"};u.panes.push(p),u.key=p.key},_e=$e(()=>!c.value&&w.value.some(a=>a.type==="dir"));return{locInputValue:Q,isLocationEditing:z,onLocEditEnter:ye,onEditBtnClick:pe,addToSearchScanPathAndQuickMove:ee,searchPathInfo:K,refresh:$,copyLocation:b,back:m,openNext:I,currPage:f,currLocation:v,stack:o,scroller:t,share:Ce,selectAll:J,quickMoveTo:T,onCreateFloderBtnClick:se,onWalkBtnClick:fe,showWalkButton:_e,searchInCurrentDir:ne,backToLastUseTo:R}}const Me=new Map,Va=()=>{const{useEventListen:s,sortedFiles:t}=Ve().toRefs(),d=ie(M.defaultChangeIndchecked),o=ie(M.defaultSeedChangeChecked),f=async({files:h})=>{if(await Ut(100),!d.value||(h=h.filter(l=>Wt(l.fullpath)&&!l.gen_info_obj),!h.length))return;const g=await Gt(h.map(l=>l.fullpath).filter(l=>!Me.has(l)));h.forEach(l=>{const k=g[l.fullpath]||Me.get(l.fullpath)||"";Me.set(l.fullpath,k),l.gen_info_obj=qt(k),l.gen_info_raw=k})};s.value("viewableAreaFilesChange",f);const v=h=>{const g=t.value;return[h,o.value,g[h-1],g[h],g[h+1]]};function A(h,g,l,k){const c={diff:{},empty:!0,ownFile:"",otherFile:""};if(g+l<0||g+l>=t.value.length||t.value[g]==null||!("gen_info_obj"in t.value[g])||!("gen_info_obj"in t.value[g+l]))return c;const w=h,b=t.value[g+l].gen_info_obj;if(b==null)return c;const I=["hashes","resources"];c.diff={},c.ownFile=k.name,c.otherFile=t.value[g+l].name,c.empty=!1,o.value||I.push("seed");for(const m in w)if(!I.includes(m)){if(!(m in b)){c.diff[m]="+";continue}if(w[m]!=b[m])if(m.includes("rompt")&&w[m]!=""&&b[m]!=""){const R=w[m].split(","),B=b[m].split(",");let O=0;for(const N in R)R[N]!=B[N]&&O++;c.diff[m]=O}else c.diff[m]=[w[m],b[m]]}return c}return{getGenDiff:A,changeIndchecked:d,seedChangeChecked:o,getRawGenParams:()=>f({files:t.value,startIdx:0}),getGenDiffWatchDep:v}};const Ua={class:"base-info"},Wa=de({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(s){return(t,d)=>(D(),j("div",Ua,[_("span",null,[Z(P(t.$t("items",[t.fileNum]))+" ",1),t.selectedFileNum?(D(),j(ze,{key:0},[Z(", "+P(t.$t("selectedItems",[t.selectedFileNum])),1)],64)):G("",!0)])]))}});const Ga=dt(Wa,[["__scopeId","data-v-afd25667"]]),qa={class:"hint"},Ha={class:"location-bar"},Ka=["onClick"],Qa={key:3,class:"location-act"},Ja={class:"actions"},Xa=["onClick"],Ya={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Za={style:{padding:"4px"}},en={style:{padding:"4px"}},tn={style:{padding:"4px"}},an={key:0,class:"view"},nn={style:{padding:"16px 0 512px"}},sn={key:0,class:"preview-switch"},on=de({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(s){const t=s,d=Ht(),{scroller:o,stackViewEl:f,props:v,multiSelectedIdxs:A,spinning:h}=Ve().toRefs(),{currLocation:g,currPage:l,refresh:k,copyLocation:c,back:w,openNext:b,stack:I,quickMoveTo:m,addToSearchScanPathAndQuickMove:R,locInputValue:B,isLocationEditing:O,onLocEditEnter:N,onEditBtnClick:$,share:T,selectAll:H,onCreateFloderBtnClick:K,onWalkBtnClick:ee,showWalkButton:z,searchInCurrentDir:Q,backToLastUseTo:pe}=ja(),{gridItems:ye,sortMethodConv:Ce,moreActionsDropdownShow:ne,sortedFiles:J,sortMethod:se,itemSize:fe,loadNextDir:_e,loadNextDirLoading:a,canLoadNext:u,onScroll:p,cellWidth:F,dirCoverCache:x}=fa(),{onDrop:E,onFileDragStart:L,onFileDragEnd:X}=ba(),{onFileItemClick:V,onContextMenuClick:oe,showGenInfo:ve,imageGenInfo:Ge,q:vt}=ya({openNext:b}),{previewIdx:me,onPreviewVisibleChange:mt,previewing:qe,previewImgMove:He,canPreview:Ke}=Ca(),{showMenuIdx:we}=va(),{onClearAllSelected:gt,onReverseSelect:ht,onSelectAll:kt}=ma(),{getGenDiff:bt,changeIndchecked:re,seedChangeChecked:ge,getRawGenParams:yt,getGenDiffWatchDep:Ct}=Va();return Ne(()=>t,()=>{v.value=t;const y=ft.get(t.stackKey??"");y&&(I.value=y.slice())},{immediate:!0}),(y,n)=>{const _t=aa,wt=na,It=sa,St=oa,Pt=ce,At=ae,Qe=ra,Ie=la,Je=Le,Se=pt,$t=ua,he=ca,Xe=da,Ft=q,xt=ue;return D(),U(xt,{spinning:e(h),size:"large"},{default:C(()=>[i(_a,{show:e(d).keepMultiSelect||!!e(A).length,onClearAllSelected:e(gt),onSelectAll:e(kt),onReverseSelect:e(ht)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),i(_t,{style:{display:"none"}}),_("div",{ref_key:"stackViewEl",ref:f,onDragover:n[30]||(n[30]=S(()=>{},["prevent"])),onDrop:n[31]||(n[31]=S(r=>e(E)(r),["prevent"])),class:"container"},[i(It,{visible:e(ve),"onUpdate:visible":n[1]||(n[1]=r=>W(ve)?ve.value=r:null),width:"70vw","mask-closable":"",onOk:n[2]||(n[2]=r=>ve.value=!1)},{cancelText:C(()=>[]),default:C(()=>[i(wt,{active:"",loading:!e(vt).isIdle},{default:C(()=>[_("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:n[0]||(n[0]=r=>e(Ee)(e(Ge)))},[_("div",qa,P(y.$t("doubleClickToCopy")),1),Z(" "+P(e(Ge)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),_("div",Ha,[_("div",{class:"breadcrumb",style:Kt({flex:e(O)?1:""})},[e(O)?(D(),U(St,{key:0,style:{flex:"1"},value:e(B),"onUpdate:value":n[3]||(n[3]=r=>W(B)?B.value=r:null),onClick:n[4]||(n[4]=S(()=>{},["stop"])),onKeydown:n[5]||(n[5]=S(()=>{},["stop"])),onPressEnter:e(N),"allow-clear":""},null,8,["value","onPressEnter"])):(D(),U(At,{key:1,style:{flex:"1"}},{default:C(()=>[(D(!0),j(ze,null,nt(e(I),(r,te)=>(D(),U(Pt,{key:te},{default:C(()=>[_("a",{onClick:S(Ye=>e(w)(te),["prevent"])},P(r.curr==="/"?y.$t("root"):r.curr.replace(/:\/$/,y.$t("drive"))),9,Ka)]),_:2},1024))),128))]),_:1})),e(O)?(D(),U(Qe,{key:2,size:"small",onClick:e(N),type:"primary"},{default:C(()=>[Z(P(y.$t("go")),1)]),_:1},8,["onClick"])):(D(),j("div",Qa,[y.mode==="scanned-fixed"?(D(),j("a",{key:0,onClick:n[6]||(n[6]=S((...r)=>e(pe)&&e(pe)(...r),["prevent"])),style:{margin:"0 8px 16px 0"}},[i(e(Ra))])):G("",!0),_("a",{onClick:n[7]||(n[7]=S((...r)=>e(c)&&e(c)(...r),["prevent"])),class:"copy"},P(y.$t("copy")),1),_("a",{onClick:n[8]||(n[8]=S((...r)=>e($)&&e($)(...r),["prevent","stop"]))},P(y.$t("edit")),1)]))],4),_("div",Ja,[_("a",{class:"opt",onClick:n[9]||(n[9]=S((...r)=>e(k)&&e(k)(...r),["prevent"]))},P(y.$t("refresh")),1),i(Se,null,{overlay:C(()=>[i(Je,null,{default:C(()=>[i(Ie,{key:"tag-search"},{default:C(()=>[_("a",{onClick:n[11]||(n[11]=S(r=>e(Q)("tag-search"),["prevent"]))},P(y.$t("imgSearch")),1)]),_:1}),i(Ie,{key:"tag-search"},{default:C(()=>[_("a",{onClick:n[12]||(n[12]=S(r=>e(Q)("fuzzy-search"),["prevent"]))},P(y.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:C(()=>[_("a",{class:"opt",onClick:n[10]||(n[10]=S(()=>{},["prevent"]))},[Z(P(y.$t("search"))+" ",1),i(e(Be))])]),_:1}),e(z)?(D(),j("a",{key:0,class:"opt",onClick:n[13]||(n[13]=S((...r)=>e(ee)&&e(ee)(...r),["prevent"]))}," Walk ")):G("",!0),_("a",{class:"opt",onClick:n[14]||(n[14]=S((...r)=>e(H)&&e(H)(...r),["prevent","stop"]))},P(y.$t("selectAll")),1),e(Qt)?G("",!0):(D(),j("a",{key:1,class:"opt",onClick:n[15]||(n[15]=S((...r)=>e(T)&&e(T)(...r),["prevent"]))},P(y.$t("share")),1)),i(Se,null,{overlay:C(()=>[i(Je,null,{default:C(()=>[(D(!0),j(ze,null,nt(e(d).quickMovePaths,r=>(D(),U(Ie,{key:r.dir},{default:C(()=>[_("a",{onClick:S(te=>e(m)(r.dir),["prevent"])},P(r.zh),9,Xa)]),_:2},1024))),128))]),_:1})]),default:C(()=>[_("a",{class:"opt",onClick:n[16]||(n[16]=S(()=>{},["prevent"]))},[Z(P(y.$t("quickMove"))+" ",1),i(e(Be))])]),_:1}),i(Se,{trigger:["click"],visible:e(ne),"onUpdate:visible":n[26]||(n[26]=r=>W(ne)?ne.value=r:null),placement:"bottomLeft",getPopupContainer:r=>r.parentNode},{overlay:C(()=>[_("div",Ya,[i(Ft,Jt(Xt({labelCol:{span:10},wrapperCol:{span:14}})),{default:C(()=>[i(he,{label:y.$t("gridCellWidth")},{default:C(()=>[i($t,{modelValue:e(F),"onUpdate:modelValue":n[18]||(n[18]=r=>W(F)?F.value=r:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),i(he,{label:y.$t("sortingMethod")},{default:C(()=>[i(e(Yt),{value:e(se),"onUpdate:value":n[19]||(n[19]=r=>W(se)?se.value=r:null),onClick:n[20]||(n[20]=S(()=>{},["stop"])),conv:e(Ce),options:e(Zt)},null,8,["value","conv","options"])]),_:1},8,["label"]),i(he,{label:y.$t("showChangeIndicators")},{default:C(()=>[i(Xe,{checked:e(re),"onUpdate:checked":n[21]||(n[21]=r=>W(re)?re.value=r:null),onClick:e(yt)},null,8,["checked","onClick"])]),_:1},8,["label"]),i(he,{label:y.$t("seedAsChange")},{default:C(()=>[i(Xe,{checked:e(ge),"onUpdate:checked":n[22]||(n[22]=r=>W(ge)?ge.value=r:null),disabled:!e(re)},null,8,["checked","disabled"])]),_:1},8,["label"]),_("div",Za,[_("a",{onClick:n[23]||(n[23]=S((...r)=>e(R)&&e(R)(...r),["prevent"]))},P(y.$t("addToSearchScanPathAndQuickMove")),1)]),_("div",en,[_("a",{onClick:n[24]||(n[24]=S(r=>e(ea)(e(g)+"/"),["prevent"]))},P(y.$t("openWithLocalFileBrowser")),1)]),_("div",tn,[_("a",{onClick:n[25]||(n[25]=S((...r)=>e(K)&&e(K)(...r),["prevent"]))},P(y.$t("createFolder")),1)])]),_:1},16)])]),default:C(()=>[_("a",{class:"opt",onClick:n[17]||(n[17]=S(()=>{},["prevent"]))},P(y.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(l)?(D(),j("div",an,[i(e(ga),{class:"file-list",items:e(J),ref_key:"scroller",ref:o,onScroll:e(p),"item-size":e(fe).first,"key-field":"fullpath","item-secondary-size":e(fe).second,gridItems:e(ye)},{default:C(({item:r,index:te})=>[i(ha,{idx:parseInt(te),file:r,"full-screen-preview-image-url":e(J)[e(me)]?e(ta)(e(J)[e(me)]):"","show-menu-idx":e(we),"onUpdate:showMenuIdx":n[27]||(n[27]=Ye=>W(we)?we.value=Ye:null),selected:e(A).includes(te),"cell-width":e(F),onFileItemClick:e(V),onDragstart:e(L),onDragend:e(X),onPreviewVisibleChange:e(mt),onContextMenuClick:e(oe),"is-selected-mutil-files":e(A).length>1,"enable-change-indicator":e(re),"seed-change-checked":e(ge),"get-gen-diff":e(bt),"get-gen-diff-watch-dep":e(Ct),"cover-files":e(x).get(r.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","cover-files"])]),after:C(()=>[_("div",nn,[t.mode==="walk"?(D(),U(Qe,{key:0,onClick:e(_e),loading:e(a),block:"",type:"primary",disabled:!e(u),ghost:""},{default:C(()=>[Z(P(y.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):G("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(qe)?(D(),j("div",sn,[i(e(wa),{onClick:n[28]||(n[28]=r=>e(He)("prev")),class:st({disable:!e(Ke)("prev")})},null,8,["class"]),i(e(Ia),{onClick:n[29]||(n[29]=r=>e(He)("next")),class:st({disable:!e(Ke)("next")})},null,8,["class"])])):G("",!0)])):G("",!0)],544),e(qe)?(D(),U(Sa,{key:0,file:e(J)[e(me)],idx:e(me),onContextMenuClick:e(oe)},null,8,["file","idx","onContextMenuClick"])):G("",!0),i(Ga,{"file-num":e(J).length,"selected-file-num":e(A).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const bn=dt(on,[["__scopeId","data-v-817f474b"]]);export{bn as default};
