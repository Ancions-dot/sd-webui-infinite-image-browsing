import{d as Y,u as ie,g as U,_ as Ie,c as a,a as re,P as X,D as xe,f as Se,w as Ke,b as Qe,e as He,h as ye,M as oe,i as Je,j as Xe,F as se,k as Ye,l as Ze,o as u,m as N,n as i,p as d,q as g,r as e,s as T,t as et,v as m,x as V,y as x,z as ne,A as ae,B as tt,C as nt,E as L,G as at,H as rt,S as ot,I as st,J as lt,K as it,L as ut,N as he,O as dt,Q as ct,R as pt,T as mt,U as vt,V as ft,W as kt,X as bt}from"./index-13d31bf2.js";import{D as Pe,S as q,s as gt,u as _t,a as Ct,b as yt,c as ht,d as wt,e as It,f as xt,g as St,h as Pt,i as Mt,L as $t,R as At,j as Rt}from"./fullScreenContextMenu-dd494ec0.js";import{F as E,N as Bt,_ as Dt}from"./numInput-a46c87c9.js";import"./shortcut-930f7177.js";/* empty css              *//* empty css              */import"./db-afe82730.js";import"./_baseIteratee-19f1b20a.js";var Nt=["class","style"],Et=function(){return{prefixCls:String,href:String,separator:X.any,overlay:X.any,onClick:Function}};const W=Y({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Et(),slots:["separator","overlay"],setup:function(r,C){var v=C.slots,k=C.attrs,h=ie("breadcrumb",r),y=h.prefixCls,S=function(w,c){var s=U(v,r,"overlay");return s?a(Pe,{overlay:s,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(c,"-overlay-link")},[w,a(xe,null,null)])]}}):w};return function(){var P,w=(P=U(v,r,"separator"))!==null&&P!==void 0?P:"/",c=U(v,r),s=k.class,b=k.style,f=Ie(k,Nt),p;return r.href!==void 0?p=a("a",re({class:"".concat(y.value,"-link"),onClick:r.onClick},f),[c]):p=a("span",re({class:"".concat(y.value,"-link"),onClick:r.onClick},f),[c]),p=S(p,y.value),c?a("span",{class:s,style:b},[p,w&&a("span",{class:"".concat(y.value,"-separator")},[w])]):null}}});var Ft=function(){return{prefixCls:String,routes:{type:Array},params:X.any,separator:X.any,itemRender:{type:Function}}};function Tt(o,r){if(!o.breadcrumbName)return null;var C=Object.keys(r).join("|"),v=o.breadcrumbName.replace(new RegExp(":(".concat(C,")"),"g"),function(k,h){return r[h]||k});return v}function we(o){var r=o.route,C=o.params,v=o.routes,k=o.paths,h=v.indexOf(r)===v.length-1,y=Tt(r,C);return h?a("span",null,[y]):a("a",{href:"#/".concat(k.join("/"))},[y])}const z=Y({compatConfig:{MODE:3},name:"ABreadcrumb",props:Ft(),slots:["separator","itemRender"],setup:function(r,C){var v=C.slots,k=ie("breadcrumb",r),h=k.prefixCls,y=k.direction,S=function(s,b){return s=(s||"").replace(/^\//,""),Object.keys(b).forEach(function(f){s=s.replace(":".concat(f),b[f])}),s},P=function(s,b,f){var p=Je(s),I=S(b||"",f);return I&&p.push(I),p},w=function(s){var b=s.routes,f=b===void 0?[]:b,p=s.params,I=p===void 0?{}:p,M=s.separator,$=s.itemRender,A=$===void 0?we:$,R=[];return f.map(function(_){var B=S(_.path,I);B&&R.push(B);var j=[].concat(R),O=null;return _.children&&_.children.length&&(O=a(oe,null,{default:function(){return[_.children.map(function(F){return a(oe.Item,{key:F.path||F.breadcrumbName},{default:function(){return[A({route:F,params:I,routes:f,paths:P(j,F.path,I)})]}})})]}})),a(W,{overlay:O,separator:M,key:B||_.breadcrumbName},{default:function(){return[A({route:_,params:I,routes:f,paths:j})]}})})};return function(){var c,s,b,f=r.routes,p=r.params,I=p===void 0?{}:p,M=Se(U(v,r)),$=(c=U(v,r,"separator"))!==null&&c!==void 0?c:"/",A=r.itemRender||v.itemRender||we;f&&f.length>0?b=w({routes:f,params:I,separator:$,itemRender:A}):M.length&&(b=M.map(function(_,B){return Ke(Qe(_.type)==="object"&&(_.type.__ANT_BREADCRUMB_ITEM||_.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),He(_,{separator:$,key:B})}));var R=(s={},ye(s,h.value,!0),ye(s,"".concat(h.value,"-rtl"),y.value==="rtl"),s);return a("div",{class:R},[b])}}});var Vt=["separator","class"],zt=function(){return{prefixCls:String}};const le=Y({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:zt(),setup:function(r,C){var v=C.slots,k=C.attrs,h=ie("breadcrumb",r),y=h.prefixCls;return function(){var S;k.separator;var P=k.class,w=Ie(k,Vt),c=Se((S=v.default)===null||S===void 0?void 0:S.call(v));return a("span",re({class:["".concat(y.value,"-separator"),P]},w),[c.length>0?c:"/"])}}});z.Item=W;z.Separator=le;z.install=function(o){return o.component(z.name,z),o.component(W.name,W),o.component(le.name,le),o};E.useInjectFormItemContext=Xe;E.ItemRest=se;E.install=function(o){return o.component(E.name,E),o.component(E.Item.name,E.Item),o.component(se.name,se),o};q.setDefaultIndicator=gt;q.install=function(o){return o.component(q.name,q),o};const jt={class:"hint"},Ot={class:"location-bar"},Lt={key:0},Ut=["onClick"],qt={key:3,style:{"margin-left":"8px"}},Wt={class:"actions"},Gt=["onClick"],Kt={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},Qt={style:{padding:"4px"}},Ht={style:{padding:"4px"}},Jt={key:0,class:"view"},Xt={style:{padding:"16px 0 32px"}},Yt={key:0,class:"preview-switch"},Zt=Y({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(o){const r=o,C=Ye(),{scroller:v,stackViewEl:k,props:h,multiSelectedIdxs:y,spinning:S}=_t().toRefs(),{currLocation:P,currPage:w,refresh:c,copyLocation:s,back:b,openNext:f,stack:p,quickMoveTo:I,addToSearchScanPathAndQuickMove:M,searchPathInfo:$,locInputValue:A,isLocationEditing:R,onLocEditEnter:_,onEditBtnClick:B,share:j,selectAll:O}=Ct(r),{gridItems:Z,sortMethodConv:F,moreActionsDropdownShow:G,sortedFiles:K,sortMethod:ee,itemSize:ue,loadNextDir:Me,loadNextDirLoading:$e,canLoadNext:Ae,onScroll:Re,cellWidth:Q}=yt(r),{onDrop:Be,onFileDragStart:De,onFileDragEnd:Ne}=ht(),{onFileItemClick:Ee,onContextMenuClick:de,showGenInfo:H,imageGenInfo:ce,q:Fe}=wt(r,{openNext:f}),{previewIdx:J,onPreviewVisibleChange:Te,previewing:pe,previewImgMove:me,canPreview:ve}=It(r),{showMenuIdx:te}=xt();return Ze(()=>r,()=>{h.value=r;const l=St.get(r.stackKey??"");l&&(p.value=l.slice())},{immediate:!0}),(l,t)=>{const Ve=dt,ze=ct,je=pt,fe=W,ke=z,Oe=mt,Le=vt,be=ft,Ue=kt,qe=oe,ge=Pe,_e=Dt,We=E,Ge=q;return u(),N(Ge,{spinning:e(S),size:"large"},{default:i(()=>[a(Ve,{style:{display:"none"}}),d("div",{ref_key:"stackViewEl",ref:k,onDragover:t[22]||(t[22]=g(()=>{},["prevent"])),onDrop:t[23]||(t[23]=g(n=>e(Be)(n),["prevent"])),class:"container"},[a(je,{visible:e(H),"onUpdate:visible":t[1]||(t[1]=n=>T(H)?H.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>H.value=!1)},{cancelText:i(()=>[]),default:i(()=>[a(ze,{active:"",loading:!e(Fe).isIdle},{default:i(()=>[d("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(et)(e(ce)))},[d("div",jt,m(l.$t("doubleClickToCopy")),1),V(" "+m(e(ce)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),d("div",Ot,[r.walkModePath?(u(),x("div",Lt,[a(Oe,null,{title:i(()=>[V(m(l.$t("walk-mode-move-message")),1)]),default:i(()=>[a(ke,{style:{flex:"1"}},{default:i(()=>[(u(!0),x(ne,null,ae(e(p),(n,D)=>(u(),N(fe,{key:D},{default:i(()=>[d("span",null,m(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})])):(u(),x("div",{key:1,class:"breadcrumb",style:tt({flex:e(R)?1:""})},[e(R)?(u(),N(Le,{key:0,style:{flex:"1"},value:e(A),"onUpdate:value":t[3]||(t[3]=n=>T(A)?A.value=n:null),onClick:t[4]||(t[4]=g(()=>{},["stop"])),onPressEnter:e(_)},null,8,["value","onPressEnter"])):(u(),N(ke,{key:1,style:{flex:"1"}},{default:i(()=>[(u(!0),x(ne,null,ae(e(p),(n,D)=>(u(),N(fe,{key:D},{default:i(()=>[d("a",{onClick:g(Ce=>e(b)(D),["prevent"])},m(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,Ut)]),_:2},1024))),128))]),_:1})),e(R)?(u(),N(be,{key:2,size:"small",onClick:e(_),type:"primary"},{default:i(()=>[V(m(l.$t("go")),1)]),_:1},8,["onClick"])):(u(),x("div",qt,[d("a",{onClick:t[5]||(t[5]=g((...n)=>e(s)&&e(s)(...n),["prevent"])),style:{"margin-right":"4px"}},m(l.$t("copy")),1),V(),d("a",{onClick:t[6]||(t[6]=g((...n)=>e(B)&&e(B)(...n),["prevent","stop"]))},m(l.$t("edit")),1)]))],4)),d("div",Wt,[d("a",{class:"opt",onClick:t[7]||(t[7]=g((...n)=>e(c)&&e(c)(...n),["prevent"]))},m(l.$t("refresh")),1),d("a",{class:"opt",onClick:t[8]||(t[8]=g((...n)=>e(O)&&e(O)(...n),["prevent","stop"]))},m(l.$t("selectAll")),1),e(nt)?L("",!0):(u(),x("a",{key:0,class:"opt",onClick:t[9]||(t[9]=g((...n)=>e(j)&&e(j)(...n),["prevent"]))},m(l.$t("share")),1)),a(ge,null,{overlay:i(()=>[a(qe,null,{default:i(()=>[(u(!0),x(ne,null,ae(e(C).quickMovePaths,n=>(u(),N(Ue,{key:n.dir},{default:i(()=>[d("a",{onClick:g(D=>e(I)(n.dir),["prevent"])},m(n.zh),9,Gt)]),_:2},1024))),128))]),_:1})]),default:i(()=>[d("a",{class:"opt",onClick:t[10]||(t[10]=g(()=>{},["prevent"]))},[V(m(l.$t("quickMove"))+" ",1),a(e(xe))])]),_:1}),a(ge,{trigger:["click"],visible:e(G),"onUpdate:visible":t[18]||(t[18]=n=>T(G)?G.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:i(()=>[d("div",Kt,[a(We,at(rt({labelCol:{span:6},wrapperCol:{span:18}})),{default:i(()=>[a(_e,{label:l.$t("gridCellWidth")},{default:i(()=>[a(Bt,{modelValue:e(Q),"onUpdate:modelValue":t[12]||(t[12]=n=>T(Q)?Q.value=n:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),a(_e,{label:l.$t("sortingMethod")},{default:i(()=>[a(e(ot),{value:e(ee),"onUpdate:value":t[13]||(t[13]=n=>T(ee)?ee.value=n:null),onClick:t[14]||(t[14]=g(()=>{},["stop"])),conv:e(F),options:e(st)},null,8,["value","conv","options"])]),_:1},8,["label"]),d("div",Qt,[e($)?e($).can_delete?(u(),x("a",{key:1,onClick:t[16]||(t[16]=g((...n)=>e(M)&&e(M)(...n),["prevent"]))},m(l.$t("removeFromSearchScanPathAndQuickMove")),1)):L("",!0):(u(),x("a",{key:0,onClick:t[15]||(t[15]=g((...n)=>e(M)&&e(M)(...n),["prevent"]))},m(l.$t("addToSearchScanPathAndQuickMove")),1))]),d("div",Ht,[d("a",{onClick:t[17]||(t[17]=g(n=>e(lt)(e(P)+"/"),["prevent"]))},m(l.$t("openWithLocalFileBrowser")),1)])]),_:1},16)])]),default:i(()=>[d("a",{class:"opt",onClick:t[11]||(t[11]=g(()=>{},["prevent"]))},m(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(w)?(u(),x("div",Jt,[a(e(Pt),{class:"file-list",items:e(K),ref_key:"scroller",ref:v,onScroll:e(Re),"item-size":e(ue).first,"key-field":"fullpath","item-secondary-size":e(ue).second,gridItems:e(Z)},it({default:i(({item:n,index:D})=>[a(Mt,{idx:D,file:n,"full-screen-preview-image-url":e(K)[e(J)]?e(ut)(e(K)[e(J)]):"","show-menu-idx":e(te),"onUpdate:showMenuIdx":t[19]||(t[19]=Ce=>T(te)?te.value=Ce:null),selected:e(y).includes(D),"cell-width":e(Q),onFileItemClick:e(Ee),onDragstart:e(De),onDragend:e(Ne),onPreviewVisibleChange:e(Te),onContextMenuClick:e(de)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick"])]),_:2},[r.walkModePath?{name:"after",fn:i(()=>[d("div",Xt,[a(be,{onClick:e(Me),loading:e($e),block:"",type:"primary",disabled:!e(Ae),ghost:""},{default:i(()=>[V(m(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])])]),key:"0"}:void 0]),1032,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(pe)?(u(),x("div",Yt,[a(e($t),{onClick:t[20]||(t[20]=n=>e(me)("prev")),class:he({disable:!e(ve)("prev")})},null,8,["class"]),a(e(At),{onClick:t[21]||(t[21]=n=>e(me)("next")),class:he({disable:!e(ve)("next")})},null,8,["class"])])):L("",!0)])):L("",!0)],544),e(pe)?(u(),N(Rt,{key:0,file:e(K)[e(J)],idx:e(J),onContextMenuClick:e(de)},null,8,["file","idx","onContextMenuClick"])):L("",!0)]),_:1},8,["spinning"])}}});const un=bt(Zt,[["__scopeId","data-v-e90a10af"]]);export{un as default};
