import{d as de,u as Ue,g as ie,_ as ut,c as i,a as Ne,P as we,D as Le,f as ct,w as Lt,b as Bt,e as Et,h as et,M as Be,i as Tt,j as zt,F as Ee,A as dt,k as Me,l as jt,r as be,m as Te,n as tt,o as Vt,s as De,p as K,q as at,t as Ut,v as Wt,x as Ht,y as ke,z as E,B as qt,C as Gt,E as Ce,G as nt,H as Kt,I as Qt,J as ze,K as Jt,L as Xt,N as Fe,O as Oe,Q as Yt,R as pt,S as R,T,U as g,V as Z,W as C,X as je,Y as G,Z as vt,$ as Zt,a0 as H,a1 as h,a2 as e,a3 as k,a4 as q,a5 as ea,a6 as st,a7 as ta,a8 as aa,a9 as na,aa as sa,ab as la,ac as oa,ad as ra,ae as lt,af as ia,ag as ua,ah as ca,ai as da,aj as pa}from"./index-8049db06.js";import{S as ue,s as va}from"./index-801277a9.js";import{F as Q,N as ft,_ as fa}from"./numInput-eaae8d26.js";import"./index-939e7fd1.js";/* empty css              */import{_ as ma}from"./shortcut-8ae2d17b.js";import{D as mt}from"./index-c817eeaa.js";/* empty css              *//* empty css              */import{u as gt,N as ga,g as D,s as ht,a as ha,b as ka,c as ya,d as ba,F as Ca}from"./FileItem-3347343f.js";import{u as wa,a as _a,b as Sa,c as Ia,d as Pa,M as xa,L as $a,R as Aa,f as Ra}from"./MultiSelectKeep-cffd6988.js";import{g as ye,o as Ma}from"./functionalCallableComp-127db4a5.js";import"./Checkbox-b6df5e2c.js";var Da=["class","style"],Fa=function(){return{prefixCls:String,href:String,separator:we.any,overlay:we.any,onClick:Function}};const ce=de({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Fa(),slots:["separator","overlay"],setup:function(t,o){var l=o.slots,p=o.attrs,c=Ue("breadcrumb",t),y=c.prefixCls,x=function(v,b){var f=ie(l,t,"overlay");return f?i(mt,{overlay:f,placement:"bottom"},{default:function(){return[i("span",{class:"".concat(b,"-overlay-link")},[v,i(Le,null,null)])]}}):v};return function(){var M,v=(M=ie(l,t,"separator"))!==null&&M!==void 0?M:"/",b=ie(l,t),f=p.class,$=p.style,I=ut(p,Da),w;return t.href!==void 0?w=i("a",Ne({class:"".concat(y.value,"-link"),onClick:t.onClick},I),[b]):w=i("span",Ne({class:"".concat(y.value,"-link"),onClick:t.onClick},I),[b]),w=x(w,y.value),b?i("span",{class:f,style:$},[w,v&&i("span",{class:"".concat(y.value,"-separator")},[v])]):null}}});var Oa=function(){return{prefixCls:String,routes:{type:Array},params:we.any,separator:we.any,itemRender:{type:Function}}};function Na(s,t){if(!s.breadcrumbName)return null;var o=Object.keys(t).join("|"),l=s.breadcrumbName.replace(new RegExp(":(".concat(o,")"),"g"),function(p,c){return t[c]||p});return l}function ot(s){var t=s.route,o=s.params,l=s.routes,p=s.paths,c=l.indexOf(t)===l.length-1,y=Na(t,o);return c?i("span",null,[y]):i("a",{href:"#/".concat(p.join("/"))},[y])}const se=de({compatConfig:{MODE:3},name:"ABreadcrumb",props:Oa(),slots:["separator","itemRender"],setup:function(t,o){var l=o.slots,p=Ue("breadcrumb",t),c=p.prefixCls,y=p.direction,x=function(f,$){return f=(f||"").replace(/^\//,""),Object.keys($).forEach(function(I){f=f.replace(":".concat(I),$[I])}),f},M=function(f,$,I){var w=Tt(f),N=x($||"",I);return N&&w.push(N),w},v=function(f){var $=f.routes,I=$===void 0?[]:$,w=f.params,N=w===void 0?{}:w,z=f.separator,L=f.itemRender,F=L===void 0?ot:L,j=[];return I.map(function(P){var B=x(P.path,N);B&&j.push(B);var J=[].concat(j),X=null;return P.children&&P.children.length&&(X=i(Be,null,{default:function(){return[P.children.map(function(U){return i(Be.Item,{key:U.path||U.breadcrumbName},{default:function(){return[F({route:U,params:N,routes:I,paths:M(J,U.path,N)})]}})})]}})),i(ce,{overlay:X,separator:z,key:B||P.breadcrumbName},{default:function(){return[F({route:P,params:N,routes:I,paths:J})]}})})};return function(){var b,f,$,I=t.routes,w=t.params,N=w===void 0?{}:w,z=ct(ie(l,t)),L=(b=ie(l,t,"separator"))!==null&&b!==void 0?b:"/",F=t.itemRender||l.itemRender||ot;I&&I.length>0?$=v({routes:I,params:N,separator:L,itemRender:F}):z.length&&($=z.map(function(P,B){return Lt(Bt(P.type)==="object"&&(P.type.__ANT_BREADCRUMB_ITEM||P.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),Et(P,{separator:L,key:B})}));var j=(f={},et(f,c.value,!0),et(f,"".concat(c.value,"-rtl"),y.value==="rtl"),f);return i("div",{class:j},[$])}}});var La=["separator","class"],Ba=function(){return{prefixCls:String}};const Ve=de({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Ba(),setup:function(t,o){var l=o.slots,p=o.attrs,c=Ue("breadcrumb",t),y=c.prefixCls;return function(){var x;p.separator;var M=p.class,v=ut(p,La),b=ct((x=l.default)===null||x===void 0?void 0:x.call(l));return i("span",Ne({class:["".concat(y.value,"-separator"),M]},v),[b.length>0?b:"/"])}}});se.Item=ce;se.Separator=Ve;se.install=function(s){return s.component(se.name,se),s.component(ce.name,ce),s.component(Ve.name,Ve),s};Q.useInjectFormItemContext=zt;Q.ItemRest=Ee;Q.install=function(s){return s.component(Q.name,Q),s.component(Q.Item.name,Q.Item),s.component(Ee.name,Ee),s};ue.setDefaultIndicator=va;ue.install=function(s){return s.component(ue.name,ue),s};var Ea={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};const Ta=Ea;function rt(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(o).filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable}))),l.forEach(function(p){za(s,p,o[p])})}return s}function za(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}var We=function(t,o){var l=rt({},t,o.attrs);return i(dt,rt({},l,{icon:Ta}),null)};We.displayName="ArrowLeftOutlined";We.inheritAttrs=!1;const ja=We;class _e{static run(t){const o=Object.assign({immediately:!0,id:-1,isFinished:!1,errorHandleMethod:"ignore"},t);let l,p;const c=new Promise((v,b)=>{p=v,l=b}),y=()=>{o.isFinished=!0,clearTimeout(o.id)},x=()=>Me(this,void 0,void 0,function*(){try{o.res=yield o.action(),o.validator&&o.validator(o.res)&&(p(o.res),y())}catch(v){_e.silent||console.error(v),o.errorHandleMethod==="stop"&&(y(),l(v))}}),M=()=>{o.isFinished||(o.id=setTimeout(()=>Me(this,void 0,void 0,function*(){yield x(),M()}),o.pollInterval))};return setTimeout(()=>Me(this,void 0,void 0,function*(){o.immediately&&(yield x()),M()}),0),jt({task:o,clearTask:y,completedTask:c})}}_e.silent=!1;var Va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Ua=Va;function it(s){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?Object(arguments[t]):{},l=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(o).filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable}))),l.forEach(function(p){Wa(s,p,o[p])})}return s}function Wa(s,t,o){return t in s?Object.defineProperty(s,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[t]=o,s}var He=function(t,o){var l=it({},t,o.attrs);return i(dt,it({},l,{icon:Ua}),null)};He.displayName="DatabaseOutlined";He.inheritAttrs=!1;const Ha=He;function qa(){const s=be(),{scroller:t,stackViewEl:o,stack:l,currPage:p,currLocation:c,useEventListen:y,eventEmitter:x,getPane:M,props:v,deletedFiles:b,walker:f,sortedFiles:$}=gt().toRefs();Te(()=>l.value.length,tt((n,u)=>{var d;n!==u&&((d=t.value)==null||d.scrollToItem(0))},300)),Vt(async()=>{var n;if(!l.value.length)if(v.value.mode==="scanned-fixed"||v.value.mode==="walk")l.value=[{files:[],curr:v.value.path??""}];else{const u=await ye("/");l.value.push({files:u.files,curr:"/"})}s.value=new ga,s.value.configure({parent:o.value}),v.value.path&&v.value.path!=="/"?await F(v.value.path):(n=D.conf)!=null&&n.home&&F(D.conf.home)}),Te(c,tt(n=>{const u=M.value();if(!u)return;u.path=n;const d=De(n).pop()??"",S=(()=>{const A={walk:"Walk","scanned-fixed":"Fixed",scanned:null}[v.value.mode??"scanned"],O=ae=>A?`${A}: ${ae}`:ae,V=D.getShortPath(n);return O(V.length>24&&d?d:V)})();u.name=K("div",{style:"display:flex;align-items:center"},[K(Ha),K("span",{class:"line-clamp-1",style:"max-width: 256px"},S)]),u.nameFallbackStr=S,D.recent=D.recent.filter(A=>A.key!==u.key),D.recent.unshift({path:n,key:u.key,mode:v.value.mode}),D.recent.length>20&&(D.recent=D.recent.slice(0,20))},300));const I=()=>ze(c.value),w=async n=>{var u,d;if(n.type==="dir")try{(u=s.value)==null||u.start();const{files:_}=await ye(n.fullpath);v.value.mode=="scanned-fixed"?l.value=[{files:_,curr:n.fullpath}]:l.value.push({files:_,curr:n.name})}finally{(d=s.value)==null||d.done()}},N=n=>{if(v.value.mode!="walk")for(;n<l.value.length-1;)l.value.pop()},z=()=>{F(Jt(c.value))},L=(n,u)=>(Xt(D.conf,"global.conf load failed"),D.conf.is_win?n.toLowerCase()==u.toLowerCase():n==u),F=async n=>{v.value.mode==="walk"?M.value().path=n:v.value.mode==="scanned-fixed"?await w({fullpath:n,name:n,type:"dir"}):await j(n),at(500).then(()=>x.value.emit("viewableAreaFilesChange"))},j=async n=>{var d,_;const u=l.value.slice();try{Ut(n)||(n=Wt(((d=D.conf)==null?void 0:d.sd_cwd)??"/",n));const S=De(n),A=l.value.map(O=>O.curr);for(A.shift();A[0]&&S[0]&&L(A[0],S[0]);)A.shift(),S.shift();for(let O=0;O<A.length;O++)l.value.pop();if(!S.length)return P();for(const O of S){const V=(_=p.value)==null?void 0:_.files.find(ae=>L(ae.name,O));if(!V)throw console.error({frags:S,frag:O,stack:Ht(l.value)}),new Error(`${O} not found`);await w(V)}}catch(S){throw ke.error(E("moveFailedCheckPath")+(S instanceof Error?S.message:"")),console.error(n,De(n),p.value),l.value=u,S}},P=qt(async()=>{var n,u,d;try{if((n=s.value)==null||n.start(),f.value)await f.value.reset(),x.value.emit("loadNextDir");else{const{files:_}=await ye(c.value);Fe(l.value).files=_}b.value.clear(),(u=t.value)==null||u.scrollToItem(0),ke.success(E("refreshCompleted"))}finally{(d=s.value)==null||d.done()}}),B=async()=>{var n,u,d;if(v.value.mode==="walk"&&f.value){const _=((n=t.value)==null?void 0:n.$_endIndex)??64;if(_<128&&await f.value.isExpired()){const S=ke.loading(E("autoUpdate"),0);try{const A=new Promise(O=>{f.value.seamlessRefresh(_).then(V=>{f.value=V,x.value.emit("loadNextDir"),O()})});await Promise.all([A,at(1500)])}finally{S()}}return}try{(u=s.value)==null||u.start();const{files:_}=await ye(c.value);Fe(l.value).files.map(A=>A.date).join()!==_.map(A=>A.date).join()&&(Fe(l.value).files=_,ke.success(E("autoUpdate")))}finally{(d=s.value)==null||d.done()}};Gt("returnToIIB",B),y.value("refresh",P);const J=n=>{F(n)},X=Ce(()=>D.quickMovePaths.map(n=>({...n,path:nt(n.dir)}))),ee=Ce(()=>{const n=nt(c.value);return X.value.find(d=>d.path===n)}),U=async()=>{const n=D.tabList[v.value.tabIdx],u={type:"empty",name:E("emptyStartPage"),key:Date.now()+Oe(),popAddPathModal:{path:c.value,type:"scanned"}};n.panes.push(u),n.key=u.key},W=be(!1),te=be(c.value),Se=()=>{W.value=!0,te.value=c.value},pe=async()=>{await F(te.value),W.value=!1};wa("click",n=>{var u,d,_;(_=(d=(u=n.target)==null?void 0:u.className)==null?void 0:d.includes)!=null&&_.call(d,"ant-input")||(W.value=!1)});const Ie=()=>{const n=parent.location,u=n.href.substring(0,n.href.length-n.search.length),d=new URLSearchParams(n.search);d.set("action","open"),d.set("path",c.value),d.set("mode",v.value.mode??"scanned");const _=`${u}?${d.toString()}`;ze(_,E("copyLocationUrlSuccessMsg"))},Pe=(n="tag-search")=>{const u=D.tabList[v.value.tabIdx],d={type:n,key:Oe(),searchScope:c.value,name:E(n==="tag-search"?"imgSearch":"fuzzy-search")};u.panes.push(d),u.key=d.key},le=()=>x.value.emit("selectAll"),Y=async()=>{await Ma(c.value),await P()},oe=()=>{const n=c.value;ht.set(n,l.value);const u=D.tabList[v.value.tabIdx],d={type:"local",key:Oe(),path:n,name:E("local"),stackKey:n,mode:"walk"};u.panes.push(d),u.key=d.key},ve=Ce(()=>!f.value&&$.value.some(n=>n.type==="dir"));return{locInputValue:te,isLocationEditing:W,onLocEditEnter:pe,onEditBtnClick:Se,addToSearchScanPathAndQuickMove:U,searchPathInfo:ee,refresh:P,copyLocation:I,back:N,openNext:w,currPage:p,currLocation:c,stack:l,scroller:t,share:Ie,selectAll:le,quickMoveTo:J,onCreateFloderBtnClick:Y,onWalkBtnClick:oe,showWalkButton:ve,searchInCurrentDir:Pe,backToLastUseTo:z,...Ga(B)}}const Ga=s=>{const t=be([]),o=Ce(()=>t.value.length>0);Kt(()=>{t.value.forEach(c=>c())});const l=Qt(Yt+"poll-interval",3);return{onPollRefreshClick:()=>{if(t.value.length){t.value.forEach(c=>c()),t.value=[];return}pt.confirm({title:E("pollRefresh"),width:640,content:()=>K("div",{},[K("p",{class:"uni-desc primary-bg"},E("pollRefreshTip")),K("div",{style:{display:"flex",alignItems:"center",gap:"4px"}},[K("span",{},E("pollInterval")+"(s): "),K(ft,{min:1,max:60*10,modelValue:l.value,"onUpdate:modelValue":c=>{l.value=c}})])]),onOk:()=>{const{clearTask:c}=_e.run({pollInterval:l.value*1e3,action:s});t.value.push(c)}})},polling:o}};const Ka={class:"base-info"},Qa=de({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(s){return(t,o)=>(R(),T("div",Ka,[g("span",null,[Z(C(t.$t("items",[t.fileNum]))+" ",1),t.selectedFileNum?(R(),T(je,{key:0},[Z(", "+C(t.$t("selectedItems",[t.selectedFileNum])),1)],64)):G("",!0)])]))}});const Ja=vt(Qa,[["__scopeId","data-v-afd25667"]]),Xa={class:"hint"},Ya={class:"location-bar"},Za=["onClick"],en={key:3,class:"location-act"},tn={class:"actions"},an=["onClick"],nn={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},sn={style:{padding:"4px"}},ln={style:{padding:"4px"}},on={style:{padding:"4px"}},rn={key:0,class:"view"},un={style:{padding:"16px 0 512px"}},cn={key:0,class:"preview-switch"},dn=de({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},mode:{},stackKey:{}},setup(s){const t=s,o=Zt(),{scroller:l,stackViewEl:p,props:c,multiSelectedIdxs:y,spinning:x}=gt().toRefs(),{currLocation:M,currPage:v,refresh:b,copyLocation:f,back:$,openNext:I,stack:w,quickMoveTo:N,addToSearchScanPathAndQuickMove:z,locInputValue:L,isLocationEditing:F,onLocEditEnter:j,onEditBtnClick:P,share:B,selectAll:J,onCreateFloderBtnClick:X,onWalkBtnClick:ee,showWalkButton:U,searchInCurrentDir:W,backToLastUseTo:te,polling:Se,onPollRefreshClick:pe}=qa(),{gridItems:Ie,sortMethodConv:Pe,moreActionsDropdownShow:le,sortedFiles:Y,sortMethod:oe,itemSize:ve,loadNextDir:n,loadNextDirLoading:u,canLoadNext:d,onScroll:_,cellWidth:S,dirCoverCache:A}=ha(),{onDrop:O,onFileDragStart:V,onFileDragEnd:ae}=_a(),{onFileItemClick:kt,onContextMenuClick:qe,showGenInfo:fe,imageGenInfo:Ge,q:yt}=Sa({openNext:I}),{previewIdx:me,onPreviewVisibleChange:bt,previewing:xe,previewImgMove:Ke,canPreview:Qe}=Ia(),{showMenuIdx:$e}=ka(),{onClearAllSelected:Ct,onReverseSelect:wt,onSelectAll:_t}=ya(),{getGenDiff:St,changeIndchecked:re,seedChangeChecked:ge,getRawGenParams:It,getGenDiffWatchDep:Pt}=Pa();return Te(()=>t,()=>{c.value=t;const m=ht.get(t.stackKey??"");m&&(w.value=m.slice())},{immediate:!0}),(m,a)=>{const xt=ia,$t=ua,At=pt,Rt=ca,Mt=ce,Dt=se,Je=da,Ae=pa,Xe=Be,Re=mt,Ft=ft,he=fa,Ye=ma,Ot=Q,Nt=ue;return R(),H(Nt,{spinning:e(x),size:"large"},{default:h(()=>[i(xa,{show:e(o).keepMultiSelect||!!e(y).length,onClearAllSelected:e(Ct),onSelectAll:e(_t),onReverseSelect:e(wt)},null,8,["show","onClearAllSelected","onSelectAll","onReverseSelect"]),i(xt,{style:{display:"none"}}),g("div",{ref_key:"stackViewEl",ref:p,onDragover:a[31]||(a[31]=k(()=>{},["prevent"])),onDrop:a[32]||(a[32]=k(r=>e(O)(r),["prevent"])),class:"container"},[i(At,{visible:e(fe),"onUpdate:visible":a[1]||(a[1]=r=>q(fe)?fe.value=r:null),width:"70vw","mask-closable":"",onOk:a[2]||(a[2]=r=>fe.value=!1)},{cancelText:h(()=>[]),default:h(()=>[i($t,{active:"",loading:!e(yt).isIdle},{default:h(()=>[g("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:a[0]||(a[0]=r=>e(ze)(e(Ge)))},[g("div",Xa,C(m.$t("doubleClickToCopy")),1),Z(" "+C(e(Ge)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),g("div",Ya,[g("div",{class:"breadcrumb",style:ea({flex:e(F)?1:""})},[e(F)?(R(),H(Rt,{key:0,style:{flex:"1"},value:e(L),"onUpdate:value":a[3]||(a[3]=r=>q(L)?L.value=r:null),onClick:a[4]||(a[4]=k(()=>{},["stop"])),onKeydown:a[5]||(a[5]=k(()=>{},["stop"])),onPressEnter:e(j),"allow-clear":""},null,8,["value","onPressEnter"])):(R(),H(Dt,{key:1,style:{flex:"1"}},{default:h(()=>[(R(!0),T(je,null,st(e(w),(r,ne)=>(R(),H(Mt,{key:ne},{default:h(()=>[g("a",{onClick:k(Ze=>e($)(ne),["prevent"])},C(r.curr==="/"?m.$t("root"):r.curr.replace(/:\/$/,m.$t("drive"))),9,Za)]),_:2},1024))),128))]),_:1})),e(F)?(R(),H(Je,{key:2,size:"small",onClick:e(j),type:"primary"},{default:h(()=>[Z(C(m.$t("go")),1)]),_:1},8,["onClick"])):(R(),T("div",en,[m.mode==="scanned-fixed"?(R(),T("a",{key:0,onClick:a[6]||(a[6]=k((...r)=>e(te)&&e(te)(...r),["prevent"])),style:{margin:"0 8px 16px 0"}},[i(e(ja))])):G("",!0),g("a",{onClick:a[7]||(a[7]=k((...r)=>e(f)&&e(f)(...r),["prevent"])),class:"copy"},C(m.$t("copy")),1),g("a",{onClick:a[8]||(a[8]=k((...r)=>e(P)&&e(P)(...r),["prevent","stop"]))},C(m.$t("edit")),1)]))],4),g("div",tn,[g("a",{class:"opt",onClick:a[9]||(a[9]=k((...r)=>e(b)&&e(b)(...r),["prevent"]))},C(m.$t("refresh")),1),g("a",{class:"opt",onClick:a[10]||(a[10]=k((...r)=>e(pe)&&e(pe)(...r),["prevent"]))},C(e(Se)?m.$t("stopPollRefresh"):m.$t("pollRefresh")),1),i(Re,null,{overlay:h(()=>[i(Xe,null,{default:h(()=>[i(Ae,{key:"tag-search"},{default:h(()=>[g("a",{onClick:a[12]||(a[12]=k(r=>e(W)("tag-search"),["prevent"]))},C(m.$t("imgSearch")),1)]),_:1}),i(Ae,{key:"tag-search"},{default:h(()=>[g("a",{onClick:a[13]||(a[13]=k(r=>e(W)("fuzzy-search"),["prevent"]))},C(m.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:h(()=>[g("a",{class:"opt",onClick:a[11]||(a[11]=k(()=>{},["prevent"]))},[Z(C(m.$t("search"))+" ",1),i(e(Le))])]),_:1}),e(U)?(R(),T("a",{key:0,class:"opt",onClick:a[14]||(a[14]=k((...r)=>e(ee)&&e(ee)(...r),["prevent"]))}," Walk ")):G("",!0),g("a",{class:"opt",onClick:a[15]||(a[15]=k((...r)=>e(J)&&e(J)(...r),["prevent","stop"]))},C(m.$t("selectAll")),1),e(ta)?G("",!0):(R(),T("a",{key:1,class:"opt",onClick:a[16]||(a[16]=k((...r)=>e(B)&&e(B)(...r),["prevent"]))},C(m.$t("share")),1)),i(Re,null,{overlay:h(()=>[i(Xe,null,{default:h(()=>[(R(!0),T(je,null,st(e(o).quickMovePaths,r=>(R(),H(Ae,{key:r.dir},{default:h(()=>[g("a",{onClick:k(ne=>e(N)(r.dir),["prevent"])},C(r.zh),9,an)]),_:2},1024))),128))]),_:1})]),default:h(()=>[g("a",{class:"opt",onClick:a[17]||(a[17]=k(()=>{},["prevent"]))},[Z(C(m.$t("quickMove"))+" ",1),i(e(Le))])]),_:1}),i(Re,{trigger:["click"],visible:e(le),"onUpdate:visible":a[27]||(a[27]=r=>q(le)?le.value=r:null),placement:"bottomLeft",getPopupContainer:r=>r.parentNode},{overlay:h(()=>[g("div",nn,[i(Ot,aa(na({labelCol:{span:10},wrapperCol:{span:14}})),{default:h(()=>[i(he,{label:m.$t("gridCellWidth")},{default:h(()=>[i(Ft,{modelValue:e(S),"onUpdate:modelValue":a[19]||(a[19]=r=>q(S)?S.value=r:null),max:1024,min:64,step:16},null,8,["modelValue"])]),_:1},8,["label"]),i(he,{label:m.$t("sortingMethod")},{default:h(()=>[i(e(sa),{value:e(oe),"onUpdate:value":a[20]||(a[20]=r=>q(oe)?oe.value=r:null),onClick:a[21]||(a[21]=k(()=>{},["stop"])),conv:e(Pe),options:e(la)},null,8,["value","conv","options"])]),_:1},8,["label"]),i(he,{label:m.$t("showChangeIndicators")},{default:h(()=>[i(Ye,{checked:e(re),"onUpdate:checked":a[22]||(a[22]=r=>q(re)?re.value=r:null),onClick:e(It)},null,8,["checked","onClick"])]),_:1},8,["label"]),i(he,{label:m.$t("seedAsChange")},{default:h(()=>[i(Ye,{checked:e(ge),"onUpdate:checked":a[23]||(a[23]=r=>q(ge)?ge.value=r:null),disabled:!e(re)},null,8,["checked","disabled"])]),_:1},8,["label"]),g("div",sn,[g("a",{onClick:a[24]||(a[24]=k((...r)=>e(z)&&e(z)(...r),["prevent"]))},C(m.$t("addToSearchScanPathAndQuickMove")),1)]),g("div",ln,[g("a",{onClick:a[25]||(a[25]=k(r=>e(oa)(e(M)+"/"),["prevent"]))},C(m.$t("openWithLocalFileBrowser")),1)]),g("div",on,[g("a",{onClick:a[26]||(a[26]=k((...r)=>e(X)&&e(X)(...r),["prevent"]))},C(m.$t("createFolder")),1)])]),_:1},16)])]),default:h(()=>[g("a",{class:"opt",onClick:a[18]||(a[18]=k(()=>{},["prevent"]))},C(m.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(v)?(R(),T("div",rn,[i(e(ba),{class:"file-list",items:e(Y),ref_key:"scroller",ref:l,onScroll:e(_),"item-size":e(ve).first,"key-field":"fullpath","item-secondary-size":e(ve).second,gridItems:e(Ie)},{default:h(({item:r,index:ne})=>[i(Ca,{idx:parseInt(ne),file:r,"full-screen-preview-image-url":e(Y)[e(me)]?e(ra)(e(Y)[e(me)]):"","show-menu-idx":e($e),"onUpdate:showMenuIdx":a[28]||(a[28]=Ze=>q($e)?$e.value=Ze:null),selected:e(y).includes(ne),"cell-width":e(S),onFileItemClick:e(kt),onDragstart:e(V),onDragend:e(ae),onPreviewVisibleChange:e(bt),onContextMenuClick:e(qe),"is-selected-mutil-files":e(y).length>1,"enable-change-indicator":e(re),"seed-change-checked":e(ge),"get-gen-diff":e(St),"get-gen-diff-watch-dep":e(Pt),previewing:e(xe),"cover-files":e(A).get(r.fullpath)},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files","enable-change-indicator","seed-change-checked","get-gen-diff","get-gen-diff-watch-dep","previewing","cover-files"])]),after:h(()=>[g("div",un,[t.mode==="walk"?(R(),H(Je,{key:0,onClick:e(n),loading:e(u),block:"",type:"primary",disabled:!e(d),ghost:""},{default:h(()=>[Z(C(m.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):G("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(xe)?(R(),T("div",cn,[i(e($a),{onClick:a[29]||(a[29]=r=>e(Ke)("prev")),class:lt({disable:!e(Qe)("prev")})},null,8,["class"]),i(e(Aa),{onClick:a[30]||(a[30]=r=>e(Ke)("next")),class:lt({disable:!e(Qe)("next")})},null,8,["class"])])):G("",!0)])):G("",!0)],544),e(xe)?(R(),H(Ra,{key:0,file:e(Y)[e(me)],idx:e(me),onContextMenuClick:e(qe)},null,8,["file","idx","onContextMenuClick"])):G("",!0),i(Ja,{"file-num":e(Y).length,"selected-file-num":e(y).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const In=vt(dn,[["__scopeId","data-v-bd9da014"]]);export{In as default};
