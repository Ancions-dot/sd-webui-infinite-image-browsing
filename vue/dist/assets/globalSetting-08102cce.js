import{d as R,W as A,r as F,k as E,l as L,N as h,O as v,c as l,Y as o,Z as e,x as u,X as k,U as C,Q as r,T as y,S as m,R as _,a6 as M,aK as z,a7 as H,a2 as x,$ as I,a3 as Q,aL as X,aM as Y,aN as Z,aO as j,af as B,ae as q,V as J}from"./index-a51ae076.js";import{N as T,_ as N,F as ee}from"./numInput-118febe3.js";import"./index-c57d636d.js";/* empty css              */import{_ as O,g as te,C as le}from"./shortcut-d6e77b90.js";/* empty css              */import{a as ne}from"./functionalCallableComp-00e95f21.js";import"./Checkbox-7a848ac0.js";const K="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",ae=["width","height","src"],oe=R({__name:"ImageSetting",setup(D){function d(S,i){return new Promise(c=>{const n=new Image;n.onload=()=>{const t=document.createElement("canvas");t.width=n.width*i,t.height=n.height*i,t.getContext("2d").drawImage(n,0,0,t.width,t.height),c(t.toDataURL())},n.src=S})}const a=A(),w=F("");return E(()=>[a.enableThumbnail,a.gridThumbnailResolution],L(async()=>{a.enableThumbnail&&(w.value=await d(K,a.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(S,i)=>{const c=N,n=O;return h(),v(y,null,[l(c,{label:e(u)("defaultGridCellWidth")},{default:o(()=>[l(T,{min:64,max:1024,step:32,modelValue:e(a).defaultGridCellWidth,"onUpdate:modelValue":i[0]||(i[0]=t=>e(a).defaultGridCellWidth=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(c,{label:e(u)("useThumbnailPreview")},{default:o(()=>[l(n,{checked:e(a).enableThumbnail,"onUpdate:checked":i[1]||(i[1]=t=>e(a).enableThumbnail=t)},null,8,["checked"])]),_:1},8,["label"]),e(a).enableThumbnail?(h(),k(c,{key:0,label:e(u)("thumbnailResolution")},{default:o(()=>[l(T,{modelValue:e(a).gridThumbnailResolution,"onUpdate:modelValue":i[2]||(i[2]=t=>e(a).gridThumbnailResolution=t),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):C("",!0),l(c,{label:e(u)("livePreview")},{default:o(()=>[r("div",null,[r("img",{width:e(a).defaultGridCellWidth,height:e(a).defaultGridCellWidth,src:e(a).enableThumbnail?w.value:e(K)},null,8,ae)])]),_:1},8,["label"]),l(c,{label:e(u)("defaultShowChangeIndicators")},{default:o(()=>[l(n,{checked:e(a).defaultChangeIndchecked,"onUpdate:checked":i[3]||(i[3]=t=>e(a).defaultChangeIndchecked=t)},null,8,["checked"])]),_:1},8,["label"]),e(a).defaultChangeIndchecked?(h(),k(c,{key:1,label:e(u)("defaultSeedAsChange")},{default:o(()=>[l(n,{checked:e(a).defaultSeedChangeChecked,"onUpdate:checked":i[4]||(i[4]=t=>e(a).defaultSeedChangeChecked=t)},null,8,["checked"])]),_:1},8,["label"])):C("",!0),l(c,{label:e(u)("previewMaskBackgroundOpacity")},{default:o(()=>[l(T,{min:0,max:1,step:.05,modelValue:e(a).previewBgOpacity,"onUpdate:modelValue":i[5]||(i[5]=t=>e(a).previewBgOpacity=t)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),de={class:"panel"},se={style:{"margin-top":"0"}},ie={class:"lang-select-wrap"},ue={class:"col"},re={class:"col"},ce={class:"col"},me={class:"col"},pe=R({__name:"globalSetting",setup(D){const d=A(),a=F(!1),w=async()=>{window.location.reload()},S=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],i=(n,t)=>{const f=te(n);f&&(d.shortcut[t]=f)},c=async()=>{await X("shutdown_api_server_command"),await Y.removeFile(Z),await j()};return(n,t)=>{const f=B,p=N,U=O,b=B,G=le,$=q,P=ee;return h(),v("div",de,[C("",!0),l(P,null,{default:o(()=>{var V;return[r("h2",se,m(e(u)("ImageBrowsingSettings")),1),l(oe),r("h2",null,m(e(u)("imgSearch")),1),l(p,{label:n.$t("rebuildImageIndex")},{default:o(()=>[l(f,{onClick:e(ne)},{default:o(()=>[_(m(n.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),r("h2",null,m(e(u)("other")),1),l(p,{label:n.$t("onlyFoldersAndImages")},{default:o(()=>[l(U,{checked:e(d).onlyFoldersAndImages,"onUpdate:checked":t[0]||(t[0]=s=>e(d).onlyFoldersAndImages=s)},null,8,["checked"])]),_:1},8,["label"]),l(p,{label:n.$t("defaultSortingMethod")},{default:o(()=>[l(e(M),{value:e(d).defaultSortingMethod,"onUpdate:value":t[1]||(t[1]=s=>e(d).defaultSortingMethod=s),conv:e(z),options:e(H)},null,8,["value","conv","options"])]),_:1},8,["label"]),l(p,{label:n.$t("longPressOpenContextMenu")},{default:o(()=>[l(U,{checked:e(d).longPressOpenContextMenu,"onUpdate:checked":t[2]||(t[2]=s=>e(d).longPressOpenContextMenu=s)},null,8,["checked"])]),_:1},8,["label"]),l(p,{label:n.$t("lang")},{default:o(()=>[r("div",ie,[l(e(M),{options:S,value:e(d).lang,"onUpdate:value":t[3]||(t[3]=s=>e(d).lang=s),onChange:t[4]||(t[4]=s=>a.value=!0)},null,8,["value"])]),a.value?(h(),k(b,{key:0,type:"primary",onClick:w,ghost:""},{default:o(()=>[_(m(e(u)("langChangeReload")),1)]),_:1})):C("",!0)]),_:1},8,["label"]),(h(!0),v(y,null,x(e(d).ignoredConfirmActions,(s,g)=>(h(),k(p,{label:n.$t(g+"SkipConfirm"),key:g},{default:o(()=>[l(G,{checked:e(d).ignoredConfirmActions[g],"onUpdate:checked":W=>e(d).ignoredConfirmActions[g]=W},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),r("h2",null,m(e(u)("shortcutKey")),1),l(p,{label:n.$t("download")},{default:o(()=>[r("div",ue,[l($,{value:e(d).shortcut.download,onKeydown:t[5]||(t[5]=I(s=>i(s,"download"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(b,{onClick:t[6]||(t[6]=s=>e(d).shortcut.download=""),class:"clear-btn"},{default:o(()=>[_(m(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),l(p,{label:n.$t("deleteSelected")},{default:o(()=>[r("div",re,[l($,{value:e(d).shortcut.delete,onKeydown:t[7]||(t[7]=I(s=>i(s,"delete"),["stop","prevent"])),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","placeholder"]),l(b,{onClick:t[8]||(t[8]=s=>e(d).shortcut.delete=""),class:"clear-btn"},{default:o(()=>[_(m(n.$t("clear")),1)]),_:1})])]),_:1},8,["label"]),(h(!0),v(y,null,x(((V=e(d).conf)==null?void 0:V.all_custom_tags)??[],s=>(h(),k(p,{label:n.$t("toggleTagSelection",{tag:s.name}),key:s.id},{default:o(()=>[r("div",ce,[l($,{value:e(d).shortcut[`toggle_tag_${s.name}`],onKeydown:I(g=>i(g,`toggle_tag_${s.name}`),["stop","prevent"]),placeholder:n.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),l(b,{onClick:g=>e(d).shortcut[`toggle_tag_${s.name}`]="",class:"clear-btn"},{default:o(()=>[_(m(n.$t("clear")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["label"]))),128)),e(Q)?(h(),v(y,{key:0},[r("h2",null,m(e(u)("clientSpecificSettings")),1),l(p,null,{default:o(()=>[r("div",me,[l(b,{onClick:c,class:"clear-btn"},{default:o(()=>[_(m(n.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):C("",!0)]}),_:1})])}}});const we=J(pe,[["__scopeId","data-v-e5d3d829"]]);export{we as default};
